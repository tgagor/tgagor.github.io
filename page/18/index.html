<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tom's Blog</title>
<meta name=keywords content="Blog,Technical,Automation,DevOps,Cloud,Linux,Leadership"><meta name=description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta name=author content="timor"><link rel=canonical href=https://gagor.pro/><link crossorigin=anonymous href=/assets/css/stylesheet.b75f2a8f35519547db38b55fa84baf47177f24f8e88f96c8d73a55d12ab8bcec.css integrity="sha256-t18qjzVRlUfbOLVfqEuvRxd/JPjoj5bI1zpV0Sq4vOw=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://gagor.pro/index.xml><link rel=alternate type=application/json href=https://gagor.pro/index.json><link rel=alternate hreflang=en href=https://gagor.pro/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Tom's Blog"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:type" content="website"><meta property="og:url" content="https://gagor.pro/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tom's Blog"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Tom's Blog","url":"https://gagor.pro/","description":"Linux configuration, Automation, Security - Sysadmin/DevOps blog","thumbnailUrl":"https://gagor.pro/favicon.ico","sameAs":["https://www.linkedin.com/in/tgagor","https://github.com/tgagor","https://buymeacoffee.com/tgagor","https://ko-fi.com/tgagor","https://hub.docker.com/u/tgagor","index.xml"]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.png alt aria-label=logo height=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Wymuszenie fsck po restarcie</h2></header><div class=entry-content><p>Jeżeli chcemy by po ponownym uruchomieniu w czasie startu zostały sprawdzone wszystkie dyski narzędziem to można to osiągnąć na dwa sposoby. Zawsze gdy tego potrzebuję zastanawiam się tylko jaki plik trzeba było utworzyć… forcefsck, fsck, fsckforce… więc notuję 😉
Utworzenie pliku /forcefsck Pierwsza metoda polega na utworzeniu pliku forcefsck w głównym katalog, robimy to poniższym poleceniem:
sudo touch /forcefsck Polecenie shutdown Druga metoda wykorzystuje parametr -F polecenia shutdown ale nie działa na wszystkich dystrybucjach (w takiej sytuacji patrz pierwsza metoda):...</p></div><footer class=entry-footer><span title='2012-09-08 00:00:00 +0000 UTC'>2012-09-08</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Wymuszenie fsck po restarcie" href=https://gagor.pro/2012/09/wymuszenie-fsck-po-restarcie/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Moje ulubione aplikacje na Android’a</h2></header><div class=entry-content><p>Znajomi co jakiś czas pytają mnie: jak nazywa się ta aplikacja, którą masz na telefonie do…? Z jakiego programu do poczty korzystasz na tel…? itd…
Pytacie - więc macie 😃
DGT GTD  external link Bardzo przydatna lista TODO. Stworzona z myślą o metodzie Getting Things Done i bardzo ułatwia pamiętanie u różnych zadaniach. Posiada też bardzo wygodny widżet, na którym możemy podglądnąć nasze najbliższe zadania.
Opera Mini  external link Wbudowana przeglądarka jest niezła, ale Opera Mini kompresuje mocno strony wykorzystując pośredniczące serwery proxy co znacznie obniża koszty transmisji danych....</p></div><footer class=entry-footer><span title='2012-09-07 00:00:00 +0000 UTC'>2012-09-07</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Moje ulubione aplikacje na Android’a" href=https://gagor.pro/2012/09/moje-ulubione-aplikacje-na-androida/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Montowanie partycji z obrazu dysku</h2></header><div class=entry-content><p>Jedną z rzeczy, które podobają mi się w maszynach wirtualnych Xen jest możliwość zrobienia backupu całego obrazu i szybkie odzyskanie już w trakcie ciężkiej awarii. Gdy dodatkowo korzysta się z LVM’a to można na chwilę wyłączyć DomU, utworzyć snapshot jego dysków, uruchomić DomU i w trakcie działania robić spójny backup ze snapshot’a. Dzięki takiemu mechanizmowi serwer jest niedostępny przez kilkanaście sekund, a backup spójny jakby został wykonany przy całkowicie wyłączonej maszynie....</p></div><footer class=entry-footer><span title='2012-09-06 00:00:00 +0000 UTC'>2012-09-06</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Montowanie partycji z obrazu dysku" href=https://gagor.pro/2012/09/montowanie-partycji-z-obrazu-dysku/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Przeszukiwanie plików danego typu pod kątem tekstu</h2></header><div class=entry-content><p>Kiedyś poproszono mnie o przeszukanie wszystkich plików php na serwerze webowym po kątem wywołania pewnej funkcji. Oczywiste wydało mi się użycie rekurencyjnie grep’a, więc:
grep -R "JAKAS_FUNKCJA" /var/www/*.php Ale szybko okazało się że grep dopasowuje maskę *.php również do katalogów, więc nie przeszukiwał katalogów które nie kończyły się na .php ehhh…..
Drugie podejście okazało się trafniejsze - najpierw poleceniem find wyszukuję wszystkie pliki php, a dopiero później grepuję (wypisując nazwę pliku i numer linii):...</p></div><footer class=entry-footer><span title='2012-08-31 00:00:00 +0000 UTC'>2012-08-31</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Przeszukiwanie plików danego typu pod kątem tekstu" href=https://gagor.pro/2012/08/przeszukiwanie-plikow-danego-typu-pod-katem-tekstu/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Nginx - konfiguracja pod WordPress’a</h2></header><div class=entry-content><p>To raczej nie jest podstawowy konfig i próżno szukać go na stronie WordPress’a, więc odradzam tę zabawę jeśli nie zna się zbyt dobrze nginx’a.
Ponieważ serwerek, na którym działa stronka to sprzęcik z Atomem 330 i mocy na CPU zbyt wiele nie ma to popularne pluginy (np. W3 Total Cache) potencjalnie zwiększające wydajność tak na prawdę zmulały stronkę jeszcze bardziej. Pluginów sprawdziłem kilka i każdorazowo efekt był podobny - stronka działała wolniej niż bez ich pomocy....</p></div><footer class=entry-footer><span title='2012-06-29 00:00:00 +0000 UTC'>2012-06-29</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Nginx - konfiguracja pod WordPress’a" href=https://gagor.pro/2012/06/nginx-konfiguracja-pod-wordpressa/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Xen - Podstawowe polecenia</h2></header><div class=entry-content><p>Pisałem już HOWTO o konfiguracji Xen’a ale nie opisałem jak się bawić wirtualkami gdy Xen’a już mamy. To nadrabiam.
Tworzenie i usuwanie maszyn wirtualnych Do tworzenia/niszczenia DomU wykorzystuję pakiet xen-tools dostarczający m.in. dwa narzędzia:
xen-create - dla którego przygotowałem dość skomplikowaną konfigurację przy okazji wcześniejszego posta: Instalacja i konfiguracja DomU  external link . Przykład użycia: xen-create --hostname example-domu --ip 10.0.0.77 \ --gateway 10.0.0.1 --broadcast 10.0.0.255 --netmask 255.255.255.0 \ --bridge br10 --vcpus 2 --memory=2G xen-delete-image - narzędzie do kasowania wirtualnych maszyn....</p></div><footer class=entry-footer><span title='2012-06-19 00:00:00 +0000 UTC'>2012-06-19</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Xen - Podstawowe polecenia" href=https://gagor.pro/2012/06/xen-podstawowe-polecenia/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Nginx - ustawienie domyślnego vhosta</h2></header><div class=entry-content><p>Ustawienie domyślnego vhosta w nginx’ie jest ładnie opisane w dokumentacji i początkowo wydawało się dobrze działać ale gdy wykorzystałem tą konfigurację na serwerze z wieloma adresami IP i nasłuchiwaniem na porcie 80 (bez podania IP) to zachowywało się to dość dziwnie (przeważnie nie ładowało tej strony którą chciałem). Od teraz tworzę konfigurację domyślnego vhosta dla każdego z dostępnych adresów IP. Powiem szczerze że nie miałem czasu na głębsze zbadanie tego zachowania i wykorzystałem rozwiązanie, które działało w każdym przypadku czyli po jednym konfigu na IP + przekierowanie na ogólną stronę....</p></div><footer class=entry-footer><span title='2012-06-18 00:00:00 +0000 UTC'>2012-06-18</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Nginx - ustawienie domyślnego vhosta" href=https://gagor.pro/2012/06/nginx-ustawienie-domyslnego-vhosta/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Xen - Konfiguracja interfejsu sieciowego Dom0 jako brdige’a dla VLAN’ów</h2></header><div class=entry-content><p>VLAN’y są prostą metodą na separację sieci. Gdy mamy wiele sieci może zajść potrzeba by poszczególne DomU miały dostęp do różnych VLAN’ów (czasem nawet wielu równocześnie). Jeżeli serwer z Dom0 posiada minimum giga-bitową kartę sieciową (a najlepiej kilka) to powinniśmy być w stanie z godziwą jakością udostępnić systemom DomU różne VLAN’y z interfejsów gospodarza.
Zaprezentowane poniżej skrypty zapożyczyłem z tej strony: http://renial.net/weblog/2007/02/27/xen-vlan  external link Na początek musimy zainstalować pakiet vlan:...</p></div><footer class=entry-footer><span title='2012-06-18 00:00:00 +0000 UTC'>2012-06-18</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Xen - Konfiguracja interfejsu sieciowego Dom0 jako brdige’a dla VLAN’ów" href=https://gagor.pro/2012/06/xen-konfiguracja-interfejsu-sieciowego-dom0-jako-brdigea-dla-roznych-vlanow/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Apache - reverse proxy z cache’owaniem</h2></header><div class=entry-content><p>Ostatnio trafiłem na ciekawy problem, który wielokrotnie rozwiązywałem w nginx’ie ale tym razem musiałem zrobić to w Apache. Pewna stronka działa sobie na HTTPS’ie i chciałem by wszystkie powiązane z nią pliki były serwowane z jej adresu szyfrowanym połączeniem by nie pojawiały się w przeglądarce monity że “część ruchu nie jest szyfrowana”. Tyle że część potrzebnych plików była już obecnie serwowana na innym serwerze (w innej domenie) poprzez HTTP.
Mogłem albo skopiować te pliki i wykombinować jakiś mechanizm synchronizujący albo wykorzystać proxy + cache....</p></div><footer class=entry-footer><span title='2012-06-17 00:00:00 +0000 UTC'>2012-06-17</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Apache - reverse proxy z cache’owaniem" href=https://gagor.pro/2012/06/apache-reverse-proxy-z-cacheowaniem/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>CouchDB - Instalacja i wstępna konfiguracja</h2></header><div class=entry-content><p>Gdy tworzymy pierwszą aplikację webową, która umożliwia upload plików przeważnie lądują one lokalnie w pewniej lokalizacji. Gdy druga aplikacja potrzebuje dostępu do tych plików wystarczy podać ścieżkę. Problemy zaczynają się gdy aplikacji jest kilka i rozmieszczonych na kilku serwerach. Można korzystać z sieciowych systemów plików ale to często nie jest zbyt wygodne - ciężko odpowiednio ustawić uprawnienia by pewne aplikacje miały dostęp do zapisu plików a inne nie, trzeba skonfigurować dany katalog w kilku miejscach w konfiguracji serwera WWW aby serwować pliki itp…...</p></div><footer class=entry-footer><span title='2012-06-08 00:00:00 +0000 UTC'>2012-06-08</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to CouchDB - Instalacja i wstępna konfiguracja" href=https://gagor.pro/2012/06/couchdb-instalacja-i-wstepna-konfiguracja/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/page/17/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/page/19/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2024</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>