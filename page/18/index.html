<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tom's Blog | Notes on Linux, Containers, Coding, and Open-Source</title><meta name=keywords content="Blog,Technical,Automation,DevOps,Books,Linux,Leadership"><meta name=description content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><meta name=author content="Tom"><link rel=canonical href=https://gagor.pro/><link crossorigin=anonymous href=/assets/css/stylesheet.dd9b399756d51cbc22dd492f8bc5e6baa73d268548ef7584ed5740fe95fdcbce.css integrity="sha256-3Zs5l1bVHLwi3Ukvi8Xmuqc9JoVI73WE7VdA/pX9y84=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://gagor.pro/index.xml><link rel=alternate type=application/json href=https://gagor.pro/index.json><link rel=alternate type=text/redirects href=https://gagor.pro/_redirects><link rel=alternate type=text/llms href=https://gagor.pro/llms.txt><link rel=alternate hreflang=en href=https://gagor.pro/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta name=fediverse:creator content="@tgagor@mastodon.social"><link rel=me href=https://mastodon.social/@tgagor><meta property="og:url" content="https://gagor.pro/"><meta property="og:site_name" content="Tom's Blog"><meta property="og:title" content="Tom's Blog"><meta property="og:description" content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tom's Blog"><meta name=twitter:description content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Tom's Blog","url":"https://gagor.pro/","description":"DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros.","logo":"https://gagor.pro/favicon.ico","sameAs":["https://github.com/tgagor","https://www.linkedin.com/in/tgagor","https://mastodon.social/@tgagor","https://bsky.app/profile/gagor.pro","https://buymeacoffee.com/tgagor","https://ko-fi.com/tgagor","index.xml"]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.avif alt="Page logo" aria-label=logo height=36 width=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Linux - naprawianie bad sectorÃ³w</h2></header><div class=entry-content><p>Dyski siÄ™ zuÅ¼ywajÄ… i w koÅ„cu wczeÅ›niej czy pÃ³Åºniej pojawiajÄ… siÄ™ na nich bad sectory. Jeden z moich dyskÃ³w ciut siÄ™ posypaÅ‚ a Å¼e sÅ‚uÅ¼y wyÅ‚Ä…cznie do backupÃ³w to mogÄ™ z tym Å¼yÄ‡. Ale z drugiej strony jeÅ¼eli juÅ¼ bÄ™dÄ™ musiaÅ‚ siÄ™gnÄ…Ä‡ do backupÃ³w to chcÄ™ mieÄ‡ pewnoÅ›Ä‡ Å¼e coÅ› odzyskam, dlatego postanowiÅ‚em zrobiÄ‡ kilka testÃ³w. Nawet jeÅ›li nie naprawi to sektorÃ³w to przynajmniej zostanÄ… zaznaczone jako uszkodzone i realokowane.
...</p></div><footer class=entry-footer><span title='2012-12-27 00:00:00 +0000 UTC'>2012-12-27</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Linux - naprawianie bad sectorÃ³w" href=https://gagor.pro/2012/12/linux-naprawianie-bad-sectorow/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Piwik: Å›ledzenie asynchroniczne + logowanie ksywy komentujÄ…cego w WordPress'ie</h2></header><div class=entry-content><p>Korzystam z instancji Piwikâ€™a do monitorowania odwiedzin na stronie i postanowiÅ‚em pokombinowaÄ‡ czy da siÄ™ w ten sposÃ³b monitorowaÄ‡ wejÅ›cia konkretnych osÃ³b na bazie wpisanego w polu komentarza loginu/ksywki. Jak zaczÄ…Å‚em grzebaÄ‡ to przy okazji zmieniÅ‚em teÅ¼ sposÃ³b Å‚adowania skryptÃ³w Piwika na asynchroniczny.
A leci to mniej wiÄ™cej tak:
&lt;script type="text/javascript"> var i,x,y,ARRcookies=document.cookie.split(";"); var comment_author = ""; for (i=0;i&lt;ARRcookies.length;i++) { x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")); y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1); x=x.replace(/^\s+|\s+$/g,""); if (x.indexOf("comment_author") != -1 && x.indexOf("comment_author_email") == -1 && x.indexOf("comment_author_url") == -1) { comment_author = unescape(y); } } var _paq = _paq || []; (function(){ var u=(("https:" == document.location.protocol) ? "https://url.instancji.piwika.pl/" : "http://url.instancji.piwika.pl/"); _paq.push(['setSiteId', 1]); _paq.push(['setTrackerUrl', u+'piwik.php']); _paq.push(['setCustomVariable','1','Author', comment_author]); _paq.push(['trackPageView']); _paq.push(['enableLinkTracking']); var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript'; g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s); })(); &lt;/script> Å¹rÃ³dÅ‚o http://piwik.org/docs/javascript-tracking/#toc-asynchronous-trackingâ€‰ external link http://codex.wordpress.org/WordPress_Cookies#Commentersâ€‰ external link</p></div><footer class=entry-footer><span title='2012-12-21 00:00:00 +0000 UTC'>2012-12-21</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Piwik: Å›ledzenie asynchroniczne + logowanie ksywy komentujÄ…cego w WordPress'ie" href=https://gagor.pro/2012/12/piwik-sledzenie-asynchroniczne-logowanie-ksywy-komentujacego-w-wordpressie/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Jak dokuczaÄ‡ spamerom</h2></header><div class=entry-content><p>Dawno, dawno temuâ€¦ Za gÃ³rami, za lasamiâ€¦ czytaÅ‚em sobie tekst Lematâ€™a o dokuczaniu spamerom i pomyÅ›laÅ‚em Å¼e sam teÅ¼ tak mogÄ™ i nawet chcÄ™ wiÄ™c popeÅ‚niÅ‚em skrypcik, ktÃ³ry dla losowych sÅ‚Ã³w generowaÅ‚ maile. Skrypcik dziaÅ‚aÅ‚ z dwa lata na mojej poprzedniej stronie i nie raz zdarzyÅ‚o siÄ™ tam jakiejÅ› mendzie zapÄ™tliÄ‡. JakoÅ› nie miaÅ‚em czasu od razu, a pÃ³Åºniej zapomniaÅ‚em wrzuciÄ‡ go na nowÄ… stronie i tak zostaÅ‚o - na pewien czas.
...</p></div><footer class=entry-footer><span title='2012-12-18 00:00:00 +0000 UTC'>2012-12-18</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Jak dokuczaÄ‡ spamerom" href=https://gagor.pro/2012/12/jak-dokuczac-spamerom/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Nginx - kompresowanie plikÃ³w dla gzip_static</h2></header><div class=entry-content><p>Ruski serwer WWWâ€‰ external link ma przydatnÄ… funkcjÄ™ serwowania wersji plikÃ³w skompresowanych gzipâ€™em - przez co moÅ¼emy plik skompresowaÄ‡ raz i bÄ™dzie on serwowany klientom obsÅ‚ugujÄ…cym kompresjÄ™ HTTP ale juÅ¼ bez kaÅ¼dorazowego kompresowania go. Jest to bardzo przydatne na stronach z duÅ¼ym ruchem gdzie moÅ¼na w ten sposÃ³b zaoszczÄ™dziÄ‡ takty CPU na wÅ‚aÅ›ciwÄ… obsÅ‚ugÄ™ poÅ‚Ä…czeÅ„ a nie kompresjÄ™. Drugie miejsce gdzie moÅ¼e to byÄ‡ przydatne to VPSâ€™y i â€œcienkieâ€ serwery, ktÃ³re na kompresji przy wiÄ™kszymÂ obciÄ…Å¼eniuÂ spÄ™dzajÄ… zbyt duÅ¼o czasu i daje siÄ™ to odczuÄ‡ w dziaÅ‚aniu strony. A Å¼e obecnie standardem jest Å‚adowanie przez stronki np. jQuery, paru pluginÃ³w do niego, jQueryUI, masy CSSâ€™Ã³w, itd - to na prawdÄ™ jest co kompresowaÄ‡ ğŸ˜ƒ
...</p></div><footer class=entry-footer><span title='2012-12-17 00:00:00 +0000 UTC'>2012-12-17</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Nginx - kompresowanie plikÃ³w dla gzip_static" href=https://gagor.pro/2012/12/nginx-kompresowanie-plikow-dla-gzip_static/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Apache: mod_authnz_ldap z Active Directory</h2></header><div class=entry-content><p>Gdy juÅ¼ siÄ™ dorobi systemu Active Directory wygodnie jest wykorzystaÄ‡ jego bazÄ™ uÅ¼ytkownikÃ³w do autoryzacji w rÃ³Å¼nych miejscach, np. do pewnych â€œtajnych i tajniejszychâ€ stron w Apache. NajproÅ›ciej moÅ¼na to zrobiÄ‡ z wykorzystaniem LDAP.
Warto sprawdziÄ‡ czy i jak moÅ¼emy dostaÄ‡ siÄ™ do kontrolerÃ³w. Gdy juÅ¼ mamy wszystkie potrzebne parametry konfigurujemy Apachego - na poczÄ…tek aktywujemy moduÅ‚y:
a2enmod ldap a2enmod authnz_ldap Teraz moÅ¼emy edytujemy globalny plik konfiguracyjny mod_ldapâ€™a by ustawiÄ‡ nieco cacheâ€™y (bardzo przydatne). WartoÅ›ci moÅ¼na dostosowaÄ‡ do potrzeb ale przykÅ‚adowe powinny wystarczyÄ‡ na poczÄ…tku:
...</p></div><footer class=entry-footer><span title='2012-12-14 00:00:00 +0000 UTC'>2012-12-14</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Apache: mod_authnz_ldap z Active Directory" href=https://gagor.pro/2012/12/apache-mod_authnz_ldap-z-active-directory/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Python - wysyÅ‚anie maili w unicode</h2></header><div class=entry-content><p>ChciaÅ‚em wysÅ‚aÄ‡ z Pythonâ€™a maila z krzakami tab by Å‚adnie siÄ™ wyÅ›wietlaÅ‚y i okazaÅ‚o siÄ™ to caÅ‚kiem nietrywialne.
Na szczÄ™Å›cie googiel podpowiedziaÅ‚ mi doskonaÅ‚ego gotowca, ktÃ³rego zamierzam zapisaÄ‡ by mi nie zginÄ…Å‚:
#!/usr/bin/env python # -*- coding: utf-8 -*- import smtplib from email.mime.text import MIMEText from email.Header import Header from email.Utils import parseaddr, formataddr def send_email(sender, recipient, subject, body): """Send an email. All arguments should be Unicode strings (plain ASCII works as well). Only the real name part of sender and recipient addresses may contain non-ASCII characters. The email will be properly MIME encoded and delivered though SMTP to localhost port 25. This is easy to change if you want something different. The charset of the email will be the first one out of US-ASCII, ISO-8859-1 and UTF-8 that can represent all the characters occurring in the email. """ # Header class is smart enough to try US-ASCII, then the charset we # provide, then fall back to UTF-8. header_charset = 'ISO-8859-2' # We must choose the body charset manually for body_charset in 'US-ASCII', 'UTF-8', 'ISO-8859-2': try: body.encode(body_charset) except UnicodeError: pass else: break # Split real name (which is optional) and email address parts sender_name, sender_addr = parseaddr(sender) recipient_name, recipient_addr = parseaddr(recipient) # We must always pass Unicode strings to Header, otherwise it will # use RFC 2047 encoding even on plain ASCII strings. sender_name = str(Header(unicode(sender_name), header_charset)) recipient_name = str(Header(unicode(recipient_name), header_charset)) # Make sure email addresses do not contain non-ASCII characters sender_addr = sender_addr.encode('ascii') recipient_addr = recipient_addr.encode('ascii') # Create the message ('plain' stands for Content-Type: text/plain) msg = MIMEText(body.encode(body_charset), 'plain', body_charset) msg['From'] = formataddr((sender_name, sender_addr)) msg['To'] = formataddr((recipient_name, recipient_addr)) msg['Subject'] = Header(unicode(subject), header_charset) # Send the message via SMTP to localhost:25 smtp = smtplib.SMTP("localhost") smtp.sendmail(sender, recipient, msg.as_string()) smtp.quit() Wykorzystanie:
...</p></div><footer class=entry-footer><span title='2012-12-10 00:00:00 +0000 UTC'>2012-12-10</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Python - wysyÅ‚anie maili w unicode" href=https://gagor.pro/2012/12/python-wysylanie-maili-w-unicode/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>ldapsearch w Active Directory</h2></header><div class=entry-content><p>MoÅ¼na lubieÄ‡ AD, moÅ¼na go nie lubieÄ‡â€¦ Ale jak juÅ¼ siÄ™ ma to warto czasem zintegrowaÄ‡ go z tymâ€¦ i tamtymâ€¦ Od strony Linuksa najwygodniej moÅ¼na to osiÄ…gnÄ…Ä‡ przez LDAP. A Å¼eby to dobrze zrobiÄ‡ trzeba najpierw przetestowaÄ‡ czy aby wszystko dziaÅ‚a jak byÅ›my sobie tego Å¼yczyli. I tutaj bardzo przydatne jest narzÄ™dzie ldapsearch.
Do odpytywania LDAPâ€™a potrzebujemy jeden pakiecik, ktÃ³ry zawiera kilka narzÄ™dzi do jego obsÅ‚ugi:
apt-get install ldap-utils Teraz moÅ¼emy prÃ³bowaÄ‡ przeszukiwaÄ‡ katalog np. tak:
...</p></div><footer class=entry-footer><span title='2012-12-05 00:00:00 +0000 UTC'>2012-12-05</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to ldapsearch w Active Directory" href=https://gagor.pro/2012/12/ldapsearch-w-active-directory/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Ciastka z kleiku ryÅ¼owego</h2></header><div class=entry-content><p>SkÅ‚adniki 1 paczka bezsmakowego kleiku ryÅ¼owego (190~170 g), 2 jajka, 1 kostka miÄ™kkiego masÅ‚a (250 g), 1 pÅ‚aska Å‚yÅ¼eczka proszku do pieczenia, pÃ³Å‚ szklanki cukru, cukier waniliowy (16 g) (niekoniecznie), 8 czubatych Å‚yÅ¼ek wiÃ³rkÃ³w kokosowych, dÅ¼em do wypeÅ‚nienia ciastek (opcjonalnie - ja lubiÄ™ je rÃ³wnieÅ¼ bez dÅ¼emu). SposÃ³b przygotowania Wszystkie skÅ‚adniki poÅ‚Ä…czyÄ‡ razem i wyrobiÄ‡ (najlepiej siÄ™ ugniata rÄ™kÄ…). FormowaÄ‡ kulki wielkoÅ›ci maÅ‚ego orzecha wÅ‚oskiego, ukÅ‚adaÄ‡ na blaszce wyÅ‚oÅ¼onej papierem do pieczenia w niewielkich odlegÅ‚oÅ›ciach (trochÄ™ urosnÄ…). JeÅ¼eli planujemy opcjÄ™ z dÅ¼emem to w kaÅ¼dej kulce naleÅ¼y zrobiÄ‡ wgÅ‚Ä™bienie - ja lekko przyciskaÅ‚em palcem. Piec w temperaturze 180ÂºC przez 15~20 minut, aÅ¼ zrobiÄ… siÄ™ zÅ‚ociste. Po ostudzeniu wgÅ‚Ä™bienia napeÅ‚niÄ‡ dÅ¼emem.
...</p></div><footer class=entry-footer><span title='2012-11-20 00:00:00 +0000 UTC'>2012-11-20</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Ciastka z kleiku ryÅ¼owego" href=https://gagor.pro/2012/11/ciastka-z-kleiku-ryzowego/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Ciasto z dyniÄ…</h2></header><div class=entry-content><p>SkÅ‚adniki 2 szklanki miÄ…Å¼szu dyni (startego lub zmiksowanego), 2 szklanki mÄ…ki, 0,75 szklanki cukru, 3 jajka, 5 Å‚yÅ¼eczek cynamonu, 16 g cukru wanilinowego, 0,75 szklanki oleju, Å‚yÅ¼eczka sody oczyszczonej, garÅ›Ä‡ orzechÃ³w wÅ‚oskich. SposÃ³b przygotowania Ubijamy biaÅ‚ka z cukrem. Do ubitej piany dodajemy Å¼Ã³Å‚tka i kolejne skÅ‚adniki: mÄ…kÄ™, olej, cukier wanilinowy, sodÄ™ i cynamon. CaÅ‚oÅ›Ä‡ miksujemy jeszcze przez chwilÄ™, a nastÄ™pnie dodajemy posiekany lub starty i odsÄ…czony (moÅ¼na np. mocno Å›cisnÄ…Ä‡ w dÅ‚oniach)Â miÄ…Å¼sz dyniÂ oraz drobno pokrojoneÂ orzechy wÅ‚oskie i jeszcze chwilÄ™ mieszamy.
...</p></div><footer class=entry-footer><span title='2012-11-12 00:00:00 +0000 UTC'>2012-11-12</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Ciasto z dyniÄ…" href=https://gagor.pro/2012/11/ciasto-z-dynia/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Automatically compact CouchDB databases in version 0.11.x</h2></header><div class=entry-content><p>CouchDB databases on version 0.11.x swell very fast. They should be compacted daily for best performance and space usage. Here is my script that could be run in cron and will compact all databases:
#!/bin/bash IP="10.0.0.121" DBS=`curl -sS -X GET http://$IP:5984/_all_dbs | sed -r "s/([,\"[])|(\])+/ /g"` for d in $DBS; do curl -H "Content-Type: application/json" -X POST http://$IP:5984/$d/_compact done More informations about compacting could be found hereâ€‰ external link (also for version 1.2.x).</p></div><footer class=entry-footer><span title='2012-11-08 00:00:00 +0000 UTC'>2012-11-08</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;Tom</footer><a class=entry-link aria-label="post link to Automatically compact CouchDB databases in version 0.11.x" href=https://gagor.pro/2012/11/automatically-compact-couchdb-databases-in-0-11-x/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/page/17/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/page/19/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2025</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=https://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8d51d5292abd4c77bad90db038659671"}'></script><script defer src=https://analytics.ahrefs.com/analytics.js data-key=ngiuUolR4+T0MnN5eV7I/A async></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>