<!doctype html><html lang=en dir=auto data-theme=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tom's Blog | Notes on Linux, Containers, Coding, and Open-Source</title><meta name=keywords content="Blog,Technical,Automation,DevOps,Books,Linux,Leadership"><meta name=description content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><meta name=author content="Tom"><link rel=canonical href=https://gagor.pro/><link crossorigin=anonymous href=/assets/css/stylesheet.0a47103c6d620a969f4fbb4861cd263b8f3ec81cd39b309f4acb0075dc6dc87a.css integrity="sha256-CkcQPG1iCpafT7tIYc0mO48+yBzTmzCfSssAddxtyHo=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://gagor.pro/index.xml title=rss><link rel=alternate type=application/json href=https://gagor.pro/index.json title=json><link rel=alternate type=text/redirects href=https://gagor.pro/_redirects title=_redirects><link rel=alternate type=text/llms href=https://gagor.pro/llms.txt title=llms><link rel=alternate hreflang=en href=https://gagor.pro/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>localStorage.getItem("pref-theme")==="light"&&(document.querySelector("html").dataset.theme="light")</script><link rel=webmention href=https://webmention.io/gagor.pro/webmention><link rel=pingback href=https://webmention.io/gagor.pro/xmlrpc><meta name=fediverse:creator content="@tgagor@mastodon.social"><link rel=me href=https://mastodon.social/@tgagor><meta property="og:url" content="https://gagor.pro/"><meta property="og:site_name" content="Tom's Blog"><meta property="og:title" content="Tom's Blog"><meta property="og:description" content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tom's Blog"><meta name=twitter:description content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Tom's Blog","url":"https://gagor.pro/","description":"DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros.","logo":"https://gagor.pro/favicon.ico","sameAs":["https://github.com/tgagor","https://www.linkedin.com/in/tgagor","https://mastodon.social/@tgagor","https://bsky.app/profile/gagor.pro","https://buymeacoffee.com/tgagor","https://ko-fi.com/tgagor","index.xml"]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.avif alt="Page logo" aria-label=logo height=36 width=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Apache - Force caching dynamic PHP content with mod_headers</h2></header><div class=entry-content><p>Normally you want dynamic content to be fresh and not cacheable. But sometimes it may be useful to cache it, like when you have website behind reverse proxy1. To do this try something like this:
Add new Apache conf file &lt;filesmatch "\.(php|cgi|pl)$"> Header unset Pragma Header unset Expires Header set Cache-Control "max-age=3600, public" &lt;/filesmatch> http://www.askapache.com/htaccess/speed-up-your-site-with-caching-and-cache-control.htmlâ€‰ external link Â â†©ï¸Ž
...</p></div><footer class=entry-footer><span title='2015-12-29 00:00:00 +0000 UTC' class=dt-published>2015-12-29</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Apache - Force caching dynamic PHP content with mod_headers" href=https://gagor.pro/2015/12/apache-force-caching-dynamic-php-content-with-mod_headers/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>MySQL - reset root password</h2></header><div class=entry-content><p>It will happen from time to time, that youâ€™re on alien machine and have to brutally update things in db without knowing credentials. Example is for root (quite secure candidate to change because it shouldnâ€™t be used in app ðŸ˜ƒ ) but will work for any user.
shutdown db service mysql stop create text file with command like this (update user accordingly) ex. in /tmp/pwchange.txt SET PASSWORD FOR "root"@"localhost" = PASSWORD("HereYourNewPassword"); start mysqld with --init-file param mysqld_safe --init-file=/tmp/pwchange.txt sometimes you may require to point configuration file ex. --defaults-file=/etc/mysql/my.cnf
...</p></div><footer class=entry-footer><span title='2015-12-28 00:00:00 +0000 UTC' class=dt-published>2015-12-28</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to MySQL - reset root password" href=https://gagor.pro/2015/12/mysql-reset-root-password/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Rotate movies</h2></header><div class=entry-content><p>I hate movies recorded on phone in vertical position. This just short tip how I dealt with with it last time:
for m in *.mp4 do avconv -i $m -vf "transpose=1" -codec:a copy -codec:v libx264 -preset slow -crf 23 rotated-$m done Other examples:
http://stackoverflow.com/questions/3937387/rotating-videos-with-ffmpegâ€‰ external link http://superuser.com/questions/578321/how-to-flip-a-video-180â€‰ external link Â°-vertical-upside-down-with-ffmpeg</p></div><footer class=entry-footer><span title='2015-12-28 00:00:00 +0000 UTC' class=dt-published>2015-12-28</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Rotate movies" href=https://gagor.pro/2015/12/rotate-movies/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Extract password saved in Remmina</h2></header><div class=entry-content><p>I had some passwords saved in remmina but like it always happen, I wasnâ€™t been able to remember them when needed. Trying to restore them I found that theyâ€™re encrypted in .remmina directory.
Then I used this script to decrypt them 1:
Extract script import base64 from Crypto.Cipher import DES3 secret = base64.decodestring("&lt;STRING FROM remmina.prefs>") password = base64.decodestring("&lt;STRING FROM XXXXXXX.remmina>") print DES3.new(secret[:24], DES3.MODE_CBC, secret[24:]).decrypt(password) http://askubuntu.com/questions/290824/how-to-extract-saved-password-from-remminaâ€‰ external link Â â†©ï¸Ž
...</p></div><footer class=entry-footer><span title='2015-12-25 00:00:00 +0000 UTC' class=dt-published>2015-12-25</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Extract password saved in Remmina" href=https://gagor.pro/2015/12/extract-password-saved-in-remmina/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Iâ€™m back</h2></header><div class=entry-content><p>After long break Iâ€™m thinking about writing more on my blog. I was reviewing my favorites/bookmarks and half of them was broken, so I canâ€™t rely on them in case of knowledge management.
I think I will write shorter, less descriptive articles just to be pointers to useful solutions from past.</p></div><footer class=entry-footer><span title='2015-12-25 00:00:00 +0000 UTC' class=dt-published>2015-12-25</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Iâ€™m back" href=https://gagor.pro/2015/12/im-back/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Apache AuthBasic but excluding IP</h2></header><div class=entry-content><p>Allow from IP without password prompt, and also allow from any address with password prompt
Order deny,allow Deny from all AuthName "htaccess password prompt" AuthUserFile /web/askapache.com/.htpasswd AuthType Basic Require valid-user Allow from 172.17.10.1 Satisfy Any Sources http://www.askapache.com/htaccess/apache-authentication-in-htaccess.htmlâ€‰ external link</p></div><footer class=entry-footer><span title='2015-12-23 00:00:00 +0000 UTC' class=dt-published>2015-12-23</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Apache AuthBasic but excluding IP" href=https://gagor.pro/2015/12/apache-authbasic-but-excluding-ip/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Copy GTP partiotion table between disks</h2></header><div class=entry-content><p>When configuring RAID itâ€™s quite important to have the same partition tables on every disk. Iâ€™v done this many times on msdos partition tables like this:
sfdisk -d /dev/sda | sfdisk /dev/sdb but itâ€™s not working any more on GPT partition tables. Hopefully it still can be done but with different toolstack ðŸ˜„
Install gdisk:
apt-get install -y gdisk Then use sgdisk like this:
sgdisk -R /dev/sd_dest /dev/sd_src sgdisk -G /dev/sd_dest First command will copy partition from /dev/sd_src to /dev/sd_dest. Second will randomize partition UUIDâ€™s - needed only if you want to use disks in same machine (this is my case).</p></div><footer class=entry-footer><span title='2014-07-28 00:00:00 +0000 UTC' class=dt-published>2014-07-28</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Copy GTP partiotion table between disks" href=https://gagor.pro/2014/07/copy-gtp-partiotion-table-between-disks/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Quickly setup SQL query logging on console in Django</h2></header><div class=entry-content><p>There is need plugin for Django, named django-debug-toolbar but it needs some time to configure. So when I need simple way to debug SQL queries I use small hack. Add to your settings.py:
LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'handlers': { 'console': { 'level': 'DEBUG', 'class': 'logging.StreamHandler', } }, 'loggers': { 'django.db.backends': { 'handlers': ['console'], 'level': 'DEBUG', }, } } To get this working DEBUG option have to be set to True:
...</p></div><footer class=entry-footer><span title='2014-05-28 00:00:00 +0000 UTC' class=dt-published>2014-05-28</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Quickly setup SQL query logging on console in Django" href=https://gagor.pro/2014/05/quickly-setup-sql-query-logging-on-console-in-django/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Changing default php.ini file for PHP-CLI on CentOS</h2></header><div class=entry-content><p>On Debian in default installation you have different configuration files for PHP in Apache, FPM, CLI, etc. But on CentOS you have only one php.ini for all of them. In case I have, I need to have different configuration file for scripts running in CLI mode (more memory, etc). I could run it like this:
php -c /etc/php-cli.ini script.php But this a little burdensome. So I do it like this:
...</p></div><footer class=entry-footer><span title='2014-05-08 00:00:00 +0000 UTC' class=dt-published>2014-05-08</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Changing default php.ini file for PHP-CLI on CentOS" href=https://gagor.pro/2014/05/changing-default-php-ini-file-for-php-cli-on-centos/></a></article><article class=post-entry><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Command to change root password</h2></header><div class=entry-content><p>Everybody knows passwd command but itâ€™s useless when you need to change ex. root password from command line without waiting for input. In such case oneliner below could help:
echo "root:new_password" | chpasswd</p></div><footer class=entry-footer><span title='2014-05-08 00:00:00 +0000 UTC' class=dt-published>2014-05-08</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Command to change root password" href=https://gagor.pro/2014/05/command-to-change-root-password/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/page/11/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/page/13/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2026</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=https://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8d51d5292abd4c77bad90db038659671"}'></script><script defer src=https://analytics.ahrefs.com/analytics.js data-key=ngiuUolR4+T0MnN5eV7I/A async></script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>