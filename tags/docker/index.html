<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker | timor's site</title><meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: docker"><meta name=author content><link rel=canonical href=https://timor.site/tags/docker/><link crossorigin=anonymous href=/assets/css/stylesheet.3463bda35fd55b9ad6187f681d9b6a97123e084572ffc8e144d794f0d2a914df.css integrity="sha256-NGO9o1/VW5rWGH9oHZtqlxI+CEVy/8jhRNeU8NKpFN8=" rel="preload stylesheet" as=style><link rel=icon href=https://timor.site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://timor.site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://timor.site/favicon-32x32.png><link rel=apple-touch-icon href=https://timor.site/apple-touch-icon.png><link rel=mask-icon href=https://timor.site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://timor.site/tags/docker/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-88996819-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Docker"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:type" content="website"><meta property="og:url" content="https://timor.site/tags/docker/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Docker"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://timor.site/ accesskey=h title="timor's site (Alt + H)"><img src=https://timor.site/favicon-72x72.png alt aria-label=logo height=36>timor's site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://timor.site/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://timor.site/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://timor.site/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://timor.site/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://timor.site/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://timor.site/>Home</a>&nbsp;»&nbsp;<a href=https://timor.site/tags/>Tags</a></div><h1>Docker</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2022/09/use-dockerignore/images/cover_hu18d61db5c523e8359100d3d76cd9f53e_206460_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2022/09/use-dockerignore/images/cover_hu18d61db5c523e8359100d3d76cd9f53e_206460_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2022/09/use-dockerignore/images/cover_hu18d61db5c523e8359100d3d76cd9f53e_206460_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2022/09/use-dockerignore/images/cover_hu18d61db5c523e8359100d3d76cd9f53e_206460_1080x0_resize_q75_h2_box_2.webp 1080w ,https://timor.site/2022/09/use-dockerignore/images/cover_hu18d61db5c523e8359100d3d76cd9f53e_206460_1500x0_resize_q75_h2_box_2.webp 1500w ,https://timor.site/2022/09/use-dockerignore/images/cover.webp 1500w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2022/09/use-dockerignore/images/cover.webp alt="[Photo by Tom Fisk from Pexels](https://www.pexels.com/photo/birds-eye-view-photo-of-freight-containers-2226458/)" width=1500 height=625></figure><header class=entry-header><h2>Use .dockerignore</h2></header><div class=entry-content><p>People often complain, that building Docker image takes a long time but they’re just adding single jar package. Really?
They often don’t remember that whole “build context”1 is uploaded to Docker daemon during build, which often means they’re not only adding “single jar”, but also all sources, test results and whatever you have in your context directory.
Solution is simple - use .dockerignore file2 dropped in the directory where you build the image....</p></div><footer class=entry-footer><span title='2022-09-11 00:00:00 +0000 UTC'>2022-09-11</span>&nbsp;·&nbsp;1 min</footer><a class=entry-link aria-label="post link to Use .dockerignore" href=https://timor.site/2022/09/use-dockerignore/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover_hu0ab69187c094124bb263f017ad4aaa40_161004_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover_hu0ab69187c094124bb263f017ad4aaa40_161004_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover_hu0ab69187c094124bb263f017ad4aaa40_161004_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover_hu0ab69187c094124bb263f017ad4aaa40_161004_1080x0_resize_q75_h2_box_2.webp 1080w ,https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover_hu0ab69187c094124bb263f017ad4aaa40_161004_1500x0_resize_q75_h2_box_2.webp 1500w ,https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover.webp 1500w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/images/cover.webp alt="[Photo by Ghasiq Anjum from Pexels](https://www.pexels.com/photo/metal-trash-bin-on-the-side-of-the-street-12841982/)" width=1500 height=625></figure><header class=entry-header><h2>Use VOLUME for all mutable, temporary file locations</h2></header><div class=entry-content><p>IMO people don’t understand how VOLUME1 works so they don’t use it. It’s generally used far too rarely!
In short VOLUME means two things:
Whatever is left in directory marked as VOLUME, stays there and can’t be changed in later layers (actually it can be changed but changes won’t be persistent). Volumes are not part of layered image FS. They’re mounted as anonymous volumes located on standard file system. This means they’re working much faster....</p></div><footer class=entry-footer><span title='2022-09-11 00:00:00 +0000 UTC'>2022-09-11</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Use VOLUME for all mutable, temporary file locations" href=https://timor.site/2022/09/use-volume-for-all-mutable-temporary-file-locations/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover_huc89478d5200da2a816d861c536e63db4_254794_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover_huc89478d5200da2a816d861c536e63db4_254794_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover_huc89478d5200da2a816d861c536e63db4_254794_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover_huc89478d5200da2a816d861c536e63db4_254794_1080x0_resize_q75_h2_box_2.webp 1080w ,https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover_huc89478d5200da2a816d861c536e63db4_254794_1500x0_resize_q75_h2_box_2.webp 1500w ,https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover.webp 1500w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2022/09/dockerfile-writing-best-practices/images/cover.webp alt="[Photo by Tom Fisk from Pexels](https://www.pexels.com/photo/top-view-photography-of-cargo-ship-with-intermodal-containers-3057963/)" width=1500 height=625></figure><header class=entry-header><h2>Dockerfile writing best practices</h2></header><div class=entry-content><p>I’ve been thinking for a long time about writing set of articles on the topic of: “Dockerfile writing best practices”.
As it’s often my daily job to prepare best in class containers, that are later used by thousands of company’s applications, I have quite good insights on the topic. Some experience and knowledge gathered is often against intuition and building it took me a while. I want to share it, with a hope that feedback I get will allow me to excel on the topic even further....</p></div><footer class=entry-footer><span title='2022-09-10 00:00:00 +0000 UTC'>2022-09-10</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Dockerfile writing best practices" href=https://timor.site/2022/09/dockerfile-writing-best-practices/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2022/06/back-on-the-big-stage/cover_hu0ce7a386fc91f40cabb5fd5f2a93913d_212680_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2022/06/back-on-the-big-stage/cover_hu0ce7a386fc91f40cabb5fd5f2a93913d_212680_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2022/06/back-on-the-big-stage/cover_hu0ce7a386fc91f40cabb5fd5f2a93913d_212680_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2022/06/back-on-the-big-stage/cover_hu0ce7a386fc91f40cabb5fd5f2a93913d_212680_1080x0_resize_q75_h2_box_2.webp 1080w ,https://timor.site/2022/06/back-on-the-big-stage/cover_hu0ce7a386fc91f40cabb5fd5f2a93913d_212680_1500x0_resize_q75_h2_box_2.webp 1500w ,https://timor.site/2022/06/back-on-the-big-stage/cover.webp 1500w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2022/06/back-on-the-big-stage/cover.webp alt="Devoxx 2022" width=1500 height=625></figure><header class=entry-header><h2>Back on the big stage!</h2></header><div class=entry-content><p>I’m back on the big stage!
I haven’t attend any big conferences as presenter for some time, but this year will change it. I’m starting big, with a talk: Docker base images - Ideas how to manage them on scale on Devoxx conference in Kraków, that will take place on 22-24th June 2022.
Want to meet? Meet there 😄
Update I uploaded slides from presentation to my Github account.</p></div><footer class=entry-footer><span title='2022-06-13 00:00:00 +0000 UTC'>2022-06-13</span>&nbsp;·&nbsp;1 min</footer><a class=entry-link aria-label="post link to Back on the big stage!" href=https://timor.site/2022/06/back-on-the-big-stage/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/07/official-centos-8-stream-docker-image-finally-available/cover_hu3d03a01dcc18bc5be0e67db3d8d209a6_20663_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/07/official-centos-8-stream-docker-image-finally-available/cover_hu3d03a01dcc18bc5be0e67db3d8d209a6_20663_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/07/official-centos-8-stream-docker-image-finally-available/cover_hu3d03a01dcc18bc5be0e67db3d8d209a6_20663_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/07/official-centos-8-stream-docker-image-finally-available/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/07/official-centos-8-stream-docker-image-finally-available/cover.jpg alt width=720 height=300></figure><header class=entry-header><h2>Official CentOS 8 Stream Docker image finally available!</h2></header><div class=entry-content><p>Finally, they’re available! Wait a moment.. Actually they’re available for few months, just nobody published information about moving them to quay.io and dropped poor guys using hub.docker.com without any updates! Yes, that how they did!
I found new place accidentally, reading some news about CentOS Stream 9 on their blog. There was reference to CentOS 9 Stream dev builds of Docker images and I found “missing” stream and stream8 tags too....</p></div><footer class=entry-footer><span title='2021-07-25 00:00:00 +0000 UTC'>2021-07-25</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to Official CentOS 8 Stream Docker image finally available!" href=https://timor.site/2021/07/official-centos-8-stream-docker-image-finally-available/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/02/how-to-run-jmx-monitoring-in-docker-image/cover_hub1a5d4fec570ffc2647dd11090f902e8_34566_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/02/how-to-run-jmx-monitoring-in-docker-image/cover_hub1a5d4fec570ffc2647dd11090f902e8_34566_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/02/how-to-run-jmx-monitoring-in-docker-image/cover_hub1a5d4fec570ffc2647dd11090f902e8_34566_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/02/how-to-run-jmx-monitoring-in-docker-image/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/02/how-to-run-jmx-monitoring-in-docker-image/cover.jpg alt width=720 height=300></figure><header class=entry-header><h2>How to run JMX monitoring in Docker image?</h2></header><div class=entry-content><p>It’s sometimes useful to quickly connect to JMX console, to checkout what’s going on in your application, but the whole thing get’s tricky if you’re running your app in a container. I need it from time to time and I keep myself few times searching for set of params below:
~/2021/02/how-to-run-jmx-monitoring-in-docker-image/ java \ ... -Dcom.sun.management.jmxremote \ -Dcom.sun.management.jmxremote.rmi.port=${PORT1} \ -Dcom.sun.management.jmxremote.port=${PORT1} \ -Dcom.sun.management.jmxremote.local.only=false \ -Dcom.sun.management.jmxremote.authenticate=false \ -Dcom.sun.management.jmxremote.ssl=false \ -Djava.rmi.server.hostname=${HOST} The whole magic here is that PORT1 in container is app’s second port....</p></div><footer class=entry-footer><span title='2021-02-19 00:00:00 +0000 UTC'>2021-02-19</span>&nbsp;·&nbsp;1 min</footer><a class=entry-link aria-label="post link to How to run JMX monitoring in Docker image?" href=https://timor.site/2021/02/how-to-run-jmx-monitoring-in-docker-image/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/02/centos-8-stream-docker-image/cover_hu3d03a01dcc18bc5be0e67db3d8d209a6_80942_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/02/centos-8-stream-docker-image/cover_hu3d03a01dcc18bc5be0e67db3d8d209a6_80942_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/02/centos-8-stream-docker-image/cover_hu3d03a01dcc18bc5be0e67db3d8d209a6_80942_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/02/centos-8-stream-docker-image/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/02/centos-8-stream-docker-image/cover.jpg alt width=720 height=300></figure><header class=entry-header><h2>CentOS 8 Stream Docker image</h2></header><div class=entry-content><p>We’re all divided with recent decision to focus on CentOS Stream, which essentially means that stable, professional distro will turn into rolling release now. Also CentOS board members don’t gave us more confidence for the future.
I don’t want to be totally sceptic, I would like to test it on my own and only then, decide if it’s stable enough. But I work mostly with Docker containers and there are no official Docker images with Stream variant....</p></div><footer class=entry-footer><span title='2021-02-11 00:00:00 +0000 UTC'>2021-02-11</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to CentOS 8 Stream Docker image" href=https://timor.site/2021/02/centos-8-stream-docker-image/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/01/how-old-are-official-docker-images/cover_hu11a0c26c684c8cf367c9c648b06fa821_21194_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/01/how-old-are-official-docker-images/cover_hu11a0c26c684c8cf367c9c648b06fa821_21194_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/01/how-old-are-official-docker-images/cover_hu11a0c26c684c8cf367c9c648b06fa821_21194_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/01/how-old-are-official-docker-images/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/01/how-old-are-official-docker-images/cover.jpg alt width=720 height=300></figure><header class=entry-header><h2>How old are Official Docker images?</h2></header><div class=entry-content><p>TL;DR
CentOS base images sucks! They’re old, not updated for months!
As a professional DevOps I concern about a lot of things… but security is always close to the top of the list. With Docker build environments and deployments became much more stable, which often is a result of just being stale ;/
I’ve been talking about this for long time but it’s still hard for people to believe it....</p></div><footer class=entry-footer><span title='2021-01-28 00:00:00 +0000 UTC'>2021-01-28</span>&nbsp;·&nbsp;2 min</footer><a class=entry-link aria-label="post link to How old are Official Docker images?" href=https://timor.site/2021/01/how-old-are-official-docker-images/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Automatically build after file change</h2></header><div class=entry-content><p>I’m playing a lot with Docker lately. Building images, and then rebuilding, and then building again… It’s pretty boring. To automate this task a little I used inotify to build automatically after I changed any file. This trick could be used in many different situations.
You will need inotify-tools package:
sudo apt-get install -y inotify-tools Then run something like this:
while inotifywait -e modify -r .; do docker-compose build; done This commands will rebuild my Docker images after any file change in current directory....</p></div><footer class=entry-footer><span title='2016-02-23 00:00:00 +0000 UTC'>2016-02-23</span>&nbsp;·&nbsp;1 min</footer><a class=entry-link aria-label="post link to Automatically build after file change" href=https://timor.site/2016/02/automatically-build-after-file-change/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Install Docker Compose</h2></header><div class=entry-content><p>When I started playing with Docker I was running a lot of commands to build image, delete containers running on old image, run containers based on new image, etc… A lot of log commands with links, volumes, etc…
Then I started searching for something to automate this task and here I get to docker-compse command, this is how you may install it:
pip install docker-compose And install additional bash completions (run as root):...</p></div><footer class=entry-footer><span title='2016-02-12 00:00:00 +0000 UTC'>2016-02-12</span>&nbsp;·&nbsp;1 min</footer><a class=entry-link aria-label="post link to Install Docker Compose" href=https://timor.site/2016/02/install-docker-compose/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://timor.site/tags/docker/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span><a href=https://timor.site/>timor's site</a> &copy; 2008-2022</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>