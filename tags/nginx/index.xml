<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>nginx on Tom&#39;s Blog</title>
    <link>https://gagor.pl/tags/nginx/</link>
    <description>Recent content in nginx on Tom&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <copyright>Content licensed under &lt;a rel=&#34;license noopener noreferrer&#34; target=&#34;_blank&#34; href=&#34;http://creativecommons.org/licenses/by-sa/4.0/&#34;&gt;(CC BY-SA 4.0)&lt;/a&gt;
</copyright>
    <lastBuildDate>Thu, 14 Jan 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://gagor.pl/tags/nginx/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Optimize Nginx for performance</title>
      <link>https://gagor.pl/2016/01/optimize-nginx-for-performance/</link>
      <pubDate>Thu, 14 Jan 2016 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2016/01/optimize-nginx-for-performance/</guid>
      <description>There are many possible real life cases and not all optimization technics will be suitable for you but I hope it will be a good starting place.
Also you shouldn&amp;rsquo;t copy paste examples with faith that they will make your server fly  You have to support your decisions with excessive tests and help of monitoring system (ex. Grafana).
Cache static and dynamic content Setting caching static and dynamic content strategy may offload your server from additional load from repetitive downloads of same, rarely updated files.</description>
    </item>
    <item>
      <title>fail2ban - block wp-login.php brute force attacks</title>
      <link>https://gagor.pl/2015/12/fail2ban-block-wp-login-php-brute-force-attacks/</link>
      <pubDate>Thu, 31 Dec 2015 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2015/12/fail2ban-block-wp-login-php-brute-force-attacks/</guid>
      <description>Lately I had a lot of brute force attacks on my WordPress blog. I used basic auth to /wp-admin part in nginx configuration to block this and as a better solution I wan&amp;rsquo;t to block source IPs at all on firewall.
To do this, place this filter code in /etc/fail2ban/filter.d/wp-login.conf:
# WordPress brute force wp-login.php filter: # # Block IPs trying to authenticate in WordPress blog # # Matches e.g. # 178.</description>
    </item>
    <item>
      <title>Nginx - enabling SPDY with freeware certificate</title>
      <link>https://gagor.pl/2014/01/nginx-enabling-spdy-with-freeware-certificate/</link>
      <pubDate>Fri, 24 Jan 2014 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2014/01/nginx-enabling-spdy-with-freeware-certificate/</guid>
      <description>I was thinking about allowing access to my website using SPDY protocol for better performance and security (and for fun of course  ). But SPDY have one disadvantage - you need SSL certificate signed by known authority that will verfiy in common browsers. So you can&amp;rsquo;t use self signed certificates because everyone will see a warning entering your site. Certs are quite expensive so I started searching for free one and to my surprise I found such!</description>
    </item>
    <item>
      <title>Preparing video files for streaming on website in MP4 and WEBM format</title>
      <link>https://gagor.pl/2013/12/preparing-video-files-for-streaming-on-website-in-mp4-and-webm-format/</link>
      <pubDate>Mon, 16 Dec 2013 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2013/12/preparing-video-files-for-streaming-on-website-in-mp4-and-webm-format/</guid>
      <description>Some time ago I prepared a PC that was responsible for batch encoding of movies to formats suitable for web players (such as. Video.js, JW Player, Flowplayer, etc.)
I used HandBrake for conversion to MP4 format (becase this soft was the fastest one) and ffmpeg (aka avconv in new version) for two pass encoding to WEBM.
Below are commands used by me for that conversion:
MP4 HandBrakeCLI -e x264 -q 20.</description>
    </item>
    <item>
      <title>Nginx - przydatne rewritey i r贸偶ne sztuczki</title>
      <link>https://gagor.pl/2013/09/nginx-przydatne-rewritey-i-rozne-sztuczki/</link>
      <pubDate>Mon, 09 Sep 2013 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2013/09/nginx-przydatne-rewritey-i-rozne-sztuczki/</guid>
      <description>Polubiem Nginx&amp;rsquo;a i wykorzystuj go na coraz wicej sposob贸w. Kilka rzeczy udao mi si cakiem fajnie w nim skonfigurowa i postanowiem zebra te przykady by nastpnym razem gdy postanowi do nich sign nie musie wertowa konfig贸w po serwerach 
Sowo wstpu Niekt贸re rewrite&amp;rsquo;y kocz si znakiem ? - czemu?
Ot贸偶 Nginx pr贸buje automatycznie dodawa parametry na kocu przepisanego adresu. Jeli jednak wykorzystamy zmienn $request_uri to ona sama w sobie zawiera ju偶 parametry zapytania (czyli to co w URI znajduje si po znaku ?</description>
    </item>
    <item>
      <title>Nginx - hide server version and name in Server header and error pages</title>
      <link>https://gagor.pl/2013/01/nginx-hide-server-version-and-name-in-server-header-and-error-pages/</link>
      <pubDate>Thu, 24 Jan 2013 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2013/01/nginx-hide-server-version-and-name-in-server-header-and-error-pages/</guid>
      <description>On Debian you have to install nginx-extras package (because it have built in headers_more module). Then you need two options (best in global configuration /etc/nginx/nginx.conf file, http part):
server_tokens off; more_set_headers &amp;#39;Server: BadAss&amp;#39;; And it&amp;rsquo;s good to setup non standard error pages on every site (500 and 404 at minimum):
error_page 403 404 http://mysite.com/areyoulost; error_page 502 503 504 /500.html; </description>
    </item>
    <item>
      <title>Nginx - kompresowanie plik贸w dla gzip_static</title>
      <link>https://gagor.pl/2012/12/nginx-kompresowanie-plikow-dla-gzip_static/</link>
      <pubDate>Mon, 17 Dec 2012 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2012/12/nginx-kompresowanie-plikow-dla-gzip_static/</guid>
      <description>Ruski serwer WWW ma przydatn funkcj serwowania wersji plik贸w skompresowanych gzip&amp;rsquo;em - przez co mo偶emy plik skompresowa raz i bdzie on serwowany klientom obsugujcym kompresj HTTP ale ju偶 bez ka偶dorazowego kompresowania go. Jest to bardzo przydatne na stronach z du偶ym ruchem gdzie mo偶na w ten spos贸b zaoszczdzi takty CPU na waciw obsug pocze a nie kompresj. Drugie miejsce gdzie mo偶e to by przydatne to VPS&amp;rsquo;y i &amp;ldquo;cienkie&amp;rdquo; serwery, kt贸re na kompresji przy wikszymobci偶eniuspdzaj zbyt du偶o czasu i daje si to odczu w dziaaniu strony.</description>
    </item>
    <item>
      <title>Nginx - konfiguracja pod WordPressa</title>
      <link>https://gagor.pl/2012/06/nginx-konfiguracja-pod-wordpressa/</link>
      <pubDate>Fri, 29 Jun 2012 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2012/06/nginx-konfiguracja-pod-wordpressa/</guid>
      <description>To raczej nie jest podstawowy konfig i pr贸偶no szuka go na stronie WordPress&amp;rsquo;a, wic odradzam t zabaw jeli nie zna si zbyt dobrze nginx&amp;rsquo;a.
Poniewa偶 serwerek, na kt贸rym dziaa stronka to sprzcik z Atomem 330 i mocy na CPU zbyt wiele nie ma to popularne pluginy (np. W3 Total Cache) potencjalnie zwikszajce wydajno tak na prawd zmulay stronk jeszcze bardziej. Plugin贸w sprawdziem kilka i ka偶dorazowo efekt by podobny - stronka dziaaa wolniej ni偶 bez ich pomocy.</description>
    </item>
    <item>
      <title>Nginx - ustawienie domylnego vhosta</title>
      <link>https://gagor.pl/2012/06/nginx-ustawienie-domyslnego-vhosta/</link>
      <pubDate>Mon, 18 Jun 2012 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2012/06/nginx-ustawienie-domyslnego-vhosta/</guid>
      <description>Ustawienie domylnego vhosta w nginx&amp;rsquo;ie jest adnie opisane w dokumentacji i pocztkowo wydawao si dobrze dziaa ale gdy wykorzystaem t konfiguracj na serwerze z wieloma adresami IP i nasuchiwaniem na porcie 80 (bez podania IP) to zachowywao si to do dziwnie (przewa偶nie nie adowao tej strony kt贸r chciaem). Od teraz tworz konfiguracj domylnego vhosta dla ka偶dego z dostpnych adres贸w IP. Powiem szczerze 偶e nie miaem czasu na gbsze zbadanie tego zachowania i wykorzystaemrozwizanie, kt贸re dziaao w ka偶dym przypadku czyli po jednym konfigu na IP + przekierowanie na og贸ln stron.</description>
    </item>
    <item>
      <title>Nginx - m贸j domylny config</title>
      <link>https://gagor.pl/2012/06/nginx-moj-domyslny-config/</link>
      <pubDate>Fri, 08 Jun 2012 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2012/06/nginx-moj-domyslny-config/</guid>
      <description>W tym pocie nie rozpisz si zbytnio - wrzucam tylko config od kt贸rego zaczynam konfiguracj nginx&amp;rsquo;a.
user www-data; worker_processes 4; pid /var/run/nginx.pid; events { worker_connections 1024; ## zaakceptuj tak du偶o pocze jak to mo偶liwe multi_accept on; ## epoll jest preferowany na jajkach od 2.6 ## http://www.kegel.com/c10k.html#nb.epoll use epoll; } http { include /etc/nginx/mime.types; default_type application/octet-stream; access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; ## opcje TCP sendfile on; tcp_nopush on; tcp_nodelay on; ## maksymalny rozmiar zapytnia client_max_body_size 10m; ## timeout&amp;#39;y client_body_timeout 60; client_header_timeout 60; keepalive_timeout 10; send_timeout 60; ## kompresja gzip on; gzip_static on; gzip_vary on; gzip_disable &amp;#34;msie6&amp;#34;; gzip_comp_level 1; gzip_proxied any; gzip_buffers 16 8k; gzip_min_length 50; gzip_types text/plain text/css application/json application/x-javascript application/javascript text/javascript application/atom+xml application/xml application/xml+rss text/xml image/x-icon text/x-js application/xhtml+xml; ## bezpieczestwo ## security by obscurity - ukrywamy wersj nginx&amp;#39;a server_tokens off; ignore_invalid_headers on; ## resetuj zbyt dugie poczenia - powinno pom贸c na slowlorisa reset_timedout_connection on; ## wczenie ochrony przed clickjackingiem - uruchamiam to per vhost ## https://developer.</description>
    </item>
    <item>
      <title>X-Forwarded-For &#43; mod_rpaf - logowanie rzeczywistych adres贸w IP na Apache za reverse proxy</title>
      <link>https://gagor.pl/2011/11/x-forwarded-for-mod_rpaf-logowanie-rzeczywistych-adresow-ip-na-apache-za-reverse-proxy/</link>
      <pubDate>Mon, 28 Nov 2011 00:00:00 +0000</pubDate>
      <guid>https://gagor.pl/2011/11/x-forwarded-for-mod_rpaf-logowanie-rzeczywistych-adresow-ip-na-apache-za-reverse-proxy/</guid>
      <description>Gdy ju偶 ustawimy reverse proxy przed Apache szybko mo偶na zauwa偶y 偶e w logach zamiast adres贸w IP zdalnych u偶ytkownik贸w pojawia si tylko jeden adres: adres naszego proxy. R贸wnie偶 z poziomu php&amp;rsquo;a jako adres klienta wida IP naszego proxy.
By poradzi sobie z tym problemem trzeba na serwerze reverse proxy ustawi przekazywanie informacji o oryginalnym adresie IP klienta w nag贸wku X-Forwarded-For. W przypadku gdy reverse proxy dziaa na nginx&amp;rsquo;e wystarczy doda taki wpis:</description>
    </item>
  </channel>
</rss>
