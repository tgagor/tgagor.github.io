<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>bash | timor's site</title><meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: bash"><meta name=author content><link rel=canonical href=https://timor.site/tags/bash/><link crossorigin=anonymous href=/assets/css/stylesheet.3463bda35fd55b9ad6187f681d9b6a97123e084572ffc8e144d794f0d2a914df.css integrity="sha256-NGO9o1/VW5rWGH9oHZtqlxI+CEVy/8jhRNeU8NKpFN8=" rel="preload stylesheet" as=style><link rel=icon href=https://timor.site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://timor.site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://timor.site/favicon-32x32.png><link rel=apple-touch-icon href=https://timor.site/apple-touch-icon.png><link rel=mask-icon href=https://timor.site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://timor.site/tags/bash/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-88996819-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="bash"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:type" content="website"><meta property="og:url" content="https://timor.site/tags/bash/"><meta name=twitter:card content="summary"><meta name=twitter:title content="bash"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://timor.site/ accesskey=h title="timor's site (Alt + H)"><img src=https://timor.site/favicon-72x72.png alt aria-label=logo height=36>timor's site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://timor.site/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://timor.site/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://timor.site/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://timor.site/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://timor.site/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://timor.site/>Home</a>&nbsp;¬ª&nbsp;<a href=https://timor.site/tags/>Tags</a></div><h1>bash</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/11/automatically-add-ticket-id-to-every-commit-message-in-git/cover_hu405ab91b3c0e3cd1a2db0cf747471e2a_11462_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2021/11/automatically-add-ticket-id-to-every-commit-message-in-git/cover_hu405ab91b3c0e3cd1a2db0cf747471e2a_11462_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2021/11/automatically-add-ticket-id-to-every-commit-message-in-git/cover_hu405ab91b3c0e3cd1a2db0cf747471e2a_11462_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2021/11/automatically-add-ticket-id-to-every-commit-message-in-git/cover.webp 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/11/automatically-add-ticket-id-to-every-commit-message-in-git/cover.webp alt="[Photo by Christina Morillo from Pexels](https://www.pexels.com/photo/eyeglasses-in-front-of-laptop-computer-1181253/)" width=720 height=300></figure><header class=entry-header><h2>Automatically add ticket ID to every commit message in Git</h2></header><div class=entry-content><p>I don‚Äôt know how it is in your company, but in mine it‚Äôs considered a good practice to add ticket numbers to commit messages. It allows to easily determine why something was changed, etc. Makes sense, but this also means, that I should be adding this ticket to every message‚Ä¶ And this doesn‚Äôt make sense for me. I will accidentally avoid it from time to time or make a lot of typos....</p></div><footer class=entry-footer><span title='2021-11-09 00:00:00 +0000 UTC'>2021-11-09</span>&nbsp;¬∑&nbsp;2 min</footer><a class=entry-link aria-label="post link to Automatically add ticket ID to every commit message in Git" href=https://timor.site/2021/11/automatically-add-ticket-id-to-every-commit-message-in-git/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/11/resize-images-from-command-line-on-macos/cover_hu4bc277649c33bd8e56d02fdc4bf526fe_11542_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2021/11/resize-images-from-command-line-on-macos/cover_hu4bc277649c33bd8e56d02fdc4bf526fe_11542_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2021/11/resize-images-from-command-line-on-macos/cover_hu4bc277649c33bd8e56d02fdc4bf526fe_11542_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2021/11/resize-images-from-command-line-on-macos/cover.webp 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/11/resize-images-from-command-line-on-macos/cover.webp alt width=720 height=300></figure><header class=entry-header><h2>Resize images from command line on MacOS</h2></header><div class=entry-content><p>I was updating my blog and needed to generate few variants of images, in different resolution.
Option 1 - sips There‚Äôs simple, builtin tool sips, that can be used for simple resizing 1:
Resize single image sips -Z 36 orig.png --out static/favicon36x36.png -Z - maintain image aspect ratio 36 - maximum height and width It can be also used for batch image processing:
Warning
Beware, without ‚Äìout param, it will overwrite images in place!...</p></div><footer class=entry-footer><span title='2021-11-07 00:00:00 +0000 UTC'>2021-11-07</span>&nbsp;¬∑&nbsp;2 min</footer><a class=entry-link aria-label="post link to Resize images from command line on MacOS" href=https://timor.site/2021/11/resize-images-from-command-line-on-macos/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover_hu65ab7f82b5a49c589c5b7f5eca4441a8_45985_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover_hu65ab7f82b5a49c589c5b7f5eca4441a8_45985_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover_hu65ab7f82b5a49c589c5b7f5eca4441a8_45985_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover.jpg alt width=720 height=300></figure><header class=entry-header><h2>Homebrew - uninstall formula with dependencies</h2></header><div class=entry-content><p>I use brew extensively on MacOS. It‚Äôs just as convenient as many Linux package managers. What I don‚Äôt like, it leaves dependencies after removal of formula. There‚Äôs simple way to clean it up by running one command 1.
Uninstall with dependencies brew uninstall FORMULA brew autoremove Info
In my case running brew autoremove actually removed few packages I really wanted to have. Check the output carefully!
https://stackoverflow.com/questions/7323261/uninstall-remove-a-homebrew-package-including-all-its-dependencies¬†‚Ü©Ô∏é</p></div><footer class=entry-footer><span title='2021-11-05 00:00:00 +0000 UTC'>2021-11-05</span>&nbsp;¬∑&nbsp;1 min</footer><a class=entry-link aria-label="post link to Homebrew - uninstall formula with dependencies" href=https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover_hu62c0b164476bca26c4a2eee97aacc5e4_16490_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover_hu62c0b164476bca26c4a2eee97aacc5e4_16490_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover_hu62c0b164476bca26c4a2eee97aacc5e4_16490_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover.jpg alt width=720 height=300></figure><header class=entry-header><h2>How to remove geo-localization/EXIF data from photos</h2></header><div class=entry-content><p>I wanted to share publicly some photos, but I performed them with navigation enabled so they contained accurate localisation of my house. I wanted to remove EXIF data GPS tags, my phone type and other irrelevant stuff.
TL;DR You will need imagemagick installed (use apt/yum/dnf of whatever you have there):
Install imagemagick sudo apt install -y imagemagick To remove them just use: Strip EXIF data mogrify -strip image.jpg How to check if it‚Äôs working?...</p></div><footer class=entry-footer><span title='2021-03-05 00:00:00 +0000 UTC'>2021-03-05</span>&nbsp;¬∑&nbsp;1 min</footer><a class=entry-link aria-label="post link to How to remove geo-localization/EXIF data from photos" href=https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/cover_hu28b905d8ab67c25c4d948eb1fa0d33eb_22584_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/cover_hu28b905d8ab67c25c4d948eb1fa0d33eb_22584_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/cover_hu28b905d8ab67c25c4d948eb1fa0d33eb_22584_720x0_resize_q75_h2_box_2.webp 720w ,https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/cover.webp 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/cover.webp alt="[Photo by Paul IJsendoorn from Pexels](https://www.pexels.com/photo/antelope-canyon-33041/)" width=720 height=300></figure><header class=entry-header><h2>Moving from Linux to MacOS ‚Äì first steps</h2></header><div class=entry-content><p>Few years ago I moved from Linux desktop to MacOS for my business, day to day work. There were 2 main reasons for that:
Corporations don‚Äôt like Linux - they can‚Äôt manage it, they can‚Äôt support it, so they blocked it with ‚ÄúSecurity policy‚Äù, ISO20001, or other nonsense. Actually they‚Äôre partially right but in different place - many business collaboration applications don‚Äôt work well on LInux (or they don‚Äôt work at all) Skype for Business - there‚Äôs open source alternative but to get full support you have to pay for additional codecs (as far as I remember) - it‚Äôs not working stable even in paid version Outlook and calendar support - I love Thunderbird and I use it for years, but calendar invitations didn‚Äôt work nice (honestly, they didn‚Äôt work nice even between different Outlook versions‚Ä¶) Corporate VPN apps - Christ, I always was able to get it working eventually, but‚Ä¶ why bother I‚Äôm older, maybe lazier, maybe smarter - I don‚Äôt like to spend my time resolving problems that don‚Äôt give me any value....</p></div><footer class=entry-footer><span title='2020-01-04 00:00:00 +0000 UTC'>2020-01-04</span>&nbsp;¬∑&nbsp;7 min</footer><a class=entry-link aria-label="post link to Moving from Linux to MacOS ‚Äì first steps" href=https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>How to stole ssh session when you‚Äôre root</h2></header><div class=entry-content><p>It happen to me all the time that one of developers notifies me about some kind of problem that I can‚Äôt confirm from my account. Sometimes it was because of bad ssh keys configuration, other times file permissions, mostly such stuff. It‚Äôs sometimes convenient to ‚Äúenter into someone‚Äôs shoes‚Äù to see what‚Äôs going on there.
If you‚Äôre root on machine you may do that like this:
su developer - Easy one but that‚Äôs not enough for all cases....</p></div><footer class=entry-footer><span title='2016-04-27 00:00:00 +0000 UTC'>2016-04-27</span>&nbsp;¬∑&nbsp;1 min</footer><a class=entry-link aria-label="post link to How to stole ssh session when you‚Äôre root" href=https://timor.site/2016/04/how-to-stole-ssh-session-when-youre-root/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>pip - uninstall package with dependencies</h2></header><div class=entry-content><p>Virtualenvs in python are cheap but from time to time you will install something with pip on your system and when time comes removing all this crap could be difficult. I found this bash snippet that will uninstall package with all dependencies:
for dep in $(pip show python-neutronclient | grep Requires | sed 's/Requires: //g; s/,//g') ; do sudo pip uninstall -y $dep ; done pip uninstall -y python-neutronclient Source: http://stackoverflow....</p></div><footer class=entry-footer><span title='2016-04-26 00:00:00 +0000 UTC'>2016-04-26</span>&nbsp;¬∑&nbsp;1 min</footer><a class=entry-link aria-label="post link to pip - uninstall package with dependencies" href=https://timor.site/2016/04/pip-uninstall-package-with-dependencies/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Use bastion host with Ansible</h2></header><div class=entry-content><p>When you deploy your application in cloud you don‚Äôt need and don‚Äôt want your hosts exposed via SSH to the world. Malware scans whole network for easy SSH access and when find something will try some brute force attacks, overloading such machines. It‚Äôs easier to have one exposed, but secured host, that doesn‚Äôt host anything and is used as proxy/gateway to access our infrastructure- it‚Äôs called bastion host.
Ansible is quite easy to integrate with bastion host configuration....</p></div><footer class=entry-footer><span title='2016-04-22 00:00:00 +0000 UTC'>2016-04-22</span>&nbsp;¬∑&nbsp;3 min</footer><a class=entry-link aria-label="post link to Use bastion host with Ansible" href=https://timor.site/2016/04/use-bastion-host-with-ansible/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>List octal file permissions in bash</h2></header><div class=entry-content><p>Sometimes it‚Äôs easier to use octal file permissions but they‚Äôre not so easy to list. I caught myself few times that I didn‚Äôt remember how to list them - so this is a reason for that note.
stat -c "%a %n" * 755 bin 755 games 755 include Yes, it‚Äôs that easy üòÉ
And here also with human readable attributes:
stat -c '%A %a %n' * drwxr-xr-x 755 bin drwxr-xr-x 755 games drwxr-xr-x 755 include</p></div><footer class=entry-footer><span title='2016-02-24 00:00:00 +0000 UTC'>2016-02-24</span>&nbsp;¬∑&nbsp;1 min</footer><a class=entry-link aria-label="post link to List octal file permissions in bash" href=https://timor.site/2016/02/list-octal-file-permissions-in-bash/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Automatically build after file change</h2></header><div class=entry-content><p>I‚Äôm playing a lot with Docker lately. Building images, and then rebuilding, and then building again‚Ä¶ It‚Äôs pretty boring. To automate this task a little I used inotify to build automatically after I changed any file. This trick could be used in many different situations.
You will need inotify-tools package:
sudo apt-get install -y inotify-tools Then run something like this:
while inotifywait -e modify -r .; do docker-compose build; done This commands will rebuild my Docker images after any file change in current directory....</p></div><footer class=entry-footer><span title='2016-02-23 00:00:00 +0000 UTC'>2016-02-23</span>&nbsp;¬∑&nbsp;1 min</footer><a class=entry-link aria-label="post link to Automatically build after file change" href=https://timor.site/2016/02/automatically-build-after-file-change/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://timor.site/tags/bash/page/2/>Next&nbsp;&nbsp;¬ª</a></nav></footer></main><footer class=footer><span><a href=https://timor.site/>timor's site</a> &copy; 2008-2022</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>