<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>bash | timor's site</title>
<meta name=keywords content>
<meta name=description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
<meta name=author content>
<link rel=canonical href=https://timor.site/tags/bash/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.a6564483631bceb126e1ccf965a2dc167df7b8a408d2785a0deaa63d62e29233.css integrity="sha256-plZEg2MbzrEm4cz5ZaLcFn33uKQI0nhaDeqmPWLikjM=" rel="preload stylesheet" as=style>
<link rel=preload href=https://timor.site/favicon-36x36.png as=image>
<link rel=icon href=https://timor.site/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://timor.site/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://timor.site/favicon-32x32.png>
<link rel=apple-touch-icon href=https://timor.site/apple-touch-icon.png>
<link rel=mask-icon href=https://timor.site/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.0">
<link rel=alternate type=application/rss+xml href=https://timor.site/tags/bash/index.xml>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-88996819-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="bash">
<meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
<meta property="og:type" content="website">
<meta property="og:url" content="https://timor.site/tags/bash/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="bash">
<meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://timor.site/ accesskey=h title="timor's site (Alt + H)">
<img src=https://timor.site/favicon-36x36.png alt=logo aria-label=logo height=36>timor's site</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://timor.site/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://timor.site/projects/ title=Projects>
<span>Projects</span>
</a>
</li>
<li>
<a href=https://timor.site/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://timor.site/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://timor.site/about/ title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<header class=page-header><div class=breadcrumbs><a href=https://timor.site/>Home</a>&nbsp;»&nbsp;<a href=https://timor.site/tags/>Tags</a></div>
<h1>bash</h1>
</header>
<article class="post-entry tag-entry">
<figure class=entry-cover>
<img loading=lazy srcset="https://timor.site/2021/11/resize-images-on-macos-from-command-line/cover_hua9cc570f7772942008ae0312fcec7ec4_13475_360x0_resize_q75_box.jpg 360w ,https://timor.site/2021/11/resize-images-on-macos-from-command-line/cover_hua9cc570f7772942008ae0312fcec7ec4_13475_480x0_resize_q75_box.jpg 480w ,https://timor.site/2021/11/resize-images-on-macos-from-command-line/cover_hua9cc570f7772942008ae0312fcec7ec4_13475_720x0_resize_q75_box.jpg 720w ,https://timor.site/2021/11/resize-images-on-macos-from-command-line/cover.jpg 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/11/resize-images-on-macos-from-command-line/cover.jpg alt width=720 height=300>
</figure>
<header class=entry-header>
<h2>Resize images on MacOS from command line
</h2>
</header>
<section class=entry-content>
<p>I was updating my blog and needed to generate few variants of images in different resolution. I found this handy tool 1:
Resize single image sips -Z 36 orig.png --out static/favicon36x36.png
-Z - maintain image aspect ratio 36 - maximum height and width It can be also used for batch image processing:
.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning ....</p>
</section>
<footer class=entry-footer><span title="2021-11-07 00:00:00 +0000 UTC">2021-11-07</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Resize images on MacOS from command line" href=https://timor.site/2021/11/resize-images-on-macos-from-command-line/></a>
</article>
<article class="post-entry tag-entry">
<figure class=entry-cover>
<img loading=lazy srcset="https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover_huc647e90d409b8e94f57f8fd0c9bb4d2f_12508_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover_huc647e90d409b8e94f57f8fd0c9bb4d2f_12508_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover.webp 718w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/cover.webp alt width=718 height=300>
</figure>
<header class=entry-header>
<h2>Homebrew - uninstall formula with dependencies
</h2>
</header>
<section class=entry-content>
<p>I use brew extensively on MacOS. It’s just as convenient as many Linux package managers. What I don’t like, it leaves dependencies after removal of formula. There’s simple way to clean it up by running one command 1.
Uninstall with dependencies brew uninstall FORMULA brew autoremove
.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:#444;background:#e7f2fa}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:#fff;background:#6ab0de}.notice.warning .notice-title{background:rgba(217,83,79,.9)}.notice.warning{background:#fae2e2}.notice.info .notice-title{background:#f0b37e}.notice.info{background:#fff2db}.notice.note .notice-title{background:#6ab0de}.notice.note{background:#e7f2fA}.notice.tip .notice-title{background:rgba(92,184,92,.8)}.notice.tip{background:#e6f9e6}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:0.125em;position:relative} Info...</p>
</section>
<footer class=entry-footer><span title="2021-11-05 00:00:00 +0000 UTC">2021-11-05</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Homebrew - uninstall formula with dependencies" href=https://timor.site/2021/11/homebrew-uninstall-formula-with-dependencies/></a>
</article>
<article class="post-entry tag-entry">
<figure class=entry-cover>
<img loading=lazy srcset="https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover_huff563117f0edd408fa906909e3f68462_11672_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover_huff563117f0edd408fa906909e3f68462_11672_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover.webp 718w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/cover.webp alt width=718 height=300>
</figure>
<header class=entry-header>
<h2>How to remove geo-localization/EXIF data from photos
</h2>
</header>
<section class=entry-content>
<p>I wanted to share publicly some photos, but I performed them with navigation enabled so they contained accurate localization of my house. I wanted to remove EXIF data GPS tags, my phone type and other irrelevant stuff.
TL;DR You will need imagemagick installed (use apt/yum/dnf of whatever you have there):
sudo apt install -y imagemagick To remove them just use:
mogrify -strip image.jpg How to check if it’s working? First, let’s get some example images 1....</p>
</section>
<footer class=entry-footer><span title="2021-03-05 00:00:00 +0000 UTC">2021-03-05</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to How to remove geo-localization/EXIF data from photos" href=https://timor.site/2021/03/how-to-remove-geo-localization/exif-data-from-photos/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Moving from Linux to MacOS – first steps
</h2>
</header>
<section class=entry-content>
<p>Few years ago I moved from Linux desktop to MacOS for my business, day to day work. There were 2 main reasons for that:
Corporations don’t like Linux - they can’t manage it, they can’t support it, so they blocked it with “Security policy”, ISO20001, or other nonsense. Actually they’re partially right but in different place - many business collaboration applications don’t work well on LInux (or they don’t work at all) Skype for Business - there’s open source alternative but to get full support you have to pay for additional codecs (as far as I remember) - it’s not working stable even in paid version Outlook and calendar support - I love Thunderbird and I use it for years, but calendar invitations didn’t work nice (honestly, they didn’t work nice even between different Outlook versions…) Corporate VPN apps - Christ, I always was able to get it working eventually, but… why bother I’m older, maybe lazier, maybe smarter - I don’t like to spend my time resolving problems that don’t give me any value....</p>
</section>
<footer class=entry-footer><span title="2020-01-04 00:00:00 +0000 UTC">2020-01-04</span>&nbsp;·&nbsp;7 min</footer>
<a class=entry-link aria-label="post link to Moving from Linux to MacOS – first steps" href=https://timor.site/2020/01/moving-from-linux-to-macos-first-steps/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>How to stole ssh session when you’re root
</h2>
</header>
<section class=entry-content>
<p>It happen to me all the time that one of developers notifies me about some kind of problem that I can’t confirm from my account. Sometimes it was because of bad ssh keys configuration, other times file permissions, mostly such stuff. It’s sometimes convenient to “enter into someone’s shoes” to see what’s going on there.
If you’re root on machine you may do that like this:
su developer - Easy one but that’s not enough for all cases....</p>
</section>
<footer class=entry-footer><span title="2016-04-27 00:00:00 +0000 UTC">2016-04-27</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to How to stole ssh session when you’re root" href=https://timor.site/2016/04/how-to-stole-ssh-session-when-youre-root/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>pip - uninstall package with dependencies
</h2>
</header>
<section class=entry-content>
<p>Virtualenvs in python are cheap but from time to time you will install something with pip on your system and when time comes removing all this crap could be difficult. I found this bash snippet that will uninstall package with all dependencies:
for dep in $(pip show python-neutronclient | grep Requires | sed 's/Requires: //g; s/,//g') ; do sudo pip uninstall -y $dep ; done pip uninstall -y python-neutronclient Source: http://stackoverflow....</p>
</section>
<footer class=entry-footer><span title="2016-04-26 00:00:00 +0000 UTC">2016-04-26</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to pip - uninstall package with dependencies" href=https://timor.site/2016/04/pip-uninstall-package-with-dependencies/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Use bastion host with Ansible
</h2>
</header>
<section class=entry-content>
<p>When you deploy your application in cloud you don’t need and don’t want your hosts exposed via SSH to the world. Malware scans whole network for easy SSH access and when find something will try some brute force attacks, overloading such machines. It’s easier to have one exposed, but secured host, that doesn’t host anything and is used as proxy/gateway to access our infrastructure- it’s called bastion host.
Ansible is quite easy to integrate with bastion host configuration....</p>
</section>
<footer class=entry-footer><span title="2016-04-22 00:00:00 +0000 UTC">2016-04-22</span>&nbsp;·&nbsp;3 min</footer>
<a class=entry-link aria-label="post link to Use bastion host with Ansible" href=https://timor.site/2016/04/use-bastion-host-with-ansible/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>List octal file permissions in bash
</h2>
</header>
<section class=entry-content>
<p>Sometimes it’s easier to use octal file permissions but they’re not so easy to list. I caught myself few times that I didn’t remember how to list them - so this is a reason for that note.
stat -c "%a %n" * 755 bin 755 games 755 include Yes, it’s that easy 😃
And here also with human readable attributes:
stat -c '%A %a %n' * drwxr-xr-x 755 bin drwxr-xr-x 755 games drwxr-xr-x 755 include </p>
</section>
<footer class=entry-footer><span title="2016-02-24 00:00:00 +0000 UTC">2016-02-24</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to List octal file permissions in bash" href=https://timor.site/2016/02/list-octal-file-permissions-in-bash/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Automatically build after file change
</h2>
</header>
<section class=entry-content>
<p>I’m playing a lot with Docker lately. Building images, and then rebuilding, and then building again… It’s pretty boring. To automate this task a little I used inotify to build automatically after I changed any file. This trick could be used in many different situations.
You will need inotify-tools package:
sudo apt-get install -y inotify-tools Then run something like this:
while inotifywait -e modify -r .; do docker-compose build; done This commands will rebuild my Docker images after any file change in current directory....</p>
</section>
<footer class=entry-footer><span title="2016-02-23 00:00:00 +0000 UTC">2016-02-23</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Automatically build after file change" href=https://timor.site/2016/02/automatically-build-after-file-change/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Install WordPress from command-line
</h2>
</header>
<section class=entry-content>
<p>I never tried it before but today I needed to install WordPress… From command line only. And there is a way to do this with wp-cli.
WP-CLI installation First some requirements (as root):
apt-get install php5-cli php5-mysql mysql-client curl And now installation of wp-cli (as root too):
curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar chmod +x wp-cli.phar mv wp-cli.phar /usr/local/bin/wp Check if it’s working:
$ wp --version WP-CLI 0.22.0 WordPress installation Now you should switch to user of your web application, ex....</p>
</section>
<footer class=entry-footer><span title="2016-02-15 00:00:00 +0000 UTC">2016-02-15</span>&nbsp;·&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Install WordPress from command-line" href=https://timor.site/2016/02/install-wordpress-from-command-line/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=next href=https://timor.site/tags/bash/page/2/>Next Page »</a>
</nav>
</footer>
</main>
<footer class=footer>
<span><span>© 2011 <a href=https://timor.site>timor&rsquo;s site</a></span> <span>Licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>