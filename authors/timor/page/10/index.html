<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>timor | timor's site</title><meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: timor"><meta name=author content><link rel=canonical href=https://timor.site/authors/timor/><link crossorigin=anonymous href=/assets/css/stylesheet.8845d38279fc2e4ded629f3cd25e7aaf02a9b84794d4cd27d6296ce70a3b2740.css integrity="sha256-iEXTgnn8Lk3tYp880l56rwKpuEeU1M0n1ils5wo7J0A=" rel="preload stylesheet" as=style><link rel=icon href=https://timor.site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://timor.site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://timor.site/favicon-32x32.png><link rel=apple-touch-icon href=https://timor.site/apple-touch-icon.png><link rel=mask-icon href=https://timor.site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://timor.site/authors/timor/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-88996819-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="timor"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:type" content="website"><meta property="og:url" content="https://timor.site/authors/timor/"><meta name=twitter:card content="summary"><meta name=twitter:title content="timor"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://timor.site/ accesskey=h title="timor's site (Alt + H)"><img src=https://timor.site/favicon-72x72.png alt aria-label=logo height=36>timor's site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://timor.site/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://timor.site/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://timor.site/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://timor.site/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://timor.site/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://timor.site/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://timor.site/>Home</a>&nbsp;禄&nbsp;<a href=https://timor.site/authors/>Authors</a></div><h1>timor</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://timor.site/books/2016/sztuka-podstepu/images/book-cover_huc7a050d91d7d55530a13c764c1e54b2b_16460_360x0_resize_q75_h2_box_2.webp 360w ,https://timor.site/books/2016/sztuka-podstepu/images/book-cover_huc7a050d91d7d55530a13c764c1e54b2b_16460_480x0_resize_q75_h2_box_2.webp 480w ,https://timor.site/books/2016/sztuka-podstepu/images/book-cover.webp 625w" sizes="(min-width: 768px) 720px, 100vw" src=https://timor.site/books/2016/sztuka-podstepu/images/book-cover.webp alt width=625 height=893></figure><header class=entry-header><h2>Sztuka podstpu</h2></header><div class=entry-content><p>Sztuka podstpuamaem ludzi, nie hasa
Authors: Kevin Mitnick, William L. Simon
helion.pl</p></div><footer class=entry-footer><span title='2016-02-10 00:00:00 +0000 UTC'>2016-02-10</span>&nbsp;路&nbsp;1 min</footer><a class=entry-link aria-label="post link to Sztuka podstpu" href=https://timor.site/books/2016/sztuka-podstepu/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Mass replace in WordPress posts via MySQL query</h2></header><div class=entry-content><p>I was doing a lot of changes to my old posts, switched to HTTPS, etc. Sometimes it was useful to change some particular text in all my old posts at a time, but there is no such feature in WordPress. But WordPress runs on MySQL and I could use SQL query to update such posts.
Make backup - its not required but strongly advised 
Now use this query as template to replace in place whatever you need:
...</p></div><footer class=entry-footer><span title='2016-02-09 00:00:00 +0000 UTC'>2016-02-09</span>&nbsp;路&nbsp;1 min</footer><a class=entry-link aria-label="post link to Mass replace in WordPress posts via MySQL query" href=https://timor.site/2016/02/mass-replace-in-wordpress-posts-via-mysql-query/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Use www.horizon.tv with Pipelight/Silverlight on Linux/Ubuntu</h2></header><div class=entry-content><p>From few days I have access to UPCs www.horizon.tv platform - until now it was useless on Linux. But there is Pipelight that will use Wine to emulate Silverlight on Linux and its working pretty well - youre just few commands away from achieving that:
# stop browser killall firefox # remove old version if you have it sudo apt-get remove pipelight Now configure repos and install packages:
sudo apt-add-repository ppa:pipelight/stable sudo apt-get update sudo apt-get install --install-recommends pipelight-multi sudo pipelight-plugin --update Enable plugin (run it with sudo for system wide installation):...</p></div><footer class=entry-footer><span title='2016-02-09 00:00:00 +0000 UTC'>2016-02-09</span>&nbsp;路&nbsp;1 min</footer><a class=entry-link aria-label="post link to Use www.horizon.tv with Pipelight/Silverlight on Linux/Ubuntu" href=https://timor.site/2016/02/use-www-horizon-tv-with-pipelight-silverlight-on-linux-ubuntu/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Intel Dual Band Wireless-AC 7260 for Desktop on Linux</h2></header><div class=entry-content><p>I just bought new wifi card for my desktop computer. Like in topic, its Intel Dual Band Wireless-AC 7260 for Desktop.
I was searching for card that:
support AC standard have 5GHz network support (2,4GHz channels are cluttered heavily in my neighborhood have PCI/PCIx or USB3 connector is Linux friendly (no modules compilation by hand, support for aircrack-ng, kismet) This one is the only I found that comply my expectations....</p></div><footer class=entry-footer><span title='2016-02-06 00:00:00 +0000 UTC'>2016-02-06</span>&nbsp;路&nbsp;3 min</footer><a class=entry-link aria-label="post link to Intel Dual Band Wireless-AC 7260 for Desktop on Linux" href=https://timor.site/2016/02/intel-dual-band-wireless-ac-7260-for-desktop-on-linux/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Prepare for DoS like Cloudflare do</h2></header><div class=entry-content><p>I watched nice presentation about how Cloudflare protects itself against DoS. Most of us are not able to do that exactly like them but some of tips were general enough to be used on typical web front server.
I took notes from this presentation and presented here. Thanks to Marek agreement I also reposted all examples (in easier to copy paste way).
Howto prepare against ACK/FIN/RST/X-mas flood Use conntrack rule:...</p></div><footer class=entry-footer><span title='2016-02-05 00:00:00 +0000 UTC'>2016-02-05</span>&nbsp;路&nbsp;4 min</footer><a class=entry-link aria-label="post link to Prepare for DoS like Cloudflare do" href=https://timor.site/2016/02/prepare-for-dos-like-cloudflare-do/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Zeitgeist activity.sqlite-wal getting huge</h2></header><div class=entry-content><p>I was looking at backup task running on my desk and saw that its spending a lot of time on ~/.local/share/zeitgeist directory. I checked and it had 4.6GB:
du -sh ~/.local/share/zeitgeist/* 118M activity.sqlite 44M activity.sqlite.bck 32K activity.sqlite-shm 4,4G activity.sqlite-wal 311M fts.index WTF? Fortunately I found here that I could easily delete some of this:
zeitgeist-daemon --quit Now check that its not running:
ps axu | grep zeitgeist-daemon timor 9105 0.0 0....</p></div><footer class=entry-footer><span title='2016-02-04 00:00:00 +0000 UTC'>2016-02-04</span>&nbsp;路&nbsp;1 min</footer><a class=entry-link aria-label="post link to Zeitgeist activity.sqlite-wal getting huge" href=https://timor.site/2016/02/zeitgeist-activity-sqlite-wal-getting-huge/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Optimize Nginx for performance</h2></header><div class=entry-content><p>There are many possible real life cases and not all optimization technics will be suitable for you but I hope it will be a good starting place.
Also you shouldnt copy paste examples with faith that they will make your server fly  You have to support your decisions with excessive tests and help of monitoring system (ex. Grafana).
Cache static and dynamic content Setting caching static and dynamic content strategy may offload your server from additional load from repetitive downloads of same, rarely updated files....</p></div><footer class=entry-footer><span title='2016-01-14 00:00:00 +0000 UTC'>2016-01-14</span>&nbsp;路&nbsp;6 min</footer><a class=entry-link aria-label="post link to Optimize Nginx for performance" href=https://timor.site/2016/01/optimize-nginx-for-performance/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>XenServer - export VM to file</h2></header><div class=entry-content><p>Sometime you need to make quick and dirty image backup of VM running on XenServer and this post is about such case 
List machines:
xl list Name ID Mem VCPUs State Time(s) Domain-0 0 4066 8 r----- 3526567.3 webfront1.example.com 1 4096 4 r----- 3186487.2 webfront2.example.com 2 2048 2 -b---- 920408.2 Now you may export one:
xe vm-export vm=webfront1.example.com filename=/srv/backup/webfront.xva Export succeeded You may also use uuid for that - list machines with xe vm-list (best with less) and then:...</p></div><footer class=entry-footer><span title='2016-01-12 00:00:00 +0000 UTC'>2016-01-12</span>&nbsp;路&nbsp;1 min</footer><a class=entry-link aria-label="post link to XenServer - export VM to file" href=https://timor.site/2016/01/xenserver-export-vm-to-file/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Nagios - downtime on host/service from command line with curl</h2></header><div class=entry-content><p>Sometimes deployment process or other havy task may cause some Nagios checks to rise below normal levels and bother admin. If this is expected and you want to add downtime on host/service during this task you may use this script:
#!/bin/bash function die { echo $1; exit 1; } if [[ $# -eq 0 ]] ; then die "Give hostname and time in minutes as parameter!" fi if [[ $# -eq 1 ]] ; then MINUTES=15 else MINUTES=$2 fi HOST=$1 NAGURL=http://nagios....</p></div><footer class=entry-footer><span title='2016-01-11 00:00:00 +0000 UTC'>2016-01-11</span>&nbsp;路&nbsp;2 min</footer><a class=entry-link aria-label="post link to Nagios - downtime on host/service from command line with curl" href=https://timor.site/2016/01/nagios-downtime-on-hostservice-from-command-line-with-curl/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Grafana - installation and configuraton with InfluxDB and CollectD on Debian/Ubuntu</h2></header><div class=entry-content><p>Now when you have CollectD and InfluxDB installed you may configure Grafana 
First configure repo with current Grafana version (select your distro):
curl https://packagecloud.io/gpg.key | sudo apt-key add - deb https://packagecloud.io/grafana/testing/debian/ wheezy main Now install package (on wheezy I needed to install apt-transport-https to allow installation of packages from repo via HTTPS):
apt-get update apt-get install -y apt-transport-https apt-get install -y grafana By default Grafana will use sqlite database to keep information about users, etc:...</p></div><footer class=entry-footer><span title='2016-01-10 00:00:00 +0000 UTC'>2016-01-10</span>&nbsp;路&nbsp;2 min</footer><a class=entry-link aria-label="post link to Grafana - installation and configuraton with InfluxDB and CollectD on Debian/Ubuntu" href=https://timor.site/2016/01/grafana-installation-and-configuraton-with-influxdb-and-collectd-on-debian-ubuntu/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://timor.site/authors/timor/page/9/>芦&nbsp;Prev&nbsp;</a>
<a class=next href=https://timor.site/authors/timor/page/11/>Next&nbsp;&nbsp;禄</a></nav></footer></main><footer class=footer><span><a href=https://timor.site/>timor's site</a> &copy; 2008-2023</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>