<!doctype html><html lang=en dir=auto><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Po zakupie nowych dyskÃ³w zamierzam utworzyÄ‡ zdegradowanÄ… macierz RAID5 z dwÃ³ch dyskÃ³w (na trzecim na razie znajdujÄ… siÄ™ dane), potem utworzyÄ‡ wolumen LVM, sformatowaÄ‡ go, przekopiowaÄ‡ dane z pojedynczego dysku na macierz i doÅ‚Ä…czyÄ‡ trzeci dysk do macierzy odbudowujÄ…cÂ parzystoÅ›Ä‡. Zadanie bÄ™dzie o tyle ciekawe Å¼e dysk ma 4KB sektory i trzeb bÄ™dzie dbaÄ‡ o wyrÃ³wnanie zasobu do rozmiaru sektora, a w przypadku LVM&rsquo;a wyrÃ³wnanie do chunk&rsquo;a z macierzy.
PrawidÅ‚owe wyrÃ³wnanie partycji KupujÄ…c nowy dysk (o pojemnoÅ›ci od 500GB w gÃ³rÄ™), mamy spore szanse Å¼e trafimy na sztukÄ™, ktÃ³ra wykorzystuje 4KB sektory do alokacji danych.">
<meta name=theme-color content="#c64858">
<meta property="og:title" content="LVM na RAID5 i dysku z sektorami 4KB â€¢ TiMoR">
<meta property="og:description" content="Po zakupie nowych dyskÃ³w zamierzam utworzyÄ‡ zdegradowanÄ… macierz RAID5 z dwÃ³ch dyskÃ³w (na trzecim na razie znajdujÄ… siÄ™ dane), potem utworzyÄ‡ wolumen LVM, sformatowaÄ‡ go, przekopiowaÄ‡ dane z pojedynczego dysku na macierz i doÅ‚Ä…czyÄ‡ trzeci dysk do macierzy odbudowujÄ…cÂ parzystoÅ›Ä‡. Zadanie bÄ™dzie o tyle ciekawe Å¼e dysk ma 4KB sektory i trzeb bÄ™dzie dbaÄ‡ o wyrÃ³wnanie zasobu do rozmiaru sektora, a w przypadku LVM&rsquo;a wyrÃ³wnanie do chunk&rsquo;a z macierzy.
PrawidÅ‚owe wyrÃ³wnanie partycji KupujÄ…c nowy dysk (o pojemnoÅ›ci od 500GB w gÃ³rÄ™), mamy spore szanse Å¼e trafimy na sztukÄ™, ktÃ³ra wykorzystuje 4KB sektory do alokacji danych.">
<meta property="og:url" content="https://timor.site/2012/11/lvm-na-raid5-i-dysku-z-sektorami-4kb/">
<meta property="og:site_name" content="timor's site">
<meta property="og:type" content="article"><meta property="og:image" content="https://www.gravatar.com/avatar/cfa9a17577371083824a78c303cc8ed7?s=256"><meta property="article:section" content="posts"><meta property="article:tag" content="bash"><meta property="article:tag" content="ext4"><meta property="article:tag" content="Linux"><meta property="article:tag" content="LVM"><meta property="article:tag" content="mdadm"><meta property="article:tag" content="RAID"><meta property="article:published_time" content="2012-11-07T00:00:00Z"><meta property="article:modified_time" content="2012-11-07T00:00:00Z"><meta name=twitter:card content="summary">
<meta name=generator content="Hugo 0.88.1">
<title>LVM na RAID5 i dysku z sektorami 4KB â€¢ TiMoR</title>
<link rel=canonical href=https://timor.site/2012/11/lvm-na-raid5-i-dysku-z-sektorami-4kb/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#c64858}</style>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-88996819-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class="page type-posts layout-post has-sidebar">
<div class=site><div id=sidebar class=sidebar>
<a class=screen-reader-text href=#main-menu>Skip to Main Menu</a>
<div class=container><section class="widget widget-about sep-after">
<header>
<div class=logo>
<a href=/>
<img src=/favicon.ico>
</a>
</div>
<h2 class="title site-title">
<a href=/>
timor's site
</a>
</h2>
<div class=desc>
Linux configuration, Automation, Security - Sysadmin/DevOps blog
</div>
</header>
</section>
<section class="widget widget-search sep-after">
<header>
<h4 class="title widget-title">Search</h4>
</header>
<form action=/search id=search-form class=search-form>
<label>
<span class=screen-reader-text>Search</span>
<input id=search-term class=search-term type=search name=q placeholder=Search&mldr;>
</label></form>
</section>
<section class="widget widget-sidebar_menu sep-after"><nav id=sidebar-menu class="menu sidebar-menu" aria-label="Sidebar Menu">
<div class=container>
<ul><li class=item>
<a href=/></a></li><li class=item>
<a href=/>Home</a></li><li class="item has-children">
<a href=/categories/howto/>HOWTO</a><button class=sub-menu-toggler>
<span class=screen-reader-text>expand sub menu</span>
<span class=sign></span>
</button>
<ul class=sub-menu><li class=item>
<a href=/categories/tip/>Tips</a></li></ul></li><li class=item>
<a href=/categories/off-topic/>Off-topic</a></li><li class=item>
<a href=/categories/gotowanie/>Gotowanie</a></li><li class=item>
<a href=/about/>About</a></li></ul>
</div>
</nav>
</section></div>
<div class=sidebar-overlay></div>
</div><div class=main><a class=screen-reader-text href=#content>Skip to Content</a>
<button id=sidebar-toggler class=sidebar-toggler aria-controls=sidebar>
<span class=screen-reader-text>Toggle Sidebar</span>
<span class=open><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</span>
<span class=close><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
</span>
</button><div class=header-widgets>
<div class=container>
<style>.widget-breadcrumbs li:after{content:'\2f '}</style>
<section class="widget widget-breadcrumbs sep-after">
<nav id=breadcrumbs>
<ol><li><a href=/>Home</a></li><li><a href=/posts/>Posts</a></li><li><span>LVM na RAID5 i dysku z sektorami 4KB</span></li></ol>
</nav>
</section></div>
</div>
<header id=header class="header site-header">
<div class="container sep-after">
<div class=header-info><p class="site-title title">timor's site</p><p class="desc site-desc">Linux configuration, Automation, Security - Sysadmin/DevOps blog</p>
</div>
</div>
</header>
<main id=content>
<article lang=en class=entry>
<header class="header entry-header">
<div class="container sep-after">
<div class=header-info>
<h1 class=title>LVM na RAID5 i dysku z sektorami 4KB</h1>
</div>
<div class=entry-meta>
<span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
<span class=screen-reader-text>Posted on </span>
<time class=entry-date datetime=2012-11-07T00:00:00Z>2012-11-07</time>
</span>
<span class=byline><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M21 21V20c0-2.76-4-5-9-5s-9 2.24-9 5v1"/><path d="M16 6.37A4 4 0 1112.63 3 4 4 0 0116 6.37z"/></svg>
<span class=screen-reader-text> by </span><a href=/authors/timor>TiMoR</a></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>
15 mins read
</span>
</div>
</div>
</header>
<div class="container entry-content">
<p>Po zakupie nowych dyskÃ³w zamierzam utworzyÄ‡ zdegradowanÄ… macierz RAID5 z dwÃ³ch dyskÃ³w (na trzecim na razie znajdujÄ… siÄ™ dane), potem utworzyÄ‡ wolumen LVM, sformatowaÄ‡ go, przekopiowaÄ‡ dane z pojedynczego dysku na macierz i doÅ‚Ä…czyÄ‡ Â trzeci dysk do macierzy odbudowujÄ…cÂ parzystoÅ›Ä‡. Zadanie bÄ™dzie o tyle ciekawe Å¼e dysk ma 4KB sektory i trzeb bÄ™dzie dbaÄ‡ o wyrÃ³wnanie zasobu do rozmiaru sektora, a w przypadku LVM&rsquo;a wyrÃ³wnanie do chunk&rsquo;a z macierzy.</p>
<h2 id=prawidÅ‚owe-wyrÃ³wnanie-partycji>PrawidÅ‚owe wyrÃ³wnanie partycji</h2>
<p>KupujÄ…c nowy dysk (o pojemnoÅ›ci od 500GB w gÃ³rÄ™), Â mamy spore szanse Å¼e trafimy na sztukÄ™, ktÃ³ra wykorzystuje 4KB sektory do alokacji danych. PoniewaÅ¼ statystyczny rozmiar przechowywanych plikÃ³w roÅ›nie i nawet proste zdjÄ™cie ma powyÅ¼ej 1MB to wykorzystanie blokÃ³w o tym rozmiarze wiÄ™kszym niÅ¼ 512 bajtÃ³w jest jak najbardziej uzasadnione - zresztÄ… wiÄ™kszoÅ›Ä‡ systemÃ³w plikÃ³w i tak wykorzystuje bloki 4~8KB. Jest tylko jedno ALE: jeÅ¼eli nie uwzglÄ™dnimy tego podczas partycjonowania dysku to sektory 4KB systemu plikÃ³w zamiast znajdowaÄ‡ siÄ™ w rÃ³wno w odpowiadajÄ…cych im fizycznych 4KB sektorach dysku - mogÄ… zachodziÄ‡ na 2 sektory fizyczne - w takiej sytuacji kaÅ¼de odwoÅ‚anie to takiego sektora w systemie plikÃ³w wymaga odczytania/zapisanie dwÃ³ch sektorÃ³w fizycznych. Co prawda w dyskach stosuje siÄ™ mechanizmy, ktÃ³re powinny zoptymalizowaÄ‡ takie sytuacje ale jak potwierdzajÄ… benchmarki Åºle wyrÃ³wnane partycja mogÄ… znacznie obniÅ¼yÄ‡ wydajnoÅ›Ä‡ dysku. A jeszcze zabawniej jest jeÅ›li kupimy dysk SSD bo w nich bardzo czÄ™sto fizyczne bloki sÄ… 128~512KB i Å¼eby byÅ‚o zabawniej to bardzo czÄ™sto dyski SSD deklarujÄ… (choÄ‡by przez SMART&rsquo;a) Å¼e majÄ… bloki 512B - SIC!</p>
<p>JeÅ›li mamy fart i nasz dysk raportuje rozmiar fizycznego sektora to moÅ¼emy to sprawdziÄ‡ tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /sys/block/sda/queue/physical_block_size
</code></pre></div><p>U mnie to polecenie zwrÃ³ciÅ‚o 4096 czyli 4KB co jest zgodne z deklaracjÄ… producenta.</p>
<p>Dobre podejÅ›cie do tematu wyrÃ³wnania partycji zaproponowaÅ‚ Teo Tso czyli wybranie takich parametrÃ³w gÅ‚owic/sektorÃ³w na Å›cieÅ¼ce by fdisk automatycznie wyrÃ³wnywaÅ‚ partycje do oczekiwanej przez nas wielkoÅ›ci bloku. Teo proponowaÅ‚ uÅ¼ycie 224 gÅ‚owic i 56 sektorÃ³w - co da wyrÃ³wnanie do 128KB dla wszystkich partycji z wyjÄ…tkiem pierwszej (pierwsza bÄ™dzie wyrÃ³wnana do 4KB o ile nie wymusimy startu z 256 sektora). JeÅ¼eli mamy dysk z blokami 4KB lub pierwszÄ… partycjÄ™ zamierzamy wykorzystaÄ‡ jako np. /boot (gdzie wydajnoÅ›Ä‡ nie ma aÅ¼ takiego duÅ¼ego znaczenia) to jest to ok. Ale jeÅ›li kompatybilnoÅ›Ä‡ z DOS&rsquo;em mamy w powaÅ¼aniu to moÅ¼emy w fdisku utworzyÄ‡ pierwszÄ… partycjÄ™ wyrÃ³wnanÄ… do 128KB lub 1MB.</p>
<p>PrzewaÅ¼nie wolaÅ‚emÂ <em>cfdiska</em> od <em>fdiska</em>Â (bo po co siÄ™ mÄ™czyÄ‡ z topornym interfejsem) ale nie udaÅ‚o mi siÄ™ skubaÅ„ca zmusiÄ‡ by tworzyÅ‚ pierwszÄ… partycjÄ™ w sposÃ³b nie kompatybilny z DOS&rsquo;em. fdisk pomimo topornoÅ›ci po podaniu liczby gÅ‚owic i sektorÃ³w w Å›cieÅ¼ce podpowiedziaÅ‚ mi poprawne wyrÃ³wnanie partycji (a gdybyÅ›my posiadali starszÄ… wersjÄ™, ktÃ³ra nie jest tak sprytna to przynajmniej moÅ¼emy podaÄ‡ rÄ™cznie od ktÃ³rego sektora ma zaczynaÄ‡ siÄ™ partycja).</p>
<h3 id=wyrÃ³wnanie-do-128kb>WyrÃ³wnanie do 128KB</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>fdisk -u -H <span style=color:#ae81ff>224</span> -S <span style=color:#ae81ff>56</span> /dev/sdX
</code></pre></div><p>Opcja -u zmienia domyÅ›lnÄ… jednostkÄ™ na sektory (mamy wtedy mniejsze liczby, ktÃ³re Å‚atwiej siÄ™ przelicza). Dla wyrÃ³wnania do 128KB pierwsza partycja powinna siÄ™ zaczynaÄ‡ na 256 sektorze. Do wyrÃ³wnania do 4KB wystarczy zaczÄ…Ä‡ na 56 sektorze (wystarczajÄ…ce przy czÄ™Å›ci nowszych dyskÃ³w twardych).</p>
<h3 id=wyrÃ³wnanie-do-1mb>WyrÃ³wnanie do 1MB</h3>
<p>JeÅ›li jednak dysponujemy dyskiem SSD z ciÄ™Å¼ko powiedzieÄ‡ jak duÅ¼ym blokiem to lepiej wykorzystaÄ‡ wyrÃ³wnanie do 1MB - zmarnujemy trochÄ™ wiÄ™cej miejsca (tych parÄ™ MB jakoÅ› przeÅ¼yjemy) ale w tym rozmiarze na pewno zmieÅ›ci siÄ™ kaÅ¼dy sektor (a moÅ¼e nawet <em>Erase Block</em>, ktÃ³ry obecnie przewaÅ¼nie ma 512KB choÄ‡ zdarzajÄ… siÄ™ sztuki z 4MB). MoÅ¼na to osiÄ…gnÄ…Ä‡ z ustawieniem 64 gÅ‚owic i 32 sektorÃ³w na Å›cieÅ¼kÄ™, robimy to tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>fdisk -u -H <span style=color:#ae81ff>64</span> -S <span style=color:#ae81ff>32</span> /dev/sdX
</code></pre></div><p>Pierwsza partycja powinna siÄ™ zaczynaÄ‡ na 2048 sektorze dla wyrÃ³wnania do 1MB lub 8192 sektorze jeÅ›li chcemy zaczÄ…Ä‡ od 4MB.</p>
<p>Po odpaleniu fdiska z tymi parametrami wybieramy opcjÄ™ <strong>n</strong> i lecimy dalej zgodnie z podpowiedziami, np.:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>fdisk -u -H <span style=color:#ae81ff>224</span> -S <span style=color:#ae81ff>56</span> /dev/sdc
Polecenie <span style=color:#f92672>(</span>m wyÅ›wietla pomoc<span style=color:#f92672>)</span>: &lt;strong&gt;m&lt;/strong&gt;
Polecenie
 a zmiana flagi rozruchu
 b modyfikacja etykiety dysku BSD
 c zmiana flagi kompatybilnoÅ›ci z DOS-em
 d usuniÄ™cie partycji
 l wypisanie znanych typÃ³w partycji
 m wyÅ›wietlenie tego menu
 &lt;strong&gt;n dodanie nowej partycji&lt;/strong&gt;
 o utworzenie nowej, pustej DOS-owej tablicy partycji
 p wypisanie tablicy partycji
 q zakoÅ„czenie bez zapisywania zmian
 s utworzenie nowej, pustej etykiety dysku Suna
 t zmiana ID systemu partycji
 u zmiana jednostek wyÅ›wietlania/wprowadzania
 v weryfikacja tablicy partycji
 w zapis tablicy partycji na dysk i zakoÅ„czenie
 x dodatkowe funkcje <span style=color:#f92672>(</span>tylko dla ekspertÃ³w<span style=color:#f92672>)</span>
Polecenie <span style=color:#f92672>(</span>m wyÅ›wietla pomoc<span style=color:#f92672>)</span>: &lt;strong&gt;n&lt;/strong&gt;
Partition type:
 p primary <span style=color:#f92672>(</span><span style=color:#ae81ff>0</span> primary, <span style=color:#ae81ff>0</span> extended, <span style=color:#ae81ff>4</span> free<span style=color:#f92672>)</span>
 e extended
Select <span style=color:#f92672>(</span>default &lt;strong&gt;p&lt;/strong&gt;<span style=color:#f92672>)</span>:
Using default response p
Numer partycji <span style=color:#f92672>(</span>1-4, domyÅ›lnie &lt;strong&gt;1&lt;/strong&gt;<span style=color:#f92672>)</span>:
PrzyjÄ™to wartoÅ›Ä‡ domyÅ›lnÄ… <span style=color:#ae81ff>1</span>
Pierwszy sektor <span style=color:#f92672>(</span>2048-15240575, domyÅ›lnie &lt;strong&gt;2048&lt;/strong&gt;<span style=color:#f92672>)</span>:
PrzyjÄ™to wartoÅ›Ä‡ domyÅ›lnÄ… <span style=color:#ae81ff>2048</span>
Ostatni sektor, +sektorÃ³w lub +rozmiar<span style=color:#f92672>{</span>K,M,G<span style=color:#f92672>}</span> <span style=color:#f92672>(</span>2048-15240575, domyÅ›lnie 15240575<span style=color:#f92672>)</span>: &lt;strong&gt;+100M&lt;/strong&gt;
Polecenie <span style=color:#f92672>(</span>m wyÅ›wietla pomoc<span style=color:#f92672>)</span>: &lt;strong&gt;p&lt;/strong&gt;
Dysk /dev/sdc: <span style=color:#ae81ff>7803</span> MB, bajtÃ³w: <span style=color:#ae81ff>7803174912</span>
gÅ‚owic: 224, sektorÃ³w/Å›cieÅ¼kÄ™: 56, cylindrÃ³w: 1214, w sumie sektorÃ³w: <span style=color:#ae81ff>15240576</span>
Jednostka <span style=color:#f92672>=</span> sektorÃ³w, czyli <span style=color:#ae81ff>1</span> * 512 <span style=color:#f92672>=</span> <span style=color:#ae81ff>512</span> bajtÃ³w
Rozmiar sektora <span style=color:#f92672>(</span>logiczny/fizyczny<span style=color:#f92672>)</span> w bajtach: <span style=color:#ae81ff>512</span> / <span style=color:#ae81ff>512</span>
Rozmiar we/wy <span style=color:#f92672>(</span>minimalny/optymalny<span style=color:#f92672>)</span> w bajtach: <span style=color:#ae81ff>512</span> / <span style=color:#ae81ff>512</span>
Identyfikator dysku: 0xc3072e18
UrzÄ…dzenie Rozruch PoczÄ…tek Koniec BlokÃ³w ID System
/dev/sdc1 <span style=color:#ae81ff>2048</span> <span style=color:#ae81ff>206847</span> <span style=color:#ae81ff>102400</span> <span style=color:#ae81ff>83</span> Linux
Polecenie <span style=color:#f92672>(</span>m wyÅ›wietla pomoc<span style=color:#f92672>)</span>: &lt;strong&gt;w&lt;/strong&gt;
Tablica partycji zostaÅ‚a zmodyfikowana!
WywoÅ‚ywanie ioctl<span style=color:#f92672>()</span> w celu ponownego odczytu tablicy partycji.
UWAGA: ponowny odczyt tablicy partycji zakoÅ„czyÅ‚ siÄ™ bÅ‚Ä™dem 16: UrzÄ…dzenie lub zasoby zajÄ™te.
JÄ…dro nadal uÅ¼ywa starej tablicy. Nowa tablica bÄ™dzie uÅ¼ywana po
nastÄ™pnym restarcie systemu albo po uruchomieniu partprobe<span style=color:#f92672>(</span>8<span style=color:#f92672>)</span> lub kpartx<span style=color:#f92672>(</span>8<span style=color:#f92672>)</span>
Synchronizacja dyskÃ³w.
</code></pre></div><h3 id=ps-po-co-w-ogÃ³le-partycjonowaÄ‡---moÅ¼na-uÅ¼yÄ‡-caÅ‚ych-urzÄ…dzeÅ„>P.S. Po co w ogÃ³le partycjonowaÄ‡ - moÅ¼na uÅ¼yÄ‡ caÅ‚ych urzÄ…dzeÅ„</h3>
<p>Co prawda w przypadku gdy zamierzam caÅ‚e dyski poÅ›wiÄ™ciÄ‡ na RAID&rsquo;a mÃ³gÅ‚bym ich nie partycjonowaÄ‡ tylko uÅ¼yÄ‡ caÅ‚ych urzÄ…dzeÅ„ i zadbaÄ‡ tylko by mdadm poprawnie siÄ™ wyrÃ³wnaÅ‚ (co zresztÄ… robi automatycznie do 4KB), ale obawiaÅ‚em siÄ™ jak wzglÄ™dem takich dyskÃ³w zachowajÄ… siÄ™ inne systemy ktÃ³re mam zainstalowane na komputerze - nie chciaÅ‚bym aby przypadkiem uznaÅ‚y Å¼e to jakiÅ› uszkodzony dysk po czym zainicjowaÅ‚y tablicÄ™ partycji&mldr; MoÅ¼e to nieuzasadniona fobia ale wiem Å¼e wzglÄ™dem partycji <em>RAID Autodetect</em> nic takiego mi siÄ™ nie przytrafi ğŸ˜ƒ</p>
<h2 id=tworzenie-macierzy-raid>Tworzenie macierzy RAID</h2>
<p>Jak juÅ¼ utworzymy poÅ¼Ä…dane partycje na pierwszym dysku to musimy je powieliÄ‡ na wszystkich pozostaÅ‚ych dyskach, ktÃ³re zamierzamy wÅ‚Ä…czyÄ‡ do macierzy - najproÅ›ciej zrobiÄ‡ to sfdisk&rsquo;iem:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sfdisk -d /dev/sdX | sfdisk /dev/sdY
</code></pre></div><p>Przy czym dysk sdX to ÅºrÃ³dÅ‚owy dysk z gotowymi partycjami, a dysk sdY to kaÅ¼dy na ktÃ³rym chcemy odtworzyÄ‡ partycje. MoÅ¼na by zrobiÄ‡ na to Å‚adnÄ… pÄ™telkÄ™ jeÅ›li mamy wiÄ™cej tych dyskÃ³w ale celowo tego nie zrobiÄ™ bo jak znam Å¼ycie to kiedyÅ› ktoÅ› to skopiuje ze znakiem nowego wiersza i wrzuci do konsoli&mldr; ğŸ˜€</p>
<p>Teraz tworzÄ™ zdegradowanÄ… (z dwÃ³ch dyskÃ³w) macierz RAID5&mldr; Ale na dobrÄ… sprawÄ™ bezpieczniej byÅ‚oby utworzyÄ‡ macierz RAID1 z dwÃ³ch dyskÃ³w (o ile miejsca byÅ‚oby wystarczajÄ…co na przeniesienie danych) a po przeniesieniu danych na macierz dodanie trzeciego dysku i powiÄ™kszenie macierzy z reshapingiem do RAID5 - postanowiÅ‚em pominÄ…Ä‡ takie rozwiÄ…zanie bo nie baÅ‚em siÄ™ utraty danych, miaÅ‚em dokÅ‚adnÄ… kopiÄ™ na innej macierzy ğŸ˜ƒ</p>
<p>WiÄ™c tworzymy macierz:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mdadm --create /dev/md0 --level<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span> --raid-devices<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> --chunk<span style=color:#f92672>=</span>512k /dev/sdX1 /dev/sdY1
</code></pre></div><p>Na dobrÄ… sprawÄ™ z powyÅ¼szych opcji tylko chunk nadaje siÄ™ do &ldquo;dopasowania&rdquo; - ja mam zamiar utworzyÄ‡ macierz z doÅ›Ä‡ duÅ¼ych zasobÃ³w (3x2TB) i przechowywaÄ‡ na niej raczej duÅ¼e pliki wiÄ™c 512KB wydaje mi siÄ™ dobrÄ… wartoÅ›ciÄ…. GdybyÅ›my jednak potrzebowali wiÄ™kszej liczby I/O dla maÅ‚ych pliczkÃ³w to mniejsza wartoÅ›Ä‡ moÅ¼e byÄ‡ lepsza. Warto zrobiÄ‡ kilka benchmarkÃ³w dla rÃ³Å¼nych wartoÅ›ci chunk&rsquo;a i dopasowaÄ‡ do przewidywanego przez nas obciÄ…Å¼enia.</p>
<p>Aby macierz byÅ‚a widoczne juÅ¼ w czasie startu systemu naleÅ¼y dodatkowo wykonaÄ‡ polecenie:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mdadm --detail --scan &gt;&gt; /etc/mdadm/mdadm.conf
</code></pre></div><p>Warto teÅ¼ w pliku <em>/etc/mdadm/mdadm.conf</em> odkomentowaÄ‡ i wpisaÄ‡ jakieÅ› sensowne wartoÅ›ci dla HOMEHOST, MAILADDR.</p>
<p>I teraz moÅ¼emy odbudowaÄ‡ obraz initrd:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>update-initramfs -u
</code></pre></div><h3 id=optymalizacja-macierzy-raid5>Optymalizacja macierzy RAID5</h3>
<p>Sam proces tworzenia macierzy moÅ¼e zajÄ…Ä‡ kilka/kilkanaÅ›cie godzin - dlatego warto mu pomÃ³c kilkoma zmianami.</p>
<h4 id=speed_limit_xxx>speed_limit_xxx</h4>
<p>Na pierwszy rzut - domyÅ›lne wartoÅ›ci dla minimalnej i maksymalnej prÄ™dkoÅ›ci budowania/regenerowania/odtwarzania macierzy RAID5, moÅ¼na je sprawdziÄ‡:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /proc/sys/dev/raid/speed_limit_max
<span style=color:#ae81ff>200000</span>
cat /proc/sys/dev/raid/speed_limit_min
<span style=color:#ae81ff>1000</span>
</code></pre></div><p>DomyÅ›lnie jest to minimum 1MB/s i maksimum 200MB/s. PodbijajÄ…c minimalnÄ… prÄ™dkoÅ›Ä‡ do 10~50MB/s moÅ¼na kosztem wiÄ™kszego obciÄ…Å¼enia systemu zmusiÄ‡ macierz by odbudowywaÅ‚a siÄ™ szybciej. OsobiÅ›cie uwaÅ¼am tÄ… optymalizacjÄ™ za maÅ‚o znaczÄ…cÄ… bo caÅ‚y mechanizm doÅ›Ä‡ elastycznie reaguje na obciÄ…Å¼enie systemu i jeÅ›li nic nie robimy to prÄ™dkoÅ›ci odbudowy sÄ… doÅ›Ä‡ wysokie. Ale moÅ¼na to zrobiÄ‡ tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#ae81ff>50000</span> &gt; /proc/sys/dev/raid/speed_limit_min
</code></pre></div><p>lub tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sysctl -w dev.raid.speed_limit_min<span style=color:#f92672>=</span><span style=color:#ae81ff>50000</span>
</code></pre></div><h4 id=stripe_cache_size>stripe_cache_size</h4>
<p>Ta optymalizacja pomogÅ‚a mi duÅ¼o - ok. 30% wzrost wydajnoÅ›ci macierzy (rÃ³wnieÅ¼ w czasie odbudowy parzystoÅ›ci). MoÅ¼emy sprawdziÄ‡ wartoÅ›Ä‡ tego parametru, np. tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /sys/block/md0/md/stripe_cache_size
</code></pre></div><p>DomyÅ›lnie jest to wartoÅ›Ä‡ 128 - bida z nÄ™dzÄ…, u mnie ustawienie na 32768 (maksymalna wartoÅ›Ä‡ tego parametru) daÅ‚o najwiÄ™kszy wzrost wydajnoÅ›ci - ale juÅ¼ 8192 znacznie poprawiÅ‚o wydajnoÅ›Ä‡.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#66d9ef>for</span> i in <span style=color:#ae81ff>256</span> <span style=color:#ae81ff>512</span> <span style=color:#ae81ff>1024</span> <span style=color:#ae81ff>2048</span> <span style=color:#ae81ff>4096</span> <span style=color:#ae81ff>8192</span> <span style=color:#ae81ff>16384</span> 32768;
<span style=color:#66d9ef>do</span>
    echo <span style=color:#e6db74>&#34;Testowanie </span>$i<span style=color:#e6db74>&#34;</span>
    echo $i &gt; /sys/block/md0/md/stripe_cache_size
    sync
    echo <span style=color:#ae81ff>3</span> &gt; /proc/sys/vm/drop_caches
    dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/dev/zero of<span style=color:#f92672>=</span>file bs<span style=color:#f92672>=</span>1M count<span style=color:#f92672>=</span><span style=color:#ae81ff>10000</span>
<span style=color:#66d9ef>done</span>

</code></pre></div><h3 id=wyÅ‚Ä…czenie-ncq-dla-wszystkich-dyskÃ³w-w-macierzy>WyÅ‚Ä…czenie NCQ dla wszystkich dyskÃ³w w macierzy</h3>
<p>WydaÅ‚o mi siÄ™ to nieco kontrowersyjne bo NCQ powinno pomagaÄ‡ przy losowych odczytach/zapisach - ale zapuÅ›ciÅ‚em test bonnie++ i okazaÅ‚o siÄ™ Å¼e z wÅ‚Ä…czonym NCQ czasy dostÄ™pu dla niektÃ³rych obciÄ…Å¼eÅ„ rosnÄ… nawet dziesiÄ™ciokrotnie! Warto wiÄ™c sprawdziÄ‡ tÄ… opcjÄ™ pod przewidywanym przez nas scenariuszem obciÄ…Å¼enia.</p>
<p>NCQ dla poszczegÃ³lnych dyskÃ³w moÅ¼na wyÅ‚Ä…czyÄ‡ np. tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#66d9ef>for</span> d in sdb sdc sdd
    <span style=color:#66d9ef>do</span> echo <span style=color:#ae81ff>1</span> &gt; /sys/block/$d/device/queue_depth
<span style=color:#66d9ef>done</span>
</code></pre></div><h3 id=wyÅ‚Ä…czenie-cache-dyskowych>WyÅ‚Ä…czenie cache dyskowych</h3>
<p>WyÅ‚Ä…czenie wbudowanej w dyski pamiÄ™ci cache akurat nie zwiÄ™ksza wydajnoÅ›ci ale w przypadku awarii zasilania (lub innej gwaÅ‚townej awarii systemu) zwiÄ™ksza szanse macierzy na przeÅ¼ycie takiego incydentu. Obecnie wiÄ™kszoÅ›Ä‡ systemÃ³w plikÃ³w korzysta z opÃ³Åºnienia zapisu by bardziej optymalnie zapisaÄ‡ dane na dysku - dlatego gdy zapisujemy dany to najpierw trafiajÄ… one do cache systemowego. Dopiero po sync&rsquo;u sÄ… przesyÅ‚ane do cache dyskowego skÄ…d dopiero po pewnym czasie trafiajÄ… na dysk. WyÅ‚Ä…czenie pamiÄ™ci cache na dyskach &ldquo;usuwa&rdquo; nam to drugie opÃ³Åºnienie.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hdparm -W0 /dev/sd*
</code></pre></div><h3 id=zmiana-parametrÃ³w-odczytu-z-wyprzedzeniem>Zmiana parametrÃ³w odczytu z wyprzedzeniem</h3>
<p>Bardzo waÅ¼nym parametrem majÄ…cym wpÅ‚yw na wydajnoÅ›Ä‡ macierzy jest odpowiednie ustawienie odczytu z wyprzedzeniem. Obecnie ustawionÄ… wartoÅ›Ä‡ moÅ¼emy sprawdziÄ‡ tak (wartoÅ›Ä‡ wyraÅ¼ona jest w 512 bajtowych sektorach):</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>blockdev --getra /dev/md0
</code></pre></div><p>U mnie domyÅ›lnie byÅ‚o 4096 (a na innym starszym systemie tylko 1536) to moÅ¼e byÄ‡ zbyt maÅ‚o dla konfiguracji RAID. WiÄ™ksze wartoÅ›ci moÅ¼na ustawiÄ‡ np. tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>blockdev --setra <span style=color:#ae81ff>65536</span> /dev/md0
</code></pre></div><p>A tak moÅ¼na wykonaÄ‡ sprawdzanie, ktÃ³ra wartoÅ›Ä‡ bÄ™dzie dla nas najbardziej optymalna:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/dev/zero of<span style=color:#f92672>=</span>file bs<span style=color:#f92672>=</span>1M count<span style=color:#f92672>=</span><span style=color:#ae81ff>10000</span>
<span style=color:#66d9ef>for</span> i in <span style=color:#ae81ff>1536</span> <span style=color:#ae81ff>4096</span> <span style=color:#ae81ff>8192</span> <span style=color:#ae81ff>16384</span> <span style=color:#ae81ff>32768</span> <span style=color:#ae81ff>65536</span> <span style=color:#ae81ff>131072</span> <span style=color:#ae81ff>262144</span> 524288;
<span style=color:#66d9ef>do</span>
    echo <span style=color:#e6db74>&#34;Testowanie </span>$i<span style=color:#e6db74>&#34;</span>
    blockdev --setra $i /dev/md0
    sync
    echo <span style=color:#ae81ff>3</span> &gt; /proc/sys/vm/drop_caches
    dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>file of<span style=color:#f92672>=</span>/dev/null bs<span style=color:#f92672>=</span>1M
<span style=color:#66d9ef>done</span>

</code></pre></div><h2 id=tworzenie-zasobu-lvm>Tworzenie zasobu LVM</h2>
<p>MajÄ…c juÅ¼ macierze tworzÄ™ na niej volumen LVM - najpierw przygotowanie zasobu:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pvcreate /dev/md0
</code></pre></div><p>JeÅ¼eli w /etc/lvm/lvm.conf mamy ustawione opcje:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>md_component_detection <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
md_chunk_alignment <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
data_alignment_detection <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</code></pre></div><p>To LVM powinien automatycznie wykryÄ‡ rozmiar chunk&rsquo;a z RAID&rsquo;a i dostosowaÄ‡ swoje metadane, oraz poczÄ…tek danych tak by wszystko byÅ‚o prawidÅ‚owo wyrÃ³wnane wzglÄ™dem macierzy.</p>
<p>JeÅ›li nie mamy szczÄ™Å›cia (bardzo stare jajko/LVM) to bÄ™dziemy musieli uÅ¼yÄ‡ opcji -metadatasize i/lub -dataalignment:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pvcreate --metadatasize 500k /dev/md0
</code></pre></div><p>Teraz ciekawostka - LVM potrzebuje na 192KB na dane nagÅ‚Ã³wkowe kaÅ¼dego wolumenu i kaÅ¼dy utworzony pÃ³Åºniej zasÃ³b byÅ‚by o te 192KB przesuniÄ™ty, wiÄ™c &mldr; trafia nasze wyrÃ³wnanie do 128KB. Dlatego zmuszamy LVM&rsquo;a by zaalokowaÅ‚ nieco wiÄ™cej - tutaj 256KB. OK - ale w poleceniu jest 250 - WTF? I to aby byÅ‚o zabawnie jest to jak najbardziej prawidÅ‚owa wartoÅ›Ä‡ - nie wiem jaka w tym logika, ale by metadane zajmowaÅ‚y 256KB podajemy 250k, by zajmowaÅ‚y 512KB podajemy 500k itd&mldr;</p>
<p>Inaczej jest z opcjÄ… -dataalignment, tutaj najbardziej optymalnie naleÅ¼y podaÄ‡ rozmiar chunk&rsquo;a*iloÅ›Ä‡ aktywnych dyskÃ³w (dla RAID5 odejmujemy jeden) - albo minimalnie rozmiar chunka, np.:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pvcreate --dataalignment 512K /dev/md0
</code></pre></div><p>PoprawnoÅ›Ä‡ moÅ¼emy sprawdziÄ‡ poleceniem:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pvs /dev/md0 -o+pe_start
  PV       VG     Fmt  Attr PSize PFree   1st PE
  /dev/md0 vgraid lvm2 a-   1,82t 488,89g 512,00k
</code></pre></div><p>U mnie <em>1st PE</em> zaczyna siÄ™ na 512KB, wiÄ™c jest OK.</p>
<p>Teraz tworzymy grupÄ™:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vgcreate vgraid /dev/md0
</code></pre></div><p>Polecenie vgcreate posiada parametr -s ktÃ³ry pozwala okreÅ›liÄ‡ do wielokrotnoÅ›ci jakiej wartoÅ›ci bÄ™dzie zaokrÄ…glana wielkoÅ›Ä‡ wolumenu - wartoÅ›Ä‡ ta powinna byÄ‡ wielokrotnoÅ›ciÄ… chunk&rsquo;a z macierzy. DomyÅ›lnie ma ona wartoÅ›Ä‡ 4MB wiÄ™c wszystko bÄ™dzie Å‚adnie wyrÃ³wnane.</p>
<p>I moÅ¼emy zaczÄ…Ä‡ tworzyÄ‡ volumeny logiczne:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>lvcreate -L1T -nsrv vgraid
</code></pre></div><h2 id=formatowanie>Formatowanie</h2>
<p>To teraz formatowanie - tutaj teÅ¼ czasem trzeba siÄ™ wysiliÄ‡ by utworzony przez nas filesystem dziaÅ‚aÅ‚ moÅ¼liwie optymalnie na macierzy i bloku o odpowiednim rozmiarze. W przypadku filesystemu na macierzy sÄ… dwa waÅ¼ne parametry: stride i stripe-width. Stride powinien odpowiadaÄ‡ rozmiarowi podanemu jako chunk podczas tworzenia macierzy ale wyraÅ¼onego w blokach systemu plikÃ³w (domyÅ›lnie 4KB). Stripe-width powinno byÄ‡ ustawione na: stride * N, gdzie N to iloÅ›Ä‡ aktywnych dyskÃ³w w macierzy (dla RAID5 jest to iloÅ›Ä‡ dyskÃ³w minus 1) - przykÅ‚adowo dla bloku 4KB i chunk&rsquo;a 512KB, stride powinien wynosiÄ‡ 128 (512/4). Z kolei stripe-width dla 3 dyskÃ³w to 128*(3-1)=256. PrawidÅ‚owe dobranie tych parametrÃ³w moÅ¼e daÄ‡ wzrost wydajnoÅ›ci rzÄ™du 40% (wedÅ‚ug moich testÃ³w). Teoretycznie na nowszych systemach tworzone systemy plikÃ³w automatycznie powinny wykryÄ‡ najbardziej optymalne wyrÃ³wnanie - moÅ¼emy wiÄ™c sprÃ³bowaÄ‡ puÅ›ciÄ‡ format bez tych parametrÃ³w i pÃ³Åºniej skontrolowaÄ‡ ich wartoÅ›ci poleceniem:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tune2fs -l /dev/vgraid/srv
</code></pre></div><p>Na poczÄ…tek przykÅ‚ad dla systemu plikÃ³w dla maÅ‚ych i Å›rednich plikÃ³w:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkfs.ext4 -E stride<span style=color:#f92672>=</span>128,stripe-width<span style=color:#f92672>=</span>256,resize<span style=color:#f92672>=</span>4T -m0 /dev/vgraid/srv
</code></pre></div><p>Jeden dodatkowy parametr to <em>resize</em> - pozwala on zmieniÄ‡ domyÅ›lne ustawienie maksymalnego rozmiaru do ktÃ³rego moÅ¼emy powiÄ™kszyÄ‡ dany filesystem - domyÅ›lnie jest to wartoÅ›Ä‡ 1000 razy wiÄ™ksza od poczÄ…tkowej wielkoÅ›ci - ciut przekozaczone. MoÅ¼e nie oszczÄ™dzi to duÅ¼o miejsca na dysku (kilkadziesiÄ…t/kilkaset MB) ale na pewno skrÃ³ci czas fsck&rsquo;a.</p>
<p>Kolejny dodatek to <em>-m0</em> ktÃ³re wyÅ‚Ä…cza alokacjÄ™ 5% przestrzeni dyskowej dla root&rsquo;a i usÅ‚ug systemowych - po prostu tutaj tego nie potrzebujÄ™ a 5% z 1TB to 50GB marnujÄ…cego siÄ™ miejsca!</p>
<p>JeÅ›li wiemy Å¼e bÄ™dziemy przechowywaÄ‡ na danym zasobie tylko stosunkowo duÅ¼e pliki to moÅ¼na uÅ¼yÄ‡ takich opcji:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkfs.ext4 -E stride<span style=color:#f92672>=</span>128,stripe-width<span style=color:#f92672>=</span>256,resize<span style=color:#f92672>=</span>4T -T largefile -m0 /dev/vgraid/srv
</code></pre></div><p>Opcja -T to wykorzystanie szablonÃ³w opcji dla tworzenia systemÃ³w plikÃ³w, ktÃ³re moÅ¼na edytowaÄ‡ i dodawaÄ‡ w pliku: /etc/mke2fs.conf. Szablon largefile wykorzystuje mniejszÄ… liczbÄ™ inodÃ³w dla nowego filesystemu, jeÅ›li zamierzamy przechowywaÄ‡ gÅ‚Ã³wnie duÅ¼e pliki to zmniejszy to czas formatowania i pÃ³Åºniejszych fsck&rsquo;Ã³w na tym systemie plikÃ³w.</p>
<h2 id=testowanie-wydajnoÅ›ci>Testowanie wydajnoÅ›ci</h2>
<p>ZalecaÅ‚bym testowanie wydajnoÅ›ci na kolejnych etapach przygotowania dyskÃ³w i powtarzaÄ‡ te same benchmarki po kaÅ¼dej zmianie, tak wiÄ™c testujemy:</p>
<ol>
<li>Na poczÄ…tek <strong>wszystkie</strong> dyski, z ktÃ³rych zamierzamy zbudowaÄ‡ RAID&rsquo;a by wykluczyÄ‡ ewentualne &ldquo;padaki&rdquo;/uszkodzone kable, itp. Np. hdparm/dd na czystym dysku i dodatkowo iozone/bonnie++ na filesystemie by sprawdziÄ‡ czy nie skopaliÅ›my wyrÃ³wnania partycji.</li>
<li>Po zbudowaniu RAID&rsquo;a powtarzamy testy - na caÅ‚ym urzÄ…dzeniu (dd) i po sformatowaniu (iozone/bonnie++) by upewniÄ‡ siÄ™ Å¼e RAID jest prawidÅ‚owo wyrÃ³wnany (przy czym przy RAID5 moÅ¼emy siÄ™ spodziewaÄ‡ wynikÃ³w przy zapisie niÅ¼szych niÅ¼ przy odczycie - jest to OK). Jest to teÅ¼ dobry moment na sprawdzenie kilku optymalizacji dla macierzy: stripe_cache_size, wyÅ‚Ä…czenie NCQ, ustawienia odczytu z wyprzedzeniem, wyÅ‚Ä…czenie cache dyskÃ³w - po kaÅ¼dej z tych zmian ponawiamy benchmarki by upewniÄ‡ siÄ™ Å¼e uzyskaliÅ›my poprawÄ™/lub nie.</li>
<li>Po przygotowaniu LVM&rsquo;a - ponawiamy benchmarki na volumenie by upewniÄ‡ siÄ™ Å¼e nie skopaliÅ›my wyrÃ³wnania partycji/chunk&rsquo;a/itd&mldr;</li>
<li>Dopieszczamy opcje formatowania filesystemu i jego montowania (np. noatime, commit, data, itd) - i znÃ³w posiÅ‚kujemy siÄ™ benchmarkami by potwierdziÄ‡ Å¼e pniemy siÄ™ z wydajnoÅ›ciÄ… w gÃ³rÄ™.</li>
</ol>
<p>JeÅ›li myÅ›licie Å¼e to duÅ¼o to zalecaÅ‚bym powtÃ³rzenie czÄ™Å›ci benchmarkÃ³w 2~3 krotnie by upewniÄ‡ siÄ™ Å¼e wyniki nie odbiegajÄ… znacznie od siebie. Dodatkowo powinniÅ›my <a title="Wymuszenie zwolnienia pamiÄ™ci buforÃ³w dyskowych na Linuxâ€™ie" href=https://gagor.pl/2011/09/wymuszenie-zwolnienia-pamieci-buforow-dyskowych-na-linuxie/>czyÅ›ciÄ‡ przed kaÅ¼dym banchmarkiem cache dyskowy</a>Â aby mieÄ‡ pewnoÅ›Ä‡ Å¼e lepsze wyniki nie sÄ… skutkiem wczytania danych do pamiÄ™ci. Z tego samego powodu jeÅ›li uruchamiamy benchmarki to iloÅ›Ä‡ zapisywanych/odczytywanych danych powinna byÄ‡ minimum 1,5~2 razy wiÄ™ksza niÅ¼ pamieÄ‡ RAM zainstalowana w systemie by na pewnie wszystkie dane nie zmieÅ›ciÅ‚y siÄ™ w cache&rsquo;u. OczywiÅ›cie moÅ¼na to zlaÄ‡ ale pÃ³Åºniej nie ma siÄ™ co dziwiÄ‡ Å¼e system dziaÅ‚a wolno - a na produkcyjnej maszynie duÅ¼o trudniej zaoraÄ‡ caÅ‚Ä… konfiguracjÄ… i utworzyÄ‡ od poczÄ…tku z prawidÅ‚owym wyrÃ³wnaniem.</p>
<p>Zalecane jest wykorzystanie IOZone lub Bonnie++ poniewaÅ¼ testujÄ… one nie tylko prosty sekwencyjny odczyt, ale rÃ³wnieÅ¼ tworzenie/kasowanie plikÃ³w o rÃ³Å¼nych rozmiarach i w rÃ³Å¼nej iloÅ›ci - to pozwala lepiej sprawdziÄ‡ opÃ³Åºnienia wystÄ™pujÄ…ce przy przewidywanych przez nas obciÄ…Å¼eniach oraz upewniÄ‡ siÄ™ Å¼e caÅ‚a zabawa z wyrÃ³wnywaniem zasobÃ³w miaÅ‚a sens. OczywiÅ›cie to tylko zalecenia ğŸ˜‰</p>
<h3 id=hdparm>hdparm</h3>
<p>W przypadku macierzy wykorzystanie prostego hdparm&rsquo;a do testÃ³w:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hdparm -tT /dev/md0
</code></pre></div><p>nie zwrÃ³ci realnych i sensownych wynikÃ³w. Pomiar jest zbyt krÃ³tki by uzyskaÄ‡ sensowne wyniki - lepiej wykorzystaÄ‡ dd z duÅ¼Ä… iloÅ›ciÄ… danych do odczytu.</p>
<h3 id=dd>dd</h3>
<p>NarzÄ™dzie jakÅ¼e prymitywne a tak przydatne. MoÅ¼emy nim zmierzyÄ‡ sekwencyjny odczyt/zapis z/do macierzy i uzyskaÄ‡ bardziej realne wyniki niÅ¼ hdparm&rsquo;em. Wystarczy wymusiÄ‡ operacjÄ™ na ok. dwukrotnie wiÄ™kszej iloÅ›ci danych niÅ¼ iloÅ›Ä‡ pamiÄ™ci RAM. Dodatkowo czyÅ›cimy cache&rsquo;e przed i po mierzÄ…c caÅ‚oÅ›ciowy czas, np. tak:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sync; echo <span style=color:#ae81ff>3</span> &gt; /proc/sys/vm/drop_caches; time <span style=color:#f92672>(</span>dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/dev/zero of<span style=color:#f92672>=</span>/mnt/test/test.img bs<span style=color:#f92672>=</span>1024K count<span style=color:#f92672>=</span><span style=color:#ae81ff>10240</span> <span style=color:#f92672>&amp;&amp;</span> sync<span style=color:#f92672>)</span>
</code></pre></div><p>Jest to szczegÃ³lnie przydatne np. przy dopasowywaniu optymalnej dla nas wartoÅ›ci parametru stripe_cache_size, wystarczy przygotowaÄ‡ odpowiedniÄ… pÄ™tlÄ™:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#66d9ef>for</span> i in <span style=color:#ae81ff>128</span> <span style=color:#ae81ff>256</span> <span style=color:#ae81ff>512</span> <span style=color:#ae81ff>1024</span> <span style=color:#ae81ff>2048</span> <span style=color:#ae81ff>4096</span> <span style=color:#ae81ff>8192</span> <span style=color:#ae81ff>16384</span> 32768;
<span style=color:#66d9ef>do</span>
    echo <span style=color:#e6db74>&#34;stripe_cache_size </span>$i<span style=color:#e6db74>&#34;</span>
    echo $i &gt;Â /sys/block/md0/md/stripe_cache_size
    sync; echo <span style=color:#ae81ff>3</span> &gt; /proc/sys/vm/drop_caches; time <span style=color:#f92672>(</span>dd <span style=color:#66d9ef>if</span><span style=color:#f92672>=</span>/dev/zero of<span style=color:#f92672>=</span>/mnt/test/test.img bs<span style=color:#f92672>=</span>1024K count<span style=color:#f92672>=</span><span style=color:#ae81ff>10240</span> <span style=color:#f92672>&amp;&amp;</span> sync<span style=color:#f92672>)</span>
<span style=color:#66d9ef>done</span>
</code></pre></div><p>Parametr bs okreÅ›la bufor wykorzystywany przy operacjach odczytu/zapisu - moÅ¼na go dostosowaÄ‡ do rozmiaru chunk&rsquo;a/stripe-width/itp.. count okreÅ›la jak duÅ¼o takich buforÃ³w odczytaÄ‡/zapisaÄ‡ - w powyÅ¼szym przypadku jest to 10 tys. jednomegabajtowych buforÃ³w wiÄ™c Å‚Ä…cznie 10GB.</p>
<h3 id=bonnie>bonnie++</h3>
<p>Bonnie++ wymaga nieco przygotowania ale wyniki w moim przypadku bardzo odpowiadaÅ‚y rzeczywistym. Co pokrÃ³tce trzeba zrobiÄ‡:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir /srv/test
chown -R guest:guest /srv/test
bonnie++ -d /srv/test -s 16g -m nazwa_maszyny -f -u guest
</code></pre></div><p>MoÅ¼emy dodaÄ‡ opcjÄ™ <em>-b</em> by po kaÅ¼dej operacji wykonywany byÅ‚ <em>sync</em> - to byÅ‚oby coÅ› podobnego do systemÃ³w bazodanowych lub pocztowych. JeÅ¼eli chcemy zasymulowaÄ‡ standardowe operacje na plikach to nie potrzebujemy tej opcji.</p>
<h3 id=iozone>iozone</h3>
<p>W najprostszym wykonaniu:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>iozone -a
</code></pre></div><p>Wykona to seriÄ™ pomiarÃ³w na rÃ³Å¼nych rozmiarach plikÃ³w, iloÅ›ci powtÃ³rzeÅ„ itd. Najbardziej interesujÄ…ca opcjÄ… w konfiguracji RAID jest &ldquo;Stride read&rdquo;.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>iozone -S <span style=color:#ae81ff>8192</span> -t <span style=color:#ae81ff>1</span>
</code></pre></div><p>Parametr <em>-S</em> przekazuje rozmiar pamiÄ™ci cache procesora - wykorzystywany do alokacji pamiÄ™ci blokami itp (sprawdzaÅ‚em czy to cokolwiek pomoÅ¼e.. ale nie widziaÅ‚em duÅ¼ej rÃ³Å¼nicy).</p>
<p>Parametr -t 1 to benchmark przepustowoÅ›ci dysku a parametr cyfrowy okreÅ›la liczbÄ™ rÃ³wnoczesnych wÄ…tkÃ³w, ktÃ³re bÄ™dÄ… odczytywaÄ‡/zapisywaÄ‡ - moÅ¼na w ten sposÃ³b zasymulowaÄ‡ np. rÃ³wnoczesny streaming dla wielu ÅºrÃ³deÅ‚, itp.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>iozone -S <span style=color:#ae81ff>8192</span> -a -s <span style=color:#ae81ff>40960</span>
</code></pre></div><p>Tutaj parametr <em>-s</em> wskazuje na jakim rozmiarze pliku w KB ma byÄ‡ prowadzony benchmark - tutaj 40MB.</p>
<h2 id=podsumowanie>Podsumowanie</h2>
<p>OgÃ³lnie zadowolony jestem Å¼e udaÅ‚o mi siÄ™ to wszystko zebraÄ‡ w jednym poÅ›cie bo dotychczas miaÅ‚em to zapisane w wielu rÃ³Å¼nych zakÅ‚adkach i spory problem gdy potrzebowaÅ‚em &ldquo;wÅ‚aÅ›nie tego jednego polecenia&rdquo;. Ale niezadowolony jestem z tego Å¼e nie udaÅ‚o mi siÄ™ ustaliÄ‡ caÅ‚oÅ›ci tego postÄ™powania dla dyskÃ³w o sektorach/erase block&rsquo;ach wiÄ™kszych niÅ¼ 4 KB. Chodzi mi szczegÃ³lnie o brak jasnego wyjaÅ›nienia czy RAID5 jest prawidÅ‚owo wyrÃ³wnywany bo wedÅ‚ug jednych tak wÅ‚aÅ›nie jest, a wedÅ‚ug innych tak nie jest. StÄ…d niektÃ³rzy zalecajÄ… by stosowaÄ‡ format metadanych dla macierzy w wersji 0.9 lub 1.0 zamiast 1.2 ale nie ma jasnych ÅºrÃ³deÅ‚ tego rozumowania. Mam nadziejÄ™ Å¼e kiedyÅ› uda mi siÄ™ to jednoznacznie rozsÄ…dziÄ‡ - na pewno zaktualizujÄ™ wtedy tego posta.</p>
<h5 id=ÅºrÃ³deÅ‚ka-na-ktÃ³rych-oparÅ‚em-to-howto>Å¹rÃ³deÅ‚ka na ktÃ³rych oparÅ‚em to HOWTO</h5>
<p><a href=http://serverfault.com/questions/390294/mdadm-raid5-too-slow-when-writing>http://serverfault.com/questions/390294/mdadm-raid5-too-slow-when-writing</a><br>
<a href=http://serverfault.com/questions/250707/why-does-mdadm-write-unusably-slow-when-mounted-synchronously>http://serverfault.com/questions/250707/why-does-mdadm-write-unusably-slow-when-mounted-synchronously</a><br>
<a href=http://serverfault.com/questions/416321/mdadm-raid-5-failed-with-2-drives-while-rebuilding>http://serverfault.com/questions/416321/mdadm-raid-5-failed-with-2-drives-while-rebuilding</a><br>
<a href=http://www.cyberciti.biz/tips/linux-raid-increase-resync-rebuild-speed.html>http://www.cyberciti.biz/tips/linux-raid-increase-resync-rebuild-speed.html</a><br>
<a href=http://askubuntu.com/questions/20852/making-stripe-cache-size-permanent>http://askubuntu.com/questions/20852/making-stripe-cache-size-permanent</a><br>
<a href=http://h3x.no/2011/07/09/tuning-ubuntu-mdadm-raid56>http://h3x.no/2011/07/09/tuning-ubuntu-mdadm-raid56</a><br>
<a href=https://raid.wiki.kernel.org/index.php/Performance>https://raid.wiki.kernel.org/index.php/Performance</a><br>
<a href=http://www.mjmwired.net/kernel/Documentation/md.txt>http://www.mjmwired.net/kernel/Documentation/md.txt</a><br>
<a href=http://wiki.hetzner.de/index.php/Partition_Alignment/en>http://wiki.hetzner.de/index.php/Partition_Alignment/en</a><br>
<a href="http://www.fhgfs.com/wiki/wikka.php?wakka=PartitionAlignment">http://www.fhgfs.com/wiki/wikka.php?wakka=PartitionAlignment</a></p>
<p>O tym Å¼e LVM na RAID5 samÂ siÄ™Â wyrÃ³wnuje:<br>
<a href="http://marc.info/?l=linux-raid&m=126267824425009&w=2">http://marc.info/?l=linux-raid&m=126267824425009&w=2</a><br>
<a href=http://www.redhat.com/archives/linux-lvm/2009-September/msg00092.html>http://www.redhat.com/archives/linux-lvm/2009-September/msg00092.html</a></p>
<p>MDADM metadata format 1.2 wyrownuje sie do 4KiB:<br>
<a href=http://www.redhat.com/archives/linux-lvm/2009-September/msg00092.html>http://www.redhat.com/archives/linux-lvm/2009-September/msg00092.html</a></p>
<p>Kalkulator stride&rsquo;a<br>
<a href=http://busybox.net/~aldot/mkfs_stride.html>http://busybox.net/~aldot/mkfs_stride.html</a></p>
<p>Format raid&rsquo;a:<br>
<a href=https://raid.wiki.kernel.org/index.php/RAID_superblock_formats>https://raid.wiki.kernel.org/index.php/RAID_superblock_formats</a></p>
<p>WyrÃ³wnanie do 4kb - choÄ‡ wydaje mi siÄ™ Å¼e goÅ›ciu robi to na czuja i ledwie mu siÄ™ udaÅ‚o:<br>
<a href=http://blog.bigsmoke.us/2010/05/13/aligning-partitions-with-raid-and-lvm-on-drives-with-4-kb-sectors>http://blog.bigsmoke.us/2010/05/13/aligning-partitions-with-raid-and-lvm-on-drives-with-4-kb-sectors</a></p>
</div>
<footer class=entry-footer>
<div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg>
<span class=screen-reader-text>Categories: </span><a class=category href=/categories/howto/>HOWTO</a></div>
<div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=screen-reader-text>Tags: </span><a class=tag href=/tags/bash/>bash</a>, <a class=tag href=/tags/ext4/>ext4</a>, <a class=tag href=/tags/linux/>Linux</a>, <a class=tag href=/tags/lvm/>LVM</a>, <a class=tag href=/tags/mdadm/>mdadm</a>, <a class=tag href=/tags/raid/>RAID</a></div>
</div>
</footer>
</article>
<nav class=entry-nav>
<div class=container><div class="prev-entry sep-before">
<a href=/2012/11/instalacja-drukarki-i-skanera-brother-dcp-130c-na-ubuntu-12-04/>
<span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>
Previous</span>
<span class=screen-reader-text>Previous post: </span>Instalacja drukarki i skanera Brother DCP-130C na Ubuntu 12.04</a>
</div><div class="next-entry sep-before">
<a href=/2012/11/automatically-compact-couchdb-databases-in-0-11-x/>
<span class=screen-reader-text>Next post: </span>Automatically compact CouchDB databases in version 0.11.x<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg>
</span>
</a>
</div></div>
</nav>
<section id=comments class=comments>
<div class="container sep-before">
<div class=comments-area><div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//gagor-pl.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
</section>
</main>
<footer id=footer class=footer>
<div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu">
<ul><li>
<a href=https://github.com/tgagor target=_blank rel="noopener me">
<span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a>
</li><li>
<a href=https://linkedin.com/in/tgagor target=_blank rel="noopener me">
<span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a>
</li><li>
<a href=https://timor.site/index.xml target=_blank rel="noopener me">
<span class=screen-reader-text>Open Rss account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg>
</a>
</li></ul>
</nav>
</section><div class=copyright>
<p> &copy; 2011-2021 TiMoR Licensed under <a rel=license href="https://creativecommons.org/licenses/by-sa/4.0?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0<img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></p>
</div>
</div>
</footer>
</div>
</div><script>window.__assets_js_src="/assets/js/"</script>
<script src=/assets/js/main.c3bcf2df.js></script>
</body>
</html>