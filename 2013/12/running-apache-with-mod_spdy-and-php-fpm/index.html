<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Running Apache with mod_spdy and PHP-FPM | Tom's Blog</title>
<meta name=keywords content="Apache,PHP,Security"><meta name=description content="SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It"><meta name=author content="timor"><link rel=canonical href=https://gagor.pl/2013/12/running-apache-with-mod_spdy-and-php-fpm/><link crossorigin=anonymous href=/assets/css/stylesheet.27832a74fc514252c1c862beee6260c5b11a6a764515b6f0739175258635baef.css integrity="sha256-J4MqdPxRQlLByGK+7mJgxbEaanZFFbbwc5F1JYY1uu8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://gagor.pl/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pl/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pl/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pl/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pl/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-4TQXK4C4W5"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4TQXK4C4W5",{anonymize_ip:!1})}</script><meta property="og:title" content="Running Apache with mod_spdy and PHP-FPM"><meta property="og:description" content="SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It is faster in most cases by few to several percent. The side effect of using mod_spdy is that it&rsquo;s working well only with thread safe Apache&rsquo;s modules. PHP module for Apache is not thread safe so we need to use PHP as CGI or FastCGI service."><meta property="og:type" content="article"><meta property="og:url" content="https://gagor.pl/2013/12/running-apache-with-mod_spdy-and-php-fpm/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2013-12-16T00:00:00+00:00"><meta property="article:modified_time" content="2013-12-16T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Running Apache with mod_spdy and PHP-FPM"><meta name=twitter:description content="SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It is faster in most cases by few to several percent. The side effect of using mod_spdy is that it&rsquo;s working well only with thread safe Apache&rsquo;s modules. PHP module for Apache is not thread safe so we need to use PHP as CGI or FastCGI service."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://gagor.pl/posts/"},{"@type":"ListItem","position":3,"name":"Running Apache with mod_spdy and PHP-FPM","item":"https://gagor.pl/2013/12/running-apache-with-mod_spdy-and-php-fpm/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Running Apache with mod_spdy and PHP-FPM","name":"Running Apache with mod_spdy and PHP-FPM","description":"SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It is faster in most cases by few to several percent. The side effect of using mod_spdy is that it\u0026rsquo;s working well only with thread safe Apache\u0026rsquo;s modules. PHP module for Apache is not thread safe so we need to use PHP as CGI or FastCGI service.","keywords":["Apache","PHP","Security"],"articleBody":"SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It is faster in most cases by few to several percent. The side effect of using mod_spdy is that itâ€™s working well only with thread safe Apacheâ€™s modules. PHP module for Apache is not thread safe so we need to use PHP as CGI or FastCGI service. CGI is slow - so running mod_spdy for performance gain with CGI is simply pointless. FastCGI is better but itâ€™s not possible to share APC cache in FastCGI mode (ex. using spawn-fcgi), so itâ€™s poor too. Best for PHP is PHP-FPM which is FastCGI service with dynamic process manager and could use full advantages of APC. In such configuration I could switch from apache prefork to worker which should use less resources and be moreÂ predictable.\nInstallation On Squeeze we need to install dot.deb repository - instructions are here:Â http://www.dotdeb.org/instructions/\nThen we could install:\napt-get install apache2-mpm-worker php5-fpm libapache2-mod-fastcgi Now, mod_spdy - packages are available here:Â https://developers.google.com/speed/spdy/mod_spdy/ Choose your architecture.\nwgetÂ https://dl-ssl.google.com/dl/linux/direct/mod-spdy-beta_current_i386.deb dpkg -iÂ mod-spdy-beta_current_i386.deb Installation of this package will add automatically a new apt repository for mod_spdy.\nIf you have Apacheâ€™s module for PHP still installed you should remove it (you wonâ€™t need in anymore):\napt-get purge libapache2-mod-php5 Configuring PHP-FPM First Iâ€™m changing php-fpm default pool configuration file - edit /etc/php5/fpm/pool.d/www.conf\n; I want it to listen on socket, not on port listen = /var/run/php5-fpm/site1.socket ;uncomment to set proper permission for socket listen.owner = www-data listen.group = www-data listen.mode = 0660 ;uncomment and change to - PHP leaks, so kill child after 100 requests pm.max_requests = 100 ; for proper chroot handling we will need also php_admin_value[doc_root] = /var/www/site1 php_admin_value[cgi.fix_pathinfo] = 0 Now restart php-fpm:\nservice php5-fpm restart Connecting Apache with PHP-FPM In VirtualHost paste this:\n\u003cIfModule mod_fastcgi.c\u003e Alias /php5.fcgi /var/www/site1/php5.fcgi FastCGIExternalServer /var/www/site1/php5.fcgi -socket /var/lib/apache2/fastcgi/site1.socket AddType application/x-httpd-fastphp5 .php Action application/x-httpd-fastphp5 /php5.fcgi \u003cDirectory \"/var/www/site1/\"\u003e Order deny,allow Deny from all \u003cFiles \"php5.fcgi\"\u003e Order allow,deny Allow from all \u003c/Files\u003e \u003c/Directory\u003e \u003c/IfModule\u003e Enable needed modules and restart Apache:\na2enmod actions a2enmod fastcgi service apache2 restart SSL SPDY requires encrypted connection so you need configured SSL (virtualhost running on port 443). Typical configuration for SSL looks similar to this:\n# some random stuff - exactly like in you NON SSL configuration :smile: SSLEngine on SSLCertificateFile /etc/ssl/certs/example.com.crt SSLCertificateKeyFile /etc/ssl/private/example.com.priv.key SSLCACertificateFile /etc/ssl/private/ca.crt Testing Should work now ðŸ˜ƒ\nSo, use Chromium, enter the site you just configured and then on second tab go to: chrome://net-internals/#spdy. You should see your site there if itâ€™s running on SPDY.\nYou could also use plugins for Firefox or Chromium to test if site is running on SPDY.\nAdvertise SPDY on HTTP When you test if SPDY is working fine (and is faster in your configuration) you could advertise availability of SPDY protocol on your HTTP VirtualHost. Thanks to that when browser supports SPDY it will use it for faster access. To do this just add header in configuration:\nHeader set Alternate-Protocol \"443:spdy/2\" There are more options that could be used, if you need just check docs here.\n","wordCount":"521","inLanguage":"en","datePublished":"2013-12-16T00:00:00Z","dateModified":"2013-12-16T00:00:00Z","author":{"@type":"Person","name":"timor"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://gagor.pl/2013/12/running-apache-with-mod_spdy-and-php-fpm/"},"publisher":{"@type":"Organization","name":"Tom's Blog","logo":{"@type":"ImageObject","url":"https://gagor.pl/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gagor.pl accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pl/favicon-72x72.png alt aria-label=logo height=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pl/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pl/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pl/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pl/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pl/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://gagor.pl>Home</a>&nbsp;Â»&nbsp;<a href=https://gagor.pl/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Running Apache with mod_spdy and PHP-FPM</h1><div class=post-meta><span title='2013-12-16 00:00:00 +0000 UTC'>2013-12-16</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;timor</div></header><div class=post-content><p>SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It is faster in most cases by few to several percent. The side effect of using <a href=http://code.google.com/p/mod-spdy/>mod_spdy</a> is that it&rsquo;s working well only with thread safe Apache&rsquo;s modules. PHP module for Apache is not thread safe so we need to use PHP as CGI or FastCGI service. CGI is slow - so running mod_spdy for performance gain with CGI is simply pointless. FastCGI is better but it&rsquo;s not possible to share <a href=http://pecl.php.net/package/APC>APC</a> cache in FastCGI mode (ex. using spawn-fcgi), so it&rsquo;s poor too. Best for PHP is <a href=http://php-fpm.org/>PHP-FPM</a> which is FastCGI service with dynamic process manager and could use full advantages of APC. In such configuration I could switch from apache prefork to worker which should use less resources and be moreÂ predictable.</p><h2 id=installation>Installation<a hidden class=anchor aria-hidden=true href=#installation>#</a></h2><p>On Squeeze we need to install dot.deb repository - instructions are here:Â http://www.dotdeb.org/instructions/</p><p>Then we could install:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get install apache2-mpm-worker php5-fpm libapache2-mod-fastcgi
</span></span></code></pre></div><p>Now, mod_spdy - packages are available here:Â https://developers.google.com/speed/spdy/mod_spdy/ Choose your architecture.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wgetÂ https://dl-ssl.google.com/dl/linux/direct/mod-spdy-beta_current_i386.deb
</span></span><span style=display:flex><span>dpkg -iÂ mod-spdy-beta_current_i386.deb
</span></span></code></pre></div><p>Installation of this package will add automatically a new apt repository for mod_spdy.</p><p>If you have Apache&rsquo;s module for PHP still installed you should remove it (you won&rsquo;t need in anymore):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>apt-get purge libapache2-mod-php5
</span></span></code></pre></div><h2 id=configuring-php-fpm>Configuring PHP-FPM<a hidden class=anchor aria-hidden=true href=#configuring-php-fpm>#</a></h2><p>First I&rsquo;m changing php-fpm default pool configuration file - edit <code>/etc/php5/fpm/pool.d/www.conf</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zed data-lang=zed><span style=display:flex><span>; I want it to listen on socket, not on port
</span></span><span style=display:flex><span>listen <span style=color:#f92672>=</span> <span style=color:#f92672>/</span>var/run/php5<span style=color:#f92672>-</span>fpm/site1.socket
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>;uncomment to set proper <span style=color:#66d9ef>permission</span> for socket
</span></span><span style=display:flex><span>listen.owner <span style=color:#f92672>=</span> www<span style=color:#f92672>-</span>data
</span></span><span style=display:flex><span>listen.group <span style=color:#f92672>=</span> www<span style=color:#f92672>-</span>data
</span></span><span style=display:flex><span>listen.mode <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>0660</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>;uncomment and change to <span style=color:#f92672>-</span> PHP leaks, so kill child after <span style=color:#960050;background-color:#1e0010>100</span> requests
</span></span><span style=display:flex><span>pm.max_requests <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>; for proper chroot handling we will need also
</span></span><span style=display:flex><span>php_admin_value[doc_root] <span style=color:#f92672>=</span> <span style=color:#f92672>/</span>var/www/site1
</span></span><span style=display:flex><span>php_admin_value[cgi.fix_pathinfo] <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>0</span>
</span></span></code></pre></div><p>Now restart php-fpm:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>service php5-fpm restart
</span></span></code></pre></div><h2 id=connecting-apache-with-php-fpm>Connecting Apache with PHP-FPM<a hidden class=anchor aria-hidden=true href=#connecting-apache-with-php-fpm>#</a></h2><p>In VirtualHost paste this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>&lt;</span>IfModule mod_fastcgi<span style=color:#f92672>.</span>c<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  Alias <span style=color:#f92672>/</span>php5<span style=color:#f92672>.</span>fcgi <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>www<span style=color:#f92672>/</span>site1<span style=color:#f92672>/</span>php5<span style=color:#f92672>.</span>fcgi
</span></span><span style=display:flex><span>  FastCGIExternalServer <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>www<span style=color:#f92672>/</span>site1<span style=color:#f92672>/</span>php5<span style=color:#f92672>.</span>fcgi <span style=color:#f92672>-</span>socket <span style=color:#f92672>/</span><span style=color:#66d9ef>var</span><span style=color:#f92672>/</span>lib<span style=color:#f92672>/</span>apache2<span style=color:#f92672>/</span>fastcgi<span style=color:#f92672>/</span>site1<span style=color:#f92672>.</span>socket
</span></span><span style=display:flex><span>  AddType application<span style=color:#f92672>/</span>x<span style=color:#f92672>-</span>httpd<span style=color:#f92672>-</span>fastphp5 <span style=color:#f92672>.</span>php
</span></span><span style=display:flex><span>  Action application<span style=color:#f92672>/</span>x<span style=color:#f92672>-</span>httpd<span style=color:#f92672>-</span>fastphp5 <span style=color:#f92672>/</span>php5<span style=color:#f92672>.</span>fcgi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Directory</span> <span style=color:#e6db74>&#34;/var/www/site1/&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    Order deny,allow
</span></span><span style=display:flex><span>    Deny from all
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>Files <span style=color:#e6db74>&#34;php5.fcgi&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      Order allow,deny
</span></span><span style=display:flex><span>      Allow from all
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/</span>Files<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/</span><span style=color:#a6e22e>Directory</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span>IfModule<span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><p>Enable needed modules and restart Apache:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>a2enmod actions
</span></span><span style=display:flex><span>a2enmod fastcgi
</span></span><span style=display:flex><span>service apache2 restart
</span></span></code></pre></div><h3 id=ssl>SSL<a hidden class=anchor aria-hidden=true href=#ssl>#</a></h3><p>SPDY requires encrypted connection so you need configured SSL (virtualhost running on port 443). Typical configuration for SSL looks similar to this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;virtualhost *:443&gt;
</span></span><span style=display:flex><span># some random stuff - exactly like in you NON SSL configuration :smile:
</span></span><span style=display:flex><span>SSLEngine on
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SSLCertificateFile    /etc/ssl/certs/example.com.crt
</span></span><span style=display:flex><span>SSLCertificateKeyFile /etc/ssl/private/example.com.priv.key
</span></span><span style=display:flex><span>SSLCACertificateFile  /etc/ssl/private/ca.crt&lt;/virtualhost&gt;
</span></span></code></pre></div><h2 id=testing>Testing<a hidden class=anchor aria-hidden=true href=#testing>#</a></h2><p>Should work now &#x1f603;<br>So, use Chromium, enter the site you just configured and then on second tab go to: <a href=chrome://net-internals/#spdy>chrome://net-internals/#spdy</a>. You should see your site there if it&rsquo;s running on SPDY.<br>You could also use plugins for <a href=https://addons.mozilla.org/pl/firefox/addon/spdy-indicator/>Firefox</a> or <a href=https://chrome.google.com/webstore/detail/spdy-indicator/mpbpobfflnpcgagjijhmgnchggcjblin>Chromium</a> to test if site is running on SPDY.</p><h3 id=advertise-spdy-on-http>Advertise SPDY on HTTP<a hidden class=anchor aria-hidden=true href=#advertise-spdy-on-http>#</a></h3><p>When you test if SPDY is working fine (and is faster in your configuration) you could advertise availability of SPDY protocol on your HTTP VirtualHost. Thanks to that when browser supports SPDY it will use it for faster access. To do this just add header in configuration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Header set Alternate-Protocol &#34;443:spdy/2&#34;
</span></span></code></pre></div><p>There are more options that could be used, if you need just check <a href=http://www.chromium.org/spdy/spdy-protocol/spdy-protocol-draft2#TOC-Server-Advertisement-of-SPDY-through-the-HTTP-Alternate-Protocol-header>docs here</a>.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://gagor.pl/tags/apache/>Apache</a></li><li><a href=https://gagor.pl/tags/php/>PHP</a></li><li><a href=https://gagor.pl/tags/security/>Security</a></li></ul><nav class=paginav><a class=prev href=https://gagor.pl/2013/12/preparing-video-files-for-streaming-on-website-in-mp4-and-webm-format/><span class=title>Â« Prev</span><br><span>Preparing video files for streaming on website in MP4 and WEBM format</span>
</a><a class=next href=https://gagor.pl/2013/12/re-adding-failed-drive-in-mdadm/><span class=title>Next Â»</span><br><span>Re-adding failed drive in mdadm</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on x" href="https://x.com/intent/tweet/?text=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM&amp;url=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f&amp;hashtags=Apache%2cPHP%2cSecurity"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f&amp;title=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM&amp;summary=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM&amp;source=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f&title=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on whatsapp" href="https://api.whatsapp.com/send?text=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM%20-%20https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on telegram" href="https://telegram.me/share/url?text=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM&amp;url=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Running Apache with mod_spdy and PHP-FPM on ycombinator" href="https://news.ycombinator.com/submitlink?t=Running%20Apache%20with%20mod_spdy%20and%20PHP-FPM&u=https%3a%2f%2fgagor.pl%2f2013%2f12%2frunning-apache-with-mod_spdy-and-php-fpm%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=tgagor/tgagor.github.io issue-term=pathname theme=photon-dark crossorigin=anonymous async></script></article></main><footer class=footer><span><a href=https://gagor.pl>Tom's Blog</a> &copy; 2008-2024</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>