<!doctype html><html lang=en dir=auto data-theme=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>RAID | Tom's Blog</title><meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: raid"><meta name=author content="Tom"><link rel=canonical href=https://gagor.pro/tag/raid/><link crossorigin=anonymous href=/assets/css/stylesheet.8589d32dbd6a5350d7a5ba165adfd8cccf5cc83fe1881d422eae93e27c6c86fe.css integrity="sha256-hYnTLb1qU1DXpboWWt/YzM9cyD/hiB1CLq6T4nxshv4=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://gagor.pro/tag/raid/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>localStorage.getItem("pref-theme")==="light"&&(document.querySelector("html").dataset.theme="light")</script><link rel=webmention href=https://webmention.io/gagor.pro/webmention><link rel=pingback href=https://webmention.io/gagor.pro/xmlrpc><meta name=fediverse:creator content="@tgagor@mastodon.social"><link rel=me href=https://mastodon.social/@tgagor><meta property="og:url" content="https://gagor.pro/tag/raid/"><meta property="og:site_name" content="Tom's Blog"><meta property="og:title" content="RAID"><meta property="og:description" content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="RAID"><meta name=twitter:description content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.avif alt="Page logo" aria-label=logo height=36 width=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://gagor.pro/>Home</a>&nbsp;»&nbsp;<a href=https://gagor.pro/tags/>Tags</a></div><h1>RAID</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img class=u-photo loading=eager fetchpriority=high srcset='https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover_hu_c059e422af14a750.webp 360w,https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover_hu_8f575c6d0fab0e82.webp 480w,https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover_hu_40e4f3aeb8d69523.webp 720w,https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover_hu_8d2abf4b31c74ef9.webp 1080w,https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover_hu_b66a2264dfa5083e.webp 1500w,https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover.webp 1500w' src=https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/cover.webp sizes="(min-width: 768px) 720px, 100vw" width=1500 height=625 alt="[Photo by Markus Winkler from Pexels](https://www.pexels.com/photo/wood-dirty-rope-door-3828944/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Creating fully encrypted ZFS pool</h2></header><div class=entry-content><p>Learn how to create a fully encrypted ZFS pool on Linux, including steps for generating encryption keys and configuring ZFS for secure data storage.</p></div><footer class=entry-footer><span title='2021-11-22 00:00:00 +0000 UTC' class=dt-published>2021-11-22</span>&nbsp;·&nbsp;<span>5 min</span>&nbsp;·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Creating fully encrypted ZFS pool" href=https://gagor.pro/2021/11/creating-fully-encrypted-zfs-pool/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Re-adding failed drive in mdadm</h2></header><div class=entry-content><p>Yesterday I have problem with fglrx witch cause ugly system reset. After that, one of my drives was marked as failed in RAID5 array. Hotspare was automatically used to rebuild array. But this hotspare is the oldest and slowest drive I’ve got…
After rebuild I’ve tested failed drive and it was fine - no bad block, no any other issue - so I wanted it running back in array.
What I do:
...</p></div><footer class=entry-footer><span title='2013-12-12 00:00:00 +0000 UTC' class=dt-published>2013-12-12</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to Re-adding failed drive in mdadm" href=https://gagor.pro/2013/12/re-adding-failed-drive-in-mdadm/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img class=u-photo loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>LVM na RAID5 i dysku z sektorami 4KB</h2></header><div class=entry-content><p>Po zakupie nowych dysków zamierzam utworzyć zdegradowaną macierz RAID5 z dwóch dysków (na trzecim na razie znajdują się dane), potem utworzyć wolumen LVM, sformatować go, przekopiować dane z pojedynczego dysku na macierz i dołączyć trzeci dysk do macierzy odbudowując parzystość. Zadanie będzie o tyle ciekawe że dysk ma 4KB sektory i trzeb będzie dbać o wyrównanie zasobu do rozmiaru sektora, a w przypadku LVM’a wyrównanie do chunk’a z macierzy.
Prawidłowe wyrównanie partycji Kupując nowy dysk (o pojemności od 500GB w górę), mamy spore szanse że trafimy na sztukę, która wykorzystuje 4KB sektory do alokacji danych. Ponieważ statystyczny rozmiar przechowywanych plików rośnie i nawet proste zdjęcie ma powyżej 1MB to wykorzystanie bloków o tym rozmiarze większym niż 512 bajtów jest jak najbardziej uzasadnione - zresztą większość systemów plików i tak wykorzystuje bloki 48KB. Jest tylko jedno ALE: jeżeli nie uwzględnimy tego podczas partycjonowania dysku to sektory 4KB systemu plików zamiast znajdować się w równo w odpowiadających im fizycznych 4KB sektorach dysku - mogą zachodzić na 2 sektory fizyczne - w takiej sytuacji każde odwołanie to takiego sektora w systemie plików wymaga odczytania/zapisanie dwóch sektorów fizycznych. Co prawda w dyskach stosuje się mechanizmy, które powinny zoptymalizować takie sytuacje ale jak potwierdzają benchmarki źle wyrównane partycja mogą znacznie obniżyć wydajność dysku. A jeszcze zabawniej jest jeśli kupimy dysk SSD bo w nich bardzo często fizyczne bloki są 128512KB i żeby było zabawniej to bardzo często dyski SSD deklarują (choćby przez SMART’a) że mają bloki 512B - SIC!
...</p></div><footer class=entry-footer><span title='2012-11-07 00:00:00 +0000 UTC' class=dt-published>2012-11-07</span>&nbsp;·&nbsp;<span>15 min</span>&nbsp;·&nbsp;<span class='p-author h-card'>Tom<img class=u-photo src=https://gagor.pro/author/tom/avatar.avif alt=Tom style=display:none hidden></span></footer><a class=entry-link aria-label="post link to LVM na RAID5 i dysku z sektorami 4KB" href=https://gagor.pro/2012/11/lvm-na-raid5-i-dysku-z-sektorami-4kb/></a></article></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2026</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=https://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8d51d5292abd4c77bad90db038659671"}'></script><script defer src=https://analytics.ahrefs.com/analytics.js data-key=ngiuUolR4+T0MnN5eV7I/A async></script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>