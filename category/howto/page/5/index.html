<!doctype html><html lang=en dir=auto data-theme=dark><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HOWTO | Tom's Blog</title><meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: howto"><meta name=author content="Tom"><link rel=canonical href=https://gagor.pro/category/howto/><link crossorigin=anonymous href=/assets/css/stylesheet.445a292061a10229202a91596acfedd8353a3b060fc3c0cbe20647e786d5ca7e.css integrity="sha256-RFopIGGhAikgKpFZas/t2DU6OwYPw8DL4gZH54bVyn4=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://gagor.pro/category/howto/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>localStorage.getItem("pref-theme")==="light"&&(document.querySelector("html").dataset.theme="light")</script><meta name=fediverse:creator content="@tgagor@mastodon.social"><link rel=me href=https://mastodon.social/@tgagor><meta property="og:url" content="https://gagor.pro/category/howto/"><meta property="og:site_name" content="Tom's Blog"><meta property="og:title" content="HOWTO"><meta property="og:description" content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="HOWTO"><meta name=twitter:description content="DevOps blog exploring Linux configuration, containerization, automation, security, and leadership insights, plus a curated bookshelf for IT pros."></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.avif alt aria-label=logo height=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://gagor.pro/>Home</a>&nbsp;Â»&nbsp;<a href=https://gagor.pro/categories/>Categories</a></div><h1>HOWTO</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Install WordPress from command-line</h2></header><div class=entry-content><p>I never tried it before but today I needed to install WordPressâ€¦ From command line only. And there is a way to do this with wp-cliâ€‰ external link .
WP-CLI installation First some requirements (as root):
apt-get install php5-cli php5-mysql mysql-client curl And now installation of wp-cli (as root too):
curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar chmod +x wp-cli.phar mv wp-cli.phar /usr/local/bin/wp Check if itâ€™s working:
...</p></div><footer class=entry-footer><span title='2016-02-15 00:00:00 +0000 UTC'>2016-02-15</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Install WordPress from command-line" href=https://gagor.pro/2016/02/install-wordpress-from-command-line/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Install Docker Compose</h2></header><div class=entry-content><p>When I started playing with Docker I was running a lot of commands to build image, delete containers running on old image, run containers based on new image, etcâ€¦ A lot of log commands with links, volumes, etcâ€¦
Then I started searching for something to automate this task and here I get to docker-compose command, this is how you may install1 it:
Install with Pip pip install docker-compose And install additional bash completions2 (run as root):
...</p></div><footer class=entry-footer><span title='2016-02-12 00:00:00 +0000 UTC'>2016-02-12</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Install Docker Compose" href=https://gagor.pro/2016/02/install-docker-compose/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Manual installation of Docker on Debian/Ubuntu</h2></header><div class=entry-content><p>Iâ€™ve played with Docker a little in it early days but didnâ€™t stick for longer with it. Itâ€™s stable now so I wanted to check how itâ€™s running now.
I really canâ€™t accept this method of installation:
curl -fsSL https://get.docker.com/ | sh I think that world is going to itâ€™s end when I see such scritpsâ€¦ I prefer to do this manually, knowing exactly what I have to do.
Install prerequisites:
...</p></div><footer class=entry-footer><span title='2016-02-11 00:00:00 +0000 UTC'>2016-02-11</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Manual installation of Docker on Debian/Ubuntu" href=https://gagor.pro/2016/02/manual-installation-of-docker-on-debian-ubuntu/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Some useful commands in Docker</h2></header><div class=entry-content><p>I started playing with Docker and here I will write some commands that where not so obvious at beginning ðŸ˜ƒ
List running containers:
docker ps List also not running containers:
docker ps -a Remove all containers (be careful with that):
docker rm $(docker ps -a -q) Remove all images:
docker rmi $(docker images -q) Docker wonâ€™t remove any old volumes used by containers, so after some time you may be interested in deleting them all:
...</p></div><footer class=entry-footer><span title='2016-02-11 00:00:00 +0000 UTC'>2016-02-11</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Some useful commands in Docker" href=https://gagor.pro/2016/02/some-useful-commands-in-docker/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Mass replace in WordPress posts via MySQL query</h2></header><div class=entry-content><p>I was doing a lot of changes to my old posts, switched to HTTPS, etc. Sometimes it was useful to change some particular text in all my old posts at a time, but there is no such feature in WordPress. But WordPress runs on MySQL and I could use SQL query to update such posts.
Make backup - itâ€™s not required but strongly advised ðŸ˜ƒ
Now use this query as template to replace in place whatever you need:
UPDATE wp_posts SET post_content = REPLACE(post_content, " ", ""); You should see something like:
...</p></div><footer class=entry-footer><span title='2016-02-09 00:00:00 +0000 UTC'>2016-02-09</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Mass replace in WordPress posts via MySQL query" href=https://gagor.pro/2016/02/mass-replace-in-wordpress-posts-via-mysql-query/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Use www.horizon.tv with Pipelight/Silverlight on Linux/Ubuntu</h2></header><div class=entry-content><p>From few days I have access to UPCâ€™s www.horizon.tvâ€‰ external link platform - until now it was useless on Linux. But there is Pipelight that will use Wine to emulate Silverlight on Linux and itâ€™s working pretty well - youâ€™re just few commands away from achieving that:
# stop browser killall firefox # remove old version if you have it sudo apt-get remove pipelight Now configure repos and install packages:
...</p></div><footer class=entry-footer><span title='2016-02-09 00:00:00 +0000 UTC'>2016-02-09</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Use www.horizon.tv with Pipelight/Silverlight on Linux/Ubuntu" href=https://gagor.pro/2016/02/use-www-horizon-tv-with-pipelight-silverlight-on-linux-ubuntu/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Prepare for DoS like Cloudflare do</h2></header><div class=entry-content><p>I watched nice presentation about how Cloudflare protects itself against DoS. Most of us are not able to do that exactly like them but some of tips were general enough to be used on typical web front server.
I took notes from this presentation and presented here. Thanks to Marek agreement I also reposted all examples (in easier to copy paste way).
Howto prepare against ACK/FIN/RST/X-mas flood Use conntrack rule:
...</p></div><footer class=entry-footer><span title='2016-02-05 00:00:00 +0000 UTC'>2016-02-05</span>&nbsp;Â·&nbsp;<span>4 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Prepare for DoS like Cloudflare do" href=https://gagor.pro/2016/02/prepare-for-dos-like-cloudflare-do/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Zeitgeist activity.sqlite-wal getting huge</h2></header><div class=entry-content><p>I was looking at backup task running on my desk and saw that itâ€™s spending a lot of time on ~/.local/share/zeitgeist directory. I checked and it had 4.6GB:
du -sh ~/.local/share/zeitgeist/* 118M activity.sqlite 44M activity.sqlite.bck 32K activity.sqlite-shm 4,4G activity.sqlite-wal 311M fts.index WTF? Fortunately I found hereâ€‰ external link that I could easily delete some of this:
zeitgeist-daemon --quit Now check that itâ€™s not running:
...</p></div><footer class=entry-footer><span title='2016-02-04 00:00:00 +0000 UTC'>2016-02-04</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Zeitgeist activity.sqlite-wal getting huge" href=https://gagor.pro/2016/02/zeitgeist-activity-sqlite-wal-getting-huge/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>Optimize Nginx for performance</h2></header><div class=entry-content><p>There are many possible real life cases and not all optimization technics will be suitable for you but I hope it will be a good starting place.
Also you shouldnâ€™t copy paste examples with faith that they will make your server fly ðŸ˜ƒ You have to support your decisions with excessive tests and help of monitoring system (ex. Grafana ).
Cache static and dynamic content Setting caching static and dynamic content strategy may offload your server from additional load from repetitive downloads of same, rarely updated files. This will make your site to load faster for frequent visitors.
...</p></div><footer class=entry-footer><span title='2016-01-14 00:00:00 +0000 UTC'>2016-01-14</span>&nbsp;Â·&nbsp;<span>7 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to Optimize Nginx for performance" href=https://gagor.pro/2016/01/optimize-nginx-for-performance/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://gagor.pro/generic-cover.webp alt="[Photo by Tima Miroshnichenko](https://www.pexels.com/photo/close-up-view-of-system-hacking-in-a-monitor-5380664/)"></figure><header class=entry-header><h2 class=entry-hint-parent>XenServer - export VM to file</h2></header><div class=entry-content><p>Sometime you need to make quick and dirty image backup of VM running on XenServer and this post is about such case ðŸ˜ƒ
List machines:
xl list Name ID Mem VCPUs State Time(s) Domain-0 0 4066 8 r----- 3526567.3 webfront1.example.com 1 4096 4 r----- 3186487.2 webfront2.example.com 2 2048 2 -b---- 920408.2 Now you may export one:
xe vm-export vm=webfront1.example.com filename=/srv/backup/webfront.xva Export succeeded You may also use uuid for that - list machines with xe vm-list (best with less) and then:
...</p></div><footer class=entry-footer><span title='2016-01-12 00:00:00 +0000 UTC'>2016-01-12</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Tom</span></footer><a class=entry-link aria-label="post link to XenServer - export VM to file" href=https://gagor.pro/2016/01/xenserver-export-vm-to-file/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/category/howto/page/4/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/category/howto/page/6/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2025</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=https://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8d51d5292abd4c77bad90db038659671"}'></script><script defer src=https://analytics.ahrefs.com/analytics.js data-key=ngiuUolR4+T0MnN5eV7I/A async></script><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>