<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Tom's Blog</title>
<meta name=keywords content><meta name=description content="posts | tom's blog"><meta name=author content="timor"><link rel=canonical href=https://gagor.pro/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.54d9f8673f7336b5aaf6aed1f553f58f41d018b0cf41d3fd49e352ff367f9312.css integrity="sha256-VNn4Zz9zNrWq9q7R9VP1j0HQGLDPQdP9SeNS/zZ/kxI=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-4F5HJ7RNKM"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4F5HJ7RNKM",{anonymize_ip:!1})}</script><meta property="og:title" content="Posts"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:type" content="website"><meta property="og:url" content="https://gagor.pro/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://gagor.pro/posts/"}]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-72x72.png alt aria-label=logo height=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://gagor.pro/>Home</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Tracking users by nickname on WordPress using Google Analytics</h2></header><div class=entry-content><p>Some time ago I write article about tracking nicknames of users (from comments) on a WordPress blog with Piwik . This time I‚Äôm doing same but for Google Analytics.
I‚Äôm using Google Analytics‚Äâ external link plugin for WordPress so I‚Äôve edited googleanalytics.php file to add some additional code for user tracking:
&lt;script type="text/javascript"> var i,x,y,ARRcookies=document.cookie.split(";"); var comment_author = ""; for (i=0;i&lt;ARRcookies.length;i++) { x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("=")); y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1); x=x.replace(/^\s+|\s+$/g,""); if (x.indexOf("comment_author") != -1 && x....</p></div><footer class=entry-footer><span title='2014-01-07 00:00:00 +0000 UTC'>2014-01-07</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Tracking users by nickname on WordPress using Google Analytics" href=https://gagor.pro/2014/01/tracking-users-by-nickname-on-wordpress-using-google-analytics/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Apache - precompressing static files with gzip</h2></header><div class=entry-content><p>Some time ago I‚Äôve show how to precompress js and css file with gzip to be available for Nginx‚Äôs mod_gzip. In default configuration Apache don‚Äôt have such module but similar functionality could be achieved with few custom rewirtes.
Basically we will start with these rewrites to serve gzipped CSS/JS files if they exist and the client accepts gzip compression:
RewriteEngine on RewriteCond %{HTTP:Accept-encoding} gzip RewriteCond %{REQUEST_FILENAME}\.gz -s RewriteRule ^(.*)\.(js|css)$ $1\.$2\.gz [QSA] Then we need to setup proper content types for such compressed files - I know how to do this in two ways:...</p></div><footer class=entry-footer><span title='2013-12-27 00:00:00 +0000 UTC'>2013-12-27</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Apache - precompressing static files with gzip" href=https://gagor.pro/2013/12/apache-precompressing-static-files-with-gzip/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Android: Xposed + AppOps - reclaim control over installed applications permissions</h2></header><div class=entry-content><p>I‚Äôm happy owner of Galaxy Nexus 7 and lately I updated my tablet to Android 4.4 Kitkat. One of features I most expected was ability to block some permissions of some applications. Such setting was available in 4.4 version but was removed in latest 4.4.2 - Google didn‚Äôt explain it exactly why. I don‚Äôt like when for ex. game need: camera or GPS access - for what I asked?
But there is new app so called App Ops that unhides build-in interface allowing edit of application permissions....</p></div><footer class=entry-footer><span title='2013-12-17 00:00:00 +0000 UTC'>2013-12-17</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Android: Xposed + AppOps - reclaim control over installed applications permissions" href=https://gagor.pro/2013/12/android-xposed-appops-reclaim-control-over-installed-applications-permissions/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Generate ECDSA key with OpenSSL</h2></header><div class=entry-content><p>After the last NSA scandal I‚Äôve found some time to read some texts about PFS and ECDSA keys lately. I always used RSA keys but wanted to give a try to ECDSA so I wanted to give it a try (test performance, etc). Here is how I‚Äôve done it.
Firstly find your favorite curve. A short tip about bit length and complexity could be found here. From it you will now that using 256 bit ECDSA key should be enough for next 10-20 years....</p></div><footer class=entry-footer><span title='2013-12-17 00:00:00 +0000 UTC'>2013-12-17</span>&nbsp;¬∑&nbsp;5 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Generate ECDSA key with OpenSSL" href=https://gagor.pro/2013/12/generate-ecdsa-key-with-openssl/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Delete audio track from mkv file</h2></header><div class=entry-content><p>Lately I tried to remove some streams from MKV file - I wanted: video, audio in my language and no subtitles. I achieved it with mkvtoolnix utils.
Firstly I have to identify streams in file:
$ mkvmerge -i input_file.mkv File 'test.mkv': container: Matroska Track ID 0: video (V_MPEG4/ISO/AVC) Track ID 1: audio (A_DTS) Track ID 2: audio (A_AC3) Track ID 3: audio (A_DTS) Track ID 4: audio (A_AC3) Track ID 5: subtitles (S_TEXT/UTF8) Track ID 6: subtitles (S_TEXT/UTF8) Chapters: 16 entries You could use more verbose tool mkvinfo for that purpose too....</p></div><footer class=entry-footer><span title='2013-12-16 00:00:00 +0000 UTC'>2013-12-16</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Delete audio track from mkv file" href=https://gagor.pro/2013/12/delete-audio-track-from-mkv-file/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Preparing video files for streaming on website in MP4 and WEBM format</h2></header><div class=entry-content><p>Some time ago I prepared a PC that was responsible for batch encoding of movies to formats suitable for web players (such as. Video.js‚Äâ external link , JW Player‚Äâ external link , Flowplayer‚Äâ external link , etc.)
I used HandBrake for conversion to MP4 format (becase this soft was the fastest one) and ffmpeg (aka avconv in new version) for two pass encoding to WEBM.
Below are commands used by me for that conversion:...</p></div><footer class=entry-footer><span title='2013-12-16 00:00:00 +0000 UTC'>2013-12-16</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Preparing video files for streaming on website in MP4 and WEBM format" href=https://gagor.pro/2013/12/preparing-video-files-for-streaming-on-website-in-mp4-and-webm-format/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Running Apache with mod_spdy and PHP-FPM</h2></header><div class=entry-content><p>SPDY is new protocol proposed by Google as an alternative for HTTP(S). Currently Chrome and Firefox browsers are using it as default if available on server. It is faster in most cases by few to several percent. The side effect of using mod_spdy‚Äâ external link is that it‚Äôs working well only with thread safe Apache‚Äôs modules. PHP module for Apache is not thread safe so we need to use PHP as CGI or FastCGI service....</p></div><footer class=entry-footer><span title='2013-12-16 00:00:00 +0000 UTC'>2013-12-16</span>&nbsp;¬∑&nbsp;3 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Running Apache with mod_spdy and PHP-FPM" href=https://gagor.pro/2013/12/running-apache-with-mod_spdy-and-php-fpm/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Re-adding failed drive in mdadm</h2></header><div class=entry-content><p>Yesterday I have problem with fglrx witch cause ugly system reset. After that, one of my drives was marked as failed in RAID5 array. Hotspare was automatically used to rebuild array. But this hotspare is the oldest and slowest drive I‚Äôve got‚Ä¶
After rebuild I‚Äôve tested failed drive and it was fine - no bad block, no any other issue - so I wanted it running back in array.
What I do:...</p></div><footer class=entry-footer><span title='2013-12-12 00:00:00 +0000 UTC'>2013-12-12</span>&nbsp;¬∑&nbsp;2 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Re-adding failed drive in mdadm" href=https://gagor.pro/2013/12/re-adding-failed-drive-in-mdadm/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Ansible - Dynamicaly update /etc/hosts files on target servers</h2></header><div class=entry-content><p>I was configuring GlusterFS on few servers using Ansible‚Äâ external link and have a need to update /etc/hosts with hostnames for easier configuration. I found this one working:
- name: Update /etc/hosts lineinfile: dest=/etc/hosts regexp='.*{{item}}$' line='{{hostvars.{{item}}.ansible_default_ipv4.address}} {{item}}' state=present with_items: '{{groups.somegroup}}' Source: http://xmeblog.blogspot.com/2013/06/ansible-dynamicaly-update-etchosts.html‚Äâ external link</p></div><footer class=entry-footer><span title='2013-12-11 00:00:00 +0000 UTC'>2013-12-11</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Ansible - Dynamicaly update /etc/hosts files on target servers" href=https://gagor.pro/2013/12/ansible-dynamicaly-update-etc-hosts-files-on-target-servers/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Reset user password in your own Ghost Blog</h2></header><div class=entry-content><p>I‚Äôve started testing new Ghost blogging platform for a while on a virtual machine before I take decision about switching to it (or maybe won‚Äôt)‚Ä¶ After few days, I wanted to go forward with more testing and stuck on ‚Äúe-mail and password‚Äù login prompt üòÉ
I‚Äôve started looking into files and found ghost_dir/content/data/ghost-dev.db SQLite database. It can be opened like that:
sqlite3 content/data/ghost-dev.db Then you could see whats your mail (and other info):...</p></div><footer class=entry-footer><span title='2013-11-28 00:00:00 +0000 UTC'>2013-11-28</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;timor</footer><a class=entry-link aria-label="post link to Reset user password in your own Ghost Blog" href=https://gagor.pro/2013/11/reset-user-password-in-your-own-ghost-blog/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/posts/page/10/>¬´&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/posts/page/12/>Next&nbsp;&nbsp;¬ª</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2024</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>