<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HOWTO | Tom's Blog</title>
<meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: howto"><meta name=author content="timor"><link rel=canonical href=https://gagor.pro/categories/howto/><link crossorigin=anonymous href=/assets/css/stylesheet.a686254d65e0d2d3c8431ef3cb68c992b4ccdcc8a7d89e60d7a491a5b2cbabbe.css integrity="sha256-poYlTWXg0tPIQx7zy2jJkrTM3Min2J5g16SRpbLLq74=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://gagor.pro/categories/howto/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="HOWTO"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:type" content="website"><meta property="og:url" content="https://gagor.pro/categories/howto/"><meta name=twitter:card content="summary"><meta name=twitter:title content="HOWTO"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.png alt aria-label=logo height=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://gagor.pro/>Home</a>&nbsp;»&nbsp;<a href=https://gagor.pro/categories/>Categories</a></div><h1>HOWTO</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Sprawdzenie który proces obciąża dyski</h2></header><div class=entry-content><p>Na jednym z serwerów zauważyłem dziwny wzrost obciążenia. Tzw. LOAD od kilku dni po woli rósł. top pokazywał że dwa rdzenie CPU czekają na dane z dysku - tzw. io wait na poziomie 80~90% ale żaden proces w znaczącym stopniu nie obciążał CPU.
Jest kilka narzędzi (iostat, wmstat), które pozwalają monitorować obciążenie dysków ale ja nie szukałem informacji czy i w jakim stopniu dyski są obciążone - wiedziałem że są. Chciałem dowiedzieć się który proces generuje to obciążenie - by móc go ubić 😃...</p></div><footer class=entry-footer><span title='2011-09-02 00:00:00 +0000 UTC'>2011-09-02</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Sprawdzenie który proces obciąża dyski" href=https://gagor.pro/2011/09/sprawdzenie-ktory-proces-obciaza-dyski/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>JPGraph, wykresy z PHP’a</h2></header><div class=entry-content><p>Onego czasu próbowałem znaleźć coś co ułatwiłoby mi rysowanie prostych wykresów w PHP’ie inaczej niż z palca w GD. Kumpel polecił mi JPGraph.
JPGraph to świetna sprawa, do generowania statystyk jak chociażby na mojej stronie, ale biblioteka potrafi dużo więcej…
Załóżmy, że ze stronki zbieramy do bazy takie rzeczy jak: datę, adres IP, ilość połączeń z tego adresu. Prosta tabela (przykład w Postgre SQL’u):
CREATE TABLE wizyty ( pid serial NOT NULL, "data" date NOT NULL DEFAULT ('now'::text)::date, odslony integer NOT NULL DEFAULT 1, CONSTRAINT visits_pkey PRIMARY KEY (id) ); Dane z takiej tabeli można łatwo wyciągnąć jednym select’em:...</p></div><footer class=entry-footer><span title='2011-08-29 00:00:00 +0000 UTC'>2011-08-29</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to JPGraph, wykresy z PHP’a" href=https://gagor.pro/2011/08/jpgraph-wykresy-z-phpa/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Konfiguracja backportów na Debianie</h2></header><div class=entry-content><p>Tak się składa, że Debian ze względu na stosunkowo rzadkie wydawanie kolejnych wersji szybko staje się niezbyt świeży a dostępne w nim pakiety często nie spełaniają naszych oczekiwań. Nie ma najnowszej wersji Subversion… Nie ma mod_security itd, itp…
Rozwiązaniem tego problemu może być instalacja pakietów z testowej gałęzi ale można polec na zależnościach. Można też kompilować ze źródeł… Tak czy siak w obu przypadkach aktualizacja i utrzymanie tak zmodyfikowanego systemu byłoby jak wrzód na zadku....</p></div><footer class=entry-footer><span title='2011-08-29 00:00:00 +0000 UTC'>2011-08-29</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Konfiguracja backportów na Debianie" href=https://gagor.pro/2011/08/konfiguracja-backportow-na-debianie/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Optymalizacja PHP z eAccelerator’em</h2></header><div class=entry-content><p>Przy okazji wykonywania kilku drobnych optymalizacji swojej stronki natknąłem się na eAccelerator’a. Ciekawy projekt, który w sposobie działania przypomina Zend Optimizer’a ale ma jedną zasadniczą zaletę - jest darmowy 😃
Niestety nie ma go w repozytoriach Debiana, więc trzeba go sobie skompilować - cały proces jest dość prosty. Zaczynamy od pobrania najświeższej paczki, obecnie jest to wersja 0.9.5.3:
Pobierz eAccelerator  external link (ostatnio miałem problem z tym linkiem więc proponuję pogooglać)...</p></div><footer class=entry-footer><span title='2011-08-29 00:00:00 +0000 UTC'>2011-08-29</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Optymalizacja PHP z eAccelerator’em" href=https://gagor.pro/2011/08/optymalizacja-php-z-eacceleratorem/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Statystyki odwiedzin dla wielu serwisów z AWStats</h2></header><div class=entry-content><p>Co prawda na swojej stronie zrobiłem kilka podstawowych statystyk i coś tam sobie loguję do bazy danych, ale gdyby się chwilę zastanowić to przecież to samo robi serwer www - wrzuca do logów każde zapytanie HTTP, kod błędu, nazwę agenta, itd. Dublowanie tych danych nie jest najbardziej optymalne.
Stąd też chwilę pogooglałem i znalazłem świetny Open Source’owy projekt: AWStats, który jest webowym analizatorem logów dla serwerów HTTP, FTP i SMTP....</p></div><footer class=entry-footer><span title='2011-08-29 00:00:00 +0000 UTC'>2011-08-29</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Statystyki odwiedzin dla wielu serwisów z AWStats" href=https://gagor.pro/2011/08/statystyki-odwiedzin-dla-wielu-serwisow-z-awstats/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Certyfikaty SelfSigned</h2></header><div class=entry-content><p>Certyfikaty oparte o SSL stanowią obecnie podstawę bezpieczeństwa wielu usług sieciowych zaczynając od HTTP, przez POPS, IMAPS, itd… Niestety zakupienie certyfikatu w organizacjach jak VeriSgin czy Thawte jest dość kosztowe, a jeżeli potrzebujemy kilka certyfikatów to często na lokalne potrzeby jest to po prostu nie opłacalne.
Postaram się przedstawić wersję “ekonomiczną” certyfikacji 😃
Generowanie Certificate Signing Request Pierwszym etapem generowania certyfikatu jest przygotowanie Certificate Signing Request, czyli czegoś w rodzaju “prośby” o certyfikat....</p></div><footer class=entry-footer><span title='2011-08-27 00:00:00 +0000 UTC'>2011-08-27</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Certyfikaty SelfSigned" href=https://gagor.pro/2011/08/certyfikaty-selfsigned/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Dynamiczne IP i RBL’e</h2></header><div class=entry-content><p>Mój serwer pocztowy działa od jakiegoś czasu na dynamicznym IP (dobre bo tanie…) i przeważnie nie ma z tym problemów. Postarałem się jak mogłem ustawiając SPF’a i DomainKeys aby uwiarygodnić go u większych dostawców poczty.
Niestety wszystko to diabli biorą w momencie gdy wygasa mi leasse DHCP i dostaję nowe IP po jakimś spamerze/zombiaku. Wisi takie w 2-3 większych RBL’ach i o dostarczaniu poczty można zapomnieć. Miło gdy jeszcze zdalny MTA zechce odesłać zwrotkę “zróbta coś bo wisisz w RBL’u takim a takim…”, ale zdecydowania niefajnie gdy wysyłasz pocztę a ona od razu leci do /dev/null rblcheck Poszperałem trochę i znalazłem fajne narzędzie aka rblcheck, które sprawdza domyślnie kilka RBL’i....</p></div><footer class=entry-footer><span title='2011-08-27 00:00:00 +0000 UTC'>2011-08-27</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Dynamiczne IP i RBL’e" href=https://gagor.pro/2011/08/dynamiczne-ip-i-rble/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Klastrowanie sesji PHP z memcached</h2></header><div class=entry-content><p>Klastrowanie to może zbyt dumnie powiedziane. Rozwiązanie to wyszukałem gdy chcąc skonfigurować dwa serwery apache do współpracy na rzecz jednego serwisu okazało się, że sejse trzymane są tylko przez jeden serwer a drugi nic o nich nie wie. To oczywiście nie pozwalało na prawidłowe działanie jakiegokolwiek serwisu korzystającego z sesji.
Pomysł jest taki, że zastępujemy domyśny mechanizm przechowywania sesji w plikach na dysku mechanizmem memcache. Ponieważ memcached działa jako usługa sieciowa, różne serwery mogą się odwoływać do puli memcached i odczytywać zapisane w niej dane....</p></div><footer class=entry-footer><span title='2011-08-27 00:00:00 +0000 UTC'>2011-08-27</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Klastrowanie sesji PHP z memcached" href=https://gagor.pro/2011/08/klastrowanie-sesji-php-z-memcached/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>MySQL - dostęp zdalny na szybko</h2></header><div class=entry-content><p>Instalacja serwera MySQL na Debianie jest niezwykle prosta i sprowadza się do jednego polecenia:
sudo apt-get install mysql-server Polecenie to zainstaluje i uruchomi usługę serwerową MySQL. W czasie instalacji będziemy proszeni o podanie hasła dla root’a (które oczywiście dobrze jest zapamiętać bądź zapisać).
Tak zainstalowana baza nasłuchuje na lokalnym porcie (localhost:3306) umożliwiająć dostęp wyłącznie root’owi. Jest to bardzo bezpieczna konfiguracja… Ale jeśli nie mamy zamiaru na tej samej maszynie instalować oprogramowania zarządzającego to nie zawsze jest to wygodne, tym bardziej gdy przykładowo mamy działającego phpmyadmin’a na jakimś serwerze www....</p></div><footer class=entry-footer><span title='2011-08-27 00:00:00 +0000 UTC'>2011-08-27</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to MySQL - dostęp zdalny na szybko" href=https://gagor.pro/2011/08/mysql-na-szybko/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Quota na katalog w XFS’ie</h2></header><div class=entry-content><p>Większość systemów plików w linuksie pozwala na ustawienie quoty na dwóch poziomach: na użytkownika lub na grupę użytkowników. W wielu przypadkach taki podział jest sensowny i wystarczający. Ale zdarzają się scenariusze, w których to za mało.
Dobrym przykładem jest serwer FTP z wirtualnymi kontami użytkowników. Czyli usługa serwera działa jako pewien nieuprzywilejowany użytkownik systemowy (przeważnie ftp) przypisany do nieuprzywilejowanej grupy (np. nogroup). Konta użytkowników serwera FTP są zdefiniowane w bazie danych lub serwerze LDAP....</p></div><footer class=entry-footer><span title='2011-08-27 00:00:00 +0000 UTC'>2011-08-27</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Quota na katalog w XFS’ie" href=https://gagor.pro/2011/08/quota-na-katalog-w-xfsie/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/categories/howto/page/17/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/categories/howto/page/19/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2024</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=https://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8d51d5292abd4c77bad90db038659671"}'></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>