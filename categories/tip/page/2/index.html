<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Tip | timor's site</title>
<meta name=keywords content>
<meta name=description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
<meta name=author content>
<link rel=canonical href=https://timor.site/categories/tip/>
<link crossorigin=anonymous href=/assets/css/stylesheet.3463bda35fd55b9ad6187f681d9b6a97123e084572ffc8e144d794f0d2a914df.css integrity="sha256-NGO9o1/VW5rWGH9oHZtqlxI+CEVy/8jhRNeU8NKpFN8=" rel="preload stylesheet" as=style>
<link rel=icon href=https://timor.site/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://timor.site/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://timor.site/favicon-32x32.png>
<link rel=apple-touch-icon href=https://timor.site/apple-touch-icon.png>
<link rel=mask-icon href=https://timor.site/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<link rel=alternate type=application/rss+xml href=https://timor.site/categories/tip/index.xml>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-88996819-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="Tip">
<meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
<meta property="og:type" content="website">
<meta property="og:url" content="https://timor.site/categories/tip/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Tip">
<meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://timor.site/ accesskey=h title="timor's site (Alt + H)">
<img src=https://timor.site/favicon-72x72.png alt aria-label=logo height=36>timor's site</a>
<div class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</div>
</div>
<ul id=menu>
<li>
<a href=https://timor.site/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://timor.site/projects/ title=Projects>
<span>Projects</span>
</a>
</li>
<li>
<a href=https://timor.site/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://timor.site/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://timor.site/about/ title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<header class=page-header><div class=breadcrumbs><a href=https://timor.site/>Home</a>&nbsp;¬ª&nbsp;<a href=https://timor.site/categories/>Categories</a></div>
<h1>
Tip
</h1>
</header>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Debuging commands running on memcached
</h2>
</header>
<div class=entry-content>
<p>I had stragne statistics on one memcached servers. I had to look what it‚Äôs doing there. I found such commands that may be used to sniff, extract and make statistics from running memcached server.
Debug GET commands tcpflow -c dst port 11211 | cut -b46- | grep ^get cut command will remove 46 bytes at beginning of every string (src, dst, port). You may need to adjust numeric parameter for cut to leave commands only....</p>
</div>
<footer class=entry-footer><span title="2016-07-13 00:00:00 +0000 UTC">2016-07-13</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Debuging commands running on memcached" href=https://timor.site/2016/07/debuging-commands-running-on-memcached/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>How to stole ssh session when you‚Äôre root
</h2>
</header>
<div class=entry-content>
<p>It happen to me all the time that one of developers notifies me about some kind of problem that I can‚Äôt confirm from my account. Sometimes it was because of bad ssh keys configuration, other times file permissions, mostly such stuff. It‚Äôs sometimes convenient to ‚Äúenter into someone‚Äôs shoes‚Äù to see what‚Äôs going on there.
If you‚Äôre root on machine you may do that like this:
su developer - Easy one but that‚Äôs not enough for all cases....</p>
</div>
<footer class=entry-footer><span title="2016-04-27 00:00:00 +0000 UTC">2016-04-27</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to How to stole ssh session when you‚Äôre root" href=https://timor.site/2016/04/how-to-stole-ssh-session-when-youre-root/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>pip - uninstall package with dependencies
</h2>
</header>
<div class=entry-content>
<p>Virtualenvs in python are cheap but from time to time you will install something with pip on your system and when time comes removing all this crap could be difficult. I found this bash snippet that will uninstall package with all dependencies:
for dep in $(pip show python-neutronclient | grep Requires | sed 's/Requires: //g; s/,//g') ; do sudo pip uninstall -y $dep ; done pip uninstall -y python-neutronclient Source: http://stackoverflow....</p>
</div>
<footer class=entry-footer><span title="2016-04-26 00:00:00 +0000 UTC">2016-04-26</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to pip - uninstall package with dependencies" href=https://timor.site/2016/04/pip-uninstall-package-with-dependencies/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Prefer IPv4 over IPv6
</h2>
</header>
<div class=entry-content>
<p>I try to use IPv6 where it‚Äôs available but it‚Äôs sometimes so hard‚Ä¶ It happen quite often that I can‚Äôt download packages from repos because they weren‚Äôt configured on IPv6 vhosts even when host is available via IPv6 address. For APT you may use this trick to force IPv4 connections only:
echo 'Acquire::ForceIPv4 "true";' > /etc/apt/apt.conf.d/99force-ipv4 If you need more than that, then gai.conf will allow you to filter where you will be connecting via IPv4 and where via IPv6 - in example bellow you will prefer IPv4 whenever it‚Äôs available:...</p>
</div>
<footer class=entry-footer><span title="2016-03-29 00:00:00 +0000 UTC">2016-03-29</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Prefer IPv4 over IPv6" href=https://timor.site/2016/03/prefer-ipv4-over-ipv6/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>List octal file permissions in bash
</h2>
</header>
<div class=entry-content>
<p>Sometimes it‚Äôs easier to use octal file permissions but they‚Äôre not so easy to list. I caught myself few times that I didn‚Äôt remember how to list them - so this is a reason for that note.
stat -c "%a %n" * 755 bin 755 games 755 include Yes, it‚Äôs that easy üòÉ
And here also with human readable attributes:
stat -c '%A %a %n' * drwxr-xr-x 755 bin drwxr-xr-x 755 games drwxr-xr-x 755 include </p>
</div>
<footer class=entry-footer><span title="2016-02-24 00:00:00 +0000 UTC">2016-02-24</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to List octal file permissions in bash" href=https://timor.site/2016/02/list-octal-file-permissions-in-bash/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>WordPress with HyperDB on PHP 7.0
</h2>
</header>
<div class=entry-content>
<p>I was configuring WordPress with HyperDB plugin on PHP 7.0 but the only I get were constant 500 errors. As I found here PHP 7.0 is not supported by HyperDB for now - it‚Äôs rely on mysql php extension but in PHP 7.0 there is only mysqli extension. But few folks fixed it and it‚Äôs possible to use it.
curl -O https://raw.githubusercontent.com/soulseekah/hyperdb-mysqli/master/db.php mv db.php /var/www/wordpress/wp-content/ And configure it ex. like this:...</p>
</div>
<footer class=entry-footer><span title="2016-02-24 00:00:00 +0000 UTC">2016-02-24</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to WordPress with HyperDB on PHP 7.0" href=https://timor.site/2016/02/wordpress-with-hyperdb-on-php-7-0/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Automatically build after file change
</h2>
</header>
<div class=entry-content>
<p>I‚Äôm playing a lot with Docker lately. Building images, and then rebuilding, and then building again‚Ä¶ It‚Äôs pretty boring. To automate this task a little I used inotify to build automatically after I changed any file. This trick could be used in many different situations.
You will need inotify-tools package:
sudo apt-get install -y inotify-tools Then run something like this:
while inotifywait -e modify -r .; do docker-compose build; done This commands will rebuild my Docker images after any file change in current directory....</p>
</div>
<footer class=entry-footer><span title="2016-02-23 00:00:00 +0000 UTC">2016-02-23</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Automatically build after file change" href=https://timor.site/2016/02/automatically-build-after-file-change/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Install Docker Compose
</h2>
</header>
<div class=entry-content>
<p>When I started playing with Docker I was running a lot of commands to build image, delete containers running on old image, run containers based on new image, etc‚Ä¶ A lot of log commands with links, volumes, etc‚Ä¶
Then I started searching for something to automate this task and here I get to docker-compse command, this is how you may install it:
pip install docker-compose And install additional bash completions (run as root):...</p>
</div>
<footer class=entry-footer><span title="2016-02-12 00:00:00 +0000 UTC">2016-02-12</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Install Docker Compose" href=https://timor.site/2016/02/install-docker-compose/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Manual installation of Docker on Debian/Ubuntu
</h2>
</header>
<div class=entry-content>
<p>I‚Äôve played with Docker a little in it early days but didn‚Äôt stick for longer with it. It‚Äôs stable now so I wanted to check how it‚Äôs running now.
I really can‚Äôt accept this method of installation:
curl -fsSL https://get.docker.com/ | sh I think that world is going to it‚Äôs end when I see such scritps‚Ä¶ I prefer to do this manually, knowing exactly what I have to do.
Install prerequisites:...</p>
</div>
<footer class=entry-footer><span title="2016-02-11 00:00:00 +0000 UTC">2016-02-11</span>&nbsp;¬∑&nbsp;2 min</footer>
<a class=entry-link aria-label="post link to Manual installation of Docker on Debian/Ubuntu" href=https://timor.site/2016/02/manual-installation-of-docker-on-debian-ubuntu/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Some useful commands in Docker
</h2>
</header>
<div class=entry-content>
<p>I started playing with Docker and here I will write some commands that where not so obvious at beginning üòÉ
List running containers:
docker ps List also not running containers:
docker ps -a Remove all containers (be careful with that):
docker rm $(docker ps -a -q) Remove all images:
docker rmi $(docker images -q) Docker won‚Äôt remove any old volumes used by containers, so after some time you may be interested in deleting them all:...</p>
</div>
<footer class=entry-footer><span title="2016-02-11 00:00:00 +0000 UTC">2016-02-11</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Some useful commands in Docker" href=https://timor.site/2016/02/some-useful-commands-in-docker/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=prev href=https://timor.site/categories/tip/>
¬´&nbsp;Prev&nbsp;
</a>
<a class=next href=https://timor.site/categories/tip/page/3/>Next&nbsp;&nbsp;¬ª
</a>
</nav>
</footer>
</main>
<footer class=footer>
<span><a href=https://timor.site/>timor's site</a> &copy; 2008-2022</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span>
</footer>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>