<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Tip | timor's site</title>
<meta name=keywords content>
<meta name=description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
<meta name=author content>
<link rel=canonical href=https://timor.site/categories/tip/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.a6564483631bceb126e1ccf965a2dc167df7b8a408d2785a0deaa63d62e29233.css integrity="sha256-plZEg2MbzrEm4cz5ZaLcFn33uKQI0nhaDeqmPWLikjM=" rel="preload stylesheet" as=style>
<link rel=preload href=https://timor.site/favicon-36x36.png as=image>
<link rel=icon href=https://timor.site/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://timor.site/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://timor.site/favicon-32x32.png>
<link rel=apple-touch-icon href=https://timor.site/apple-touch-icon.png>
<link rel=mask-icon href=https://timor.site/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.89.0">
<link rel=alternate type=application/rss+xml href=https://timor.site/categories/tip/index.xml>
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-88996819-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="Tip">
<meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
<meta property="og:type" content="website">
<meta property="og:url" content="https://timor.site/categories/tip/">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Tip">
<meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog">
</head>
<body class=list id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://timor.site/ accesskey=h title="timor's site (Alt + H)">
<img src=https://timor.site/favicon-36x36.png alt=logo aria-label=logo height=36>timor's site</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://timor.site/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://timor.site/projects/ title=Projects>
<span>Projects</span>
</a>
</li>
<li>
<a href=https://timor.site/archives/ title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://timor.site/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
<li>
<a href=https://timor.site/about/ title=About>
<span>About</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<header class=page-header><div class=breadcrumbs><a href=https://timor.site/>Home</a>&nbsp;¬ª&nbsp;<a href=https://timor.site/categories/>Categories</a></div>
<h1>Tip</h1>
</header>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Change default WSUS port from 8530 to 80 on Windows Server 2012
</h2>
</header>
<section class=entry-content>
<p>After WSUS installing on Windows Server 2012 I discovered that it‚Äôs running on port 8530, different than on older version of Windows (it was using port 80 from beginning). But what‚Äôs more interesting it was running ONLY on IPv6 interface! Switching binding configuration in IIS doesn‚Äôt help.
I could stand switching port - it‚Äôs nothing hard with GPO, but IPv6 only configuration was not acceptable.
After googling for some time I found one command that solved my problems by switching WSUS to older behavior and run it on port 80 (on default website)....</p>
</section>
<footer class=entry-footer><span title="2014-01-24 00:00:00 +0000 UTC">2014-01-24</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Change default WSUS port from 8530 to 80 on Windows Server 2012" href=https://timor.site/2014/01/change-default-wsus-port-from-8530-to-80-on-windows-server-2012/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Loop unlooping in Javascript
</h2>
</header>
<section class=entry-content>
<p>Few days ago I‚Äôve read a book ‚ÄòEven Faster Web Sites‚Äò about websites optimisation and I found one thing usefuluseful, not only on websites. There was a small tip about looploop unlooping. I want to quote them for later use.
First - with switch statement var iterations = Math.ceil(values.length / 8); var startAt = values.length % 8; var i = 0; do { switch(startAt) { case 0: process(values[i++]); case 7: process(values[i++]); case 6: process(values[i++]); case 5: process(values[i++]); case 4: process(values[i++]); case 3: process(values[i++]); case 2: process(values[i++]); case 1: process(values[i++]); } startAt = 0; } while(--iterations > 0); Second - without switch var iterations = Math....</p>
</section>
<footer class=entry-footer><span title="2014-01-07 00:00:00 +0000 UTC">2014-01-07</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Loop unlooping in Javascript" href=https://timor.site/2014/01/loop-unlooping-in-javascript/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Apache - precompressing static files with gzip
</h2>
</header>
<section class=entry-content>
<p>Some time ago I‚Äôve show how to precompress js and css file with gzip to be available for Nginx‚Äôs mod_gzip. In default configuration Apache don‚Äôt have such module but similar functionality could be achieved with few custom rewirtes.
Basically we will start with these rewrites to serve gzipped CSS/JS files if they exist and the client accepts gzip compression:
RewriteEngine on RewriteCond %{HTTP:Accept-encoding} gzip RewriteCond %{REQUEST_FILENAME}\.gz -s RewriteRule ^(.*)\.(js|css)$ $1\.$2\.gz [QSA] Then we need to setup proper content types for such compressed files - I know how to do this in two ways:...</p>
</section>
<footer class=entry-footer><span title="2013-12-27 00:00:00 +0000 UTC">2013-12-27</span>&nbsp;¬∑&nbsp;2 min</footer>
<a class=entry-link aria-label="post link to Apache - precompressing static files with gzip" href=https://timor.site/2013/12/apache-precompressing-static-files-with-gzip/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Android: Xposed + AppOps - reclaim control over installed applications permissions
</h2>
</header>
<section class=entry-content>
<p>I‚Äôm happy owner of Galaxy Nexus 7 and lately I updated my tablet to Android 4.4 Kitkat. One of features I most expected was ability to block some permissions of some applications. Such setting was available in 4.4 version but was removed in latest 4.4.2 - Google didn‚Äôt explain it exactly why. I don‚Äôt like when for ex. game need: camera or GPS access - for what I asked?
But there is new app so called App Ops that unhides build-in interface allowing edit of application permissions....</p>
</section>
<footer class=entry-footer><span title="2013-12-17 00:00:00 +0000 UTC">2013-12-17</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Android: Xposed + AppOps - reclaim control over installed applications permissions" href=https://timor.site/2013/12/android-xposed-appops-reclaim-control-over-installed-applications-permissions/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Delete audio track from mkv file
</h2>
</header>
<section class=entry-content>
<p>Lately I tried to remove some streams from MKV file - I wanted: video, audio in my language and no subtitles. I achieved it with mkvtoolnix utils.
Firstly I have to identify streams in file:
$ mkvmerge -i input_file.mkv File 'test.mkv': container: Matroska Track ID 0: video (V_MPEG4/ISO/AVC) Track ID 1: audio (A_DTS) Track ID 2: audio (A_AC3) Track ID 3: audio (A_DTS) Track ID 4: audio (A_AC3) Track ID 5: subtitles (S_TEXT/UTF8) Track ID 6: subtitles (S_TEXT/UTF8) Chapters: 16 entries You could use more verbose tool mkvinfo for that purpose too....</p>
</section>
<footer class=entry-footer><span title="2013-12-16 00:00:00 +0000 UTC">2013-12-16</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Delete audio track from mkv file" href=https://timor.site/2013/12/delete-audio-track-from-mkv-file/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Preparing video files for streaming on website in MP4 and WEBM format
</h2>
</header>
<section class=entry-content>
<p>Some time ago I prepared a PC that was responsible for batch encoding of movies to formats suitable for web players (such as. Video.js, JW Player, Flowplayer, etc.)
I used HandBrake for conversion to MP4 format (becase this soft was the fastest one) and ffmpeg (aka avconv in new version) for two pass encoding to WEBM.
Below are commands used by me for that conversion:
MP4 HandBrakeCLI -e x264 -q 20....</p>
</section>
<footer class=entry-footer><span title="2013-12-16 00:00:00 +0000 UTC">2013-12-16</span>&nbsp;¬∑&nbsp;2 min</footer>
<a class=entry-link aria-label="post link to Preparing video files for streaming on website in MP4 and WEBM format" href=https://timor.site/2013/12/preparing-video-files-for-streaming-on-website-in-mp4-and-webm-format/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Ansible - Dynamicaly update /etc/hosts files on target servers
</h2>
</header>
<section class=entry-content>
<p>I was configuring GlusterFS on few servers using Ansible and have a need to update /etc/hosts with hostnames for easier configuration. I found this one working:
- name: Update /etc/hosts lineinfile: dest=/etc/hosts regexp='.*{{item}}$' line='{{hostvars.{{item}}.ansible_default_ipv4.address}} {{item}}' state=present with_items: '{{groups.somegroup}}' Source: http://xmeblog.blogspot.com/2013/06/ansible-dynamicaly-update-etchosts.html</p>
</section>
<footer class=entry-footer><span title="2013-12-11 00:00:00 +0000 UTC">2013-12-11</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Ansible - Dynamicaly update /etc/hosts files on target servers" href=https://timor.site/2013/12/ansible-dynamicaly-update-etc-hosts-files-on-target-servers/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Reset user password in your own Ghost Blog
</h2>
</header>
<section class=entry-content>
<p>I‚Äôve started testing new Ghost blogging platform for a while on a virtual machine before I take decision about switching to it (or maybe won‚Äôt)‚Ä¶ After few days, I wanted to go forward with more testing and stuck on ‚Äúe-mail and password‚Äù login prompt üòÉ
I‚Äôve started looking into files and found ghost_dir/content/data/ghost-dev.db SQLite database. It can be opened like that:
sqlite3 content/data/ghost-dev.db Then you could see whats your mail (and other info):...</p>
</section>
<footer class=entry-footer><span title="2013-11-28 00:00:00 +0000 UTC">2013-11-28</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Reset user password in your own Ghost Blog" href=https://timor.site/2013/11/reset-user-password-in-your-own-ghost-blog/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Inodes on XFS
</h2>
</header>
<section class=entry-content>
<p>It‚Äôs quite rare to have problems with XFS and inodes exhaustion. Mostly because XFS doesn‚Äôt have inode limit in a manner known from other filesystems - it‚Äôs using some percentage of whole filesystem as a limit and in most distributions it‚Äôs 25%. So it‚Äôs really huge amount of inodes. But some tools and distributions lowered limit ex. 5% or 10% and there you could have problems more often.
You could check what is you limit by issuing xfs_info with drive and searching for imaxpct value:...</p>
</section>
<footer class=entry-footer><span title="2013-11-27 00:00:00 +0000 UTC">2013-11-27</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Inodes on XFS" href=https://timor.site/2013/11/inodes-on-xfs/></a>
</article>
<article class="post-entry tag-entry">
<header class=entry-header>
<h2>Kill with SIGSTOP and SIGCONT
</h2>
</header>
<section class=entry-content>
<p>I‚Äôve bought a NAS and customized it a little. But there was one thing which make my nights sleepless. NAS was seeking disks every 5~10 seconds - these was really irritating - especially when it was silent in room. I found that part of firmware was indexing or logging something so I wanted it dead! kill -9 was unsuccessful - process restarted after a while‚Ä¶. wrrr‚Ä¶
I googled a little and found another signal I could use SIGSTOP, which will freeze process until I send SIGCONT to it - that was exactly what I need (because I normally use NFS/Samba and don‚Äôt need nothing more running on this device)....</p>
</section>
<footer class=entry-footer><span title="2013-11-21 00:00:00 +0000 UTC">2013-11-21</span>&nbsp;¬∑&nbsp;1 min</footer>
<a class=entry-link aria-label="post link to Kill with SIGSTOP and SIGCONT" href=https://timor.site/2013/11/kill-with-sigstop-and-sigcont/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=prev href=https://timor.site/categories/tip/page/4/>¬´ Prev Page</a>
<a class=next href=https://timor.site/categories/tip/page/6/>Next Page ¬ª</a>
</nav>
</footer>
</main>
<footer class=footer>
<span><span>¬© 2011 <a href=https://timor.site>timor&rsquo;s site</a></span> <span>Licensed under <a rel=license rel="noopener noreferrer" target=_blank href=http://creativecommons.org/licenses/by-sa/4.0/> (CC BY-SA 4.0)</a></span></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>