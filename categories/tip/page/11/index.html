<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tip | Tom's Blog</title>
<meta name=keywords content><meta name=description content="pages for taxonomy (classification) term: tip"><meta name=author content="timor"><link rel=canonical href=https://gagor.pro/categories/tip/><link crossorigin=anonymous href=/assets/css/stylesheet.985a7641e69c6b20f34bf2fd88dce5a50d271007390e15128242aada21b132f4.css integrity="sha256-mFp2QeacayDzS/L9iNzlpQ0nEAc5DhUSgkKq2iGxMvQ=" rel="preload stylesheet" as=style><link rel=icon href=https://gagor.pro/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://gagor.pro/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://gagor.pro/favicon-32x32.png><link rel=apple-touch-icon href=https://gagor.pro/apple-touch-icon.png><link rel=mask-icon href=https://gagor.pro/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://gagor.pro/categories/tip/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://gagor.pro/categories/tip/"><meta property="og:site_name" content="Tom's Blog"><meta property="og:title" content="Tip"><meta property="og:description" content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tip"><meta name=twitter:description content="Linux configuration, Automation, Security - Sysadmin/DevOps blog"></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gagor.pro/ accesskey=h title="Tom's Blog (Alt + H)"><img src=https://gagor.pro/favicon-36x36.avif alt="Page logo" aria-label=logo height=36 width=36>Tom's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gagor.pro/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://gagor.pro/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://gagor.pro/bookshelf/ title=Bookshelf><span>Bookshelf</span></a></li><li><a href=https://gagor.pro/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://gagor.pro/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://gagor.pro/>Home</a>&nbsp;»&nbsp;<a href=https://gagor.pro/categories/>Categories</a></div><h1>Tip</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Dynamiczna zmiana rozmiaru partycji EXT4 na LVM’ie</h2></header><div class=entry-content><p>Używam LVM’a zarówno na desktopie jak i wielu serwerach bo bardzo podoba mi się możliwość powiększenia akurat tej partycji, na której brakuje miejsca. O ile pamiętam jak powiększyć partycję XFS (xfs_growfs /punkt/montowania) to zawsze mam problem jak to zrobić na EXT3/4, więc notuję.
Powiększenie wolumenu LVM (np. o 10 gigabajtów):
lvextend -L+10G /dev/vggroup/vol Zwiększenie rozmiaru systemu plików do nowego rozmiaru wolumenu:
resize2fs /dev/vggroup/vol Powyższe polecenie można wykonać na zamontowanym zasobie - online.
...</p></div><footer class=entry-footer><span title='2012-06-08 00:00:00 +0000 UTC'>2012-06-08</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Dynamiczna zmiana rozmiaru partycji EXT4 na LVM’ie" href=https://gagor.pro/2012/06/dynamiczna-zmiana-rozmiaru-partycji-ext4-na-lvmie/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Nginx - mój domyślny config</h2></header><div class=entry-content><p>W tym poście nie rozpiszę się zbytnio - wrzucam tylko config od którego zaczynam konfigurację nginx’a.
user www-data; worker_processes 4; pid /var/run/nginx.pid; events { worker_connections 1024; ## zaakceptuj tak dużo połączeń jak to możliwe multi_accept on; ## epoll jest preferowany na jajkach od 2.6 ## http://www.kegel.com/c10k.html#nb.epoll use epoll; } http { include /etc/nginx/mime.types; default_type application/octet-stream; access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; ## opcje TCP sendfile on; tcp_nopush on; tcp_nodelay on; ## maksymalny rozmiar zapytnia client_max_body_size 10m; ## timeout'y client_body_timeout 60; client_header_timeout 60; keepalive_timeout 10; send_timeout 60; ## kompresja gzip on; gzip_static on; gzip_vary on; gzip_disable "msie6"; gzip_comp_level 1; gzip_proxied any; gzip_buffers 16 8k; gzip_min_length 50; gzip_types text/plain text/css application/json application/x-javascript application/javascript text/javascript application/atom+xml application/xml application/xml+rss text/xml image/x-icon text/x-js application/xhtml+xml; ## bezpieczeństwo ## security by obscurity - ukrywamy wersję nginx'a server_tokens off; ignore_invalid_headers on; ## resetuj zbyt długie połączenia - powinno pomóc na slowlorisa reset_timedout_connection on; ## włączenie ochrony przed clickjackingiem - uruchamiam to per vhost ## https://developer.mozilla.org/en/The_X-FRAME-OPTIONS_response_header #add_header X-Frame-Options SAMEORIGIN; ## potrzebne zeby zbudowac mape ponizej map_hash_bucket_size 256; ## blacklist'a botów i referer'ów include blacklist.conf; ## # jeśli połączenie na HTTPS'a to ustawiamy zmienną by mogło być obsłużone ## map $scheme $server_https { default off; https on; } include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*; } No i jeszcze zawartość blacklist.conf - na początek wystarczy a można rozszerzyć pod siebie:
...</p></div><footer class=entry-footer><span title='2012-06-08 00:00:00 +0000 UTC'>2012-06-08</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Nginx - mój domyślny config" href=https://gagor.pro/2012/06/nginx-moj-domyslny-config/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Fortigate: Warning: SQL Logging is not enabled</h2></header><div class=entry-content><p>Jeśli po aktualizacji firmware na swoim firewall’u do wersji MR3 natrafisz na komunikat Warning: SQL Logging is not enabled przy dostępie do logów to prawdopodobnie musisz zmienić źródło logów dla interfejsu gui. Poniżej polecenie CLI i możliwe opcje:
config log gui set logdevice {memory | disk | fortianalyzer} end Ja potrzebowałem ustawić tę opcję na fortianalyzer by uzyskać dostęp do moich logów.</p></div><footer class=entry-footer><span title='2012-04-11 00:00:00 +0000 UTC'>2012-04-11</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Fortigate: Warning: SQL Logging is not enabled" href=https://gagor.pro/2012/04/fortigate-warning-sql-logging-is-not-enabled/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Konwersja formatu certyfikatu dla telefonów Nokia</h2></header><div class=entry-content><p>Chciałem zaimportować mój certyfikat self-signed do Nokii E72 by nie krzyczała przy sprawdzaniu poczty. Potrzebowałem certyfikatu w formacie DER, a miałem w PEM - chwilę szukałem jak dokonać konwersji, więc ku pamięci zapisuję kilka gotowych poleceń:
Konwersja certyfikatu z PEM na DER openssl x509 -in in.crt -inform PEM -out out.crt -outform DER Konwersja certyfikatu z DER na PEM openssl x509 -in in.crt -inform DER -out out.crt -outform DER Konwersja klucza z formatu PEM na DER openssl rsa -in in.crt -inform PEM -out out.crt -outform DER Konwersja klucza z formatu DER na PEM openssl rsa -in in.crt -inform DER -out out.crt -outform PEM Po konwersji certyfikat w formacie DER wystarczy wrzucić na kartę i otworzyć z menadżera plików, zainstalować.
...</p></div><footer class=entry-footer><span title='2012-04-11 00:00:00 +0000 UTC'>2012-04-11</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Konwersja formatu certyfikatu dla telefonów Nokia" href=https://gagor.pro/2012/04/konwersja-formatu-certyfikatu-dla-telefonow-nokia/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Xen - ustawienie autostartu DomU</h2></header><div class=entry-content><p>Aby wybrane systemy DomU startowały automatycznie po restarcie hypervisora należy podlinkować ich pliki konfiguracyjne w katalogu /etc/xen/auto po uprzednim jego utworzeniu. Przykładowo:
mkdir /etc/xen/auto ln -s /etc/xen/example.cfg /etc/xen/auto/example.cfg Od teraz DomU example będzie startować automatycznie.</p></div><footer class=entry-footer><span title='2012-02-27 00:00:00 +0000 UTC'>2012-02-27</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Xen - ustawienie autostartu DomU" href=https://gagor.pro/2012/02/xen-ustawienie-autostartu-domu/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Xen - Włączenie Live Migration</h2></header><div class=entry-content><p>Jeżeli zdecydowaliśmy się na systemu DomU w obrazach to możemy korzystać z live migration. By uruchomić jej obsługę, trzeba w pliku /etc/xen/xend-config.sxp odkomentować odpowiednie linie i ustawić adres IP:
(xend-relocation-server yes) (xend-relocation-port 8002) (xend-relocation-address '10.0.10.91') Wykonywanie migracji xm migrate --live nazwa-domu nazwa.lub.ip.zdalnego.hosta</p></div><footer class=entry-footer><span title='2012-02-25 00:00:00 +0000 UTC'>2012-02-25</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Xen - Włączenie Live Migration" href=https://gagor.pro/2012/02/xen-wlaczenie-live-migration/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Wstępne ładowanie programów przy starcie z ureadahead</h2></header><div class=entry-content><p>Jakiś czas temu korzystałem z preload’a  external link który sam uczył się jakie aplikacje odpalam i te programy ładował już podczas startu - przeważnie nieco spowalnia to start systemu ale gdy już się załaduje to programy, które uruchamiam jako pierwsze startują “z kopa”. Od jakiegoś czasu popularniejszy jest instalowany domyślnie w Ubuntu ureadahead - pełni on podobną funkcję jak preload.
...</p></div><footer class=entry-footer><span title='2012-01-24 00:00:00 +0000 UTC'>2012-01-24</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Wstępne ładowanie programów przy starcie z ureadahead" href=https://gagor.pro/2012/01/wstepne-ladowanie-programow-przy-starcie-z-ureadahead/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Długie oczekiwanie na nawiązanie połączenia ssh</h2></header><div class=entry-content><p>Objaw przeważnie jest taki: łączysz się po ssh podając klucz/hasło i czekasz nawet i 10 sekund aż pojawi się prompt. Po połączeniu wszystkie polecenia działają z normalną szybkością. Brzmi znajomo? 😉
Taki objaw przeważnie jest skutkiem problemów z działaniem DNS’a po stronie klienta lub serwera. Warto sprawdzić poleceniami host/dig/nslookup po obu stronach jak dużo czasu potrzeba na rozwiązanie nazw. Najlepiej rozwiązać problem z DNS’em ustawiając szybkie serwery ale gdy nie mamy takiej możliwości to po stronie serwera można ustawić w /etc/sshd_config opcję:
...</p></div><footer class=entry-footer><span title='2012-01-23 00:00:00 +0000 UTC'>2012-01-23</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Długie oczekiwanie na nawiązanie połączenia ssh" href=https://gagor.pro/2012/01/dlugie-oczekiwanie-na-nawiazanie-polaczenia-ssh/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Sniffowanie w FortiOS</h2></header><div class=entry-content><p>Zawsze gdy potrzebuję zesniffować coś na żywo na Fortigate’ach muszę przeszukać Knowledge Base  external link by przypomnieć sobie wszystkie polecenia do tego potrzebne. Tym razem robię notatki 😃
Sniffowanie diagnose debug enable diagnose debug flow filter addr ip address clear clear filter daddr dest ip address dport destination port negate inverse filter port port proto protocol number saddr source ip address sport source port vd index of virtual domain # np. diagnose debug flow filter saddr 10.10.80.3 diagnose debug flow filter daddr 8.8.8.8 diagnose debug flow filter dport 53 # wyświetl wyniki na konsoli diagnose debug flow show console enable # opcjonalne: wyświetla nazwy funkcji np. odwołania do routingu, itp diagnose debug flow show function-name enable # uruchomienie sniffowania - warto podać na końcu jakaś wartość # by sniffowanie zakończyło się po takiej liczbie pakietów # w przeciwnym wypadku wyniki będą się wypisywać na konsoli # aż uda nam się na oślep wyłączyć sniffowanie diagnose debug flow trace start 100 # zresetowanie filtrowania flow diagnose debug reset # wyłączenie sniffowania diagnose debug disable Diagnostyka tuneli IP-Sec # tutaj jest dużo prościej, najpierw włączamy debuga diagnose debug enable # a potem diagnose debug application ike 2 # lub dla bardzo, bardzo szczegółowych logów diagnose debug application ike -1 Niestety nie ma tutaj możliwości filtrowania (albo jeszcze o tym nie wiem), więc jeśli mamy dużo aktywnych tuneli to najlepiej zbierać wypisywane komunikaty do pliku i dopiero przeglądać.
...</p></div><footer class=entry-footer><span title='2012-01-23 00:00:00 +0000 UTC'>2012-01-23</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Sniffowanie w FortiOS" href=https://gagor.pro/2012/01/sniffowanie-w-fortios/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy srcset="https://gagor.pro/2012/01/skoda-fabia-kasownie-ostrzezen-oil-i-service-insp/cover_hu1299450992647450800.webp 360w ,https://gagor.pro/2012/01/skoda-fabia-kasownie-ostrzezen-oil-i-service-insp/cover_hu2657257244710170092.webp 480w ,https://gagor.pro/2012/01/skoda-fabia-kasownie-ostrzezen-oil-i-service-insp/cover_hu13183113202517124400.webp 720w ,https://gagor.pro/2012/01/skoda-fabia-kasownie-ostrzezen-oil-i-service-insp/cover.webp 720w" sizes="(min-width: 768px) 720px, 100vw" src=https://gagor.pro/2012/01/skoda-fabia-kasownie-ostrzezen-oil-i-service-insp/cover.webp alt width=720 height=300></figure><header class=entry-header><h2 class=entry-hint-parent>Skoda Fabia - Kasownie ostrzeżeń OIL i service INSP</h2></header><div class=entry-content><p>Jeżeli jesteś właścicielem Skody Fabii I to wcześniej czy później Twój BAT-Mobil zgłosi któreś z ostrzeżeń serwisowych:
OIL - pojawia się przeważnie co 10 tys. km i wtedy gdy jeszcze nie trzeba wymieniać oleju w silniku 😄 service INSP - nie wiem jak często się pojawia a oznacza mniej więcej “czas wesprzeć finansowo lokalny autoryzowany serwis”. Kasowanie ostrzeżenia “OIL” Przy wyłączonym silniku wciskamy i przytrzymujemy przycisk kasowania przebiegu dziennego/pokrętło ustawiania godziny, od teraz nazywany po prostu ‘przyciskiem’. Cały czas przytrzymując ‘przycisk’, włączamy zapłon. Powinniśmy zobaczyć napis OIL, puszczamy ‘przycisk’. Przekręcamy ‘przycisk’ w prawo, aż zobaczymy ‘- - - -’. Możemy wyłączyć zapłon. Kasowanie ostrzeżenia “service INSP” Wykonujemy czynności z punktów 1-3 podanych powyżej. Wciskamy ‘przycisk’, powinniśmy zobaczyć napis INSP, puszczamy przycisk. Przekręcamy ‘przycisk’ w prawo, aż zobaczymy ‘- - - -’. Możemy wyłączyć zapłon. U mnie zadziałało, mam nadzieję, że się komuś przyda.
...</p></div><footer class=entry-footer><span title='2012-01-12 00:00:00 +0000 UTC'>2012-01-12</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;timor</footer><a class=entry-link aria-label="post link to Skoda Fabia - Kasownie ostrzeżeń OIL i service INSP" href=https://gagor.pro/2012/01/skoda-fabia-kasownie-ostrzezen-oil-i-service-insp/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://gagor.pro/categories/tip/page/10/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://gagor.pro/categories/tip/page/12/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span><a href=https://gagor.pro/>Tom's Blog</a> &copy; 2008-2024</span>
<span>Content licensed under <a rel="license noopener noreferrer" target=_blank href=https://creativecommons.org/licenses/by-sa/4.0/>(CC BY-SA 4.0)</a></span></footer><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "8d51d5292abd4c77bad90db038659671"}'></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>